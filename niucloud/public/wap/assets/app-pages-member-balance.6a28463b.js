import{V as e,W as a,D as t,h as o,i as l,w as r,S as s,U as n,p as i,q as d,j as u,n as c,l as p,L as m,t as y,d as f,af as h,r as g,aq as _,$ as x,J as b,K as v,m as w,Y as S,aj as k,E as C,F as E,G as I,x as $,a9 as j,ao as U,X as L,a as B,e as P,ar as R,ai as T,k as F,v as H,ap as z,as as A,M as V,H as D}from"./index-e4516e00.js";import{_ as M}from"./u-loading-page.98779073.js";import{_ as O}from"./u-button.68ca80eb.js";import{p as K,_ as N}from"./u-input.c48dbab3.js";import{_ as W}from"./_plugin-vue_export-helper.1b428a4d.js";import{_ as q}from"./u-popup.27fcbe62.js";import{_ as X}from"./u-icon.800a0d37.js";import{_ as Y}from"./u-transition.44bb65c7.js";import{p as G,g as J}from"./pay.f1f14e93.js";import{w as Z}from"./wechat.717f80c2.js";import"./u-loading-icon.41e2cb8e.js";import"./u-safe-bottom.e98411e2.js";const Q=W({name:"u--input",mixins:[e,K,a],components:{uvInput:N}},[["render",function(e,a,n,i,d,u){const c=t("uvInput");return o(),l(c,{modelValue:e.modelValue,"onUpdate:modelValue":a[0]||(a[0]=a=>e.$emit("update:modelValue",a)),type:e.type,fixed:e.fixed,disabled:e.disabled,disabledColor:e.disabledColor,clearable:e.clearable,password:e.password,maxlength:e.maxlength,placeholder:e.placeholder,placeholderClass:e.placeholderClass,placeholderStyle:e.placeholderStyle,showWordLimit:e.showWordLimit,confirmType:e.confirmType,confirmHold:e.confirmHold,holdKeyboard:e.holdKeyboard,focus:e.focus,autoBlur:e.autoBlur,disableDefaultPadding:e.disableDefaultPadding,cursor:e.cursor,cursorSpacing:e.cursorSpacing,selectionStart:e.selectionStart,selectionEnd:e.selectionEnd,adjustPosition:e.adjustPosition,inputAlign:e.inputAlign,fontSize:e.fontSize,color:e.color,prefixIcon:e.prefixIcon,suffixIcon:e.suffixIcon,suffixIconStyle:e.suffixIconStyle,prefixIconStyle:e.prefixIconStyle,border:e.border,readonly:e.readonly,shape:e.shape,customStyle:e.customStyle,formatter:e.formatter,ignoreCompositionEvent:e.ignoreCompositionEvent},{default:r((()=>[s(e.$slots,"prefix",{slot:"prefix"}),s(e.$slots,"suffix",{slot:"suffix"})])),_:3},8,["modelValue","type","fixed","disabled","disabledColor","clearable","password","maxlength","placeholder","placeholderClass","placeholderStyle","showWordLimit","confirmType","confirmHold","holdKeyboard","focus","autoBlur","disableDefaultPadding","cursor","cursorSpacing","selectionStart","selectionEnd","adjustPosition","inputAlign","fontSize","color","prefixIcon","suffixIcon","suffixIconStyle","prefixIconStyle","border","readonly","shape","customStyle","formatter","ignoreCompositionEvent"])}]]);const ee=W({name:"u-image",mixins:[e,a,{props:{src:{type:String,default:n.image.src},mode:{type:String,default:n.image.mode},width:{type:[String,Number],default:n.image.width},height:{type:[String,Number],default:n.image.height},shape:{type:String,default:n.image.shape},radius:{type:[String,Number],default:n.image.radius},lazyLoad:{type:Boolean,default:n.image.lazyLoad},showMenuByLongpress:{type:Boolean,default:n.image.showMenuByLongpress},loadingIcon:{type:String,default:n.image.loadingIcon},errorIcon:{type:String,default:n.image.errorIcon},showLoading:{type:Boolean,default:n.image.showLoading},showError:{type:Boolean,default:n.image.showError},fade:{type:Boolean,default:n.image.fade},webp:{type:Boolean,default:n.image.webp},duration:{type:[String,Number],default:n.image.duration},bgColor:{type:String,default:n.image.bgColor}}}],data(){return{isError:!1,loading:!0,opacity:1,durationTime:this.duration,backgroundStyle:{},show:!1}},watch:{src:{immediate:!0,handler(e){e?(this.isError=!1,this.loading=!0):this.isError=!0}}},computed:{wrapStyle(){let e={};return e.width=this.$u.addUnit(this.width),e.height=this.$u.addUnit(this.height),e.borderRadius="circle"==this.shape?"10000px":uni.$u.addUnit(this.radius),e.overflow=this.radius>0?"hidden":"visible",uni.$u.deepMerge(e,uni.$u.addStyle(this.customStyle))}},mounted(){this.show=!0},emits:["click","error","load"],methods:{onClick(){this.$emit("click")},onErrorHandler(e){this.loading=!1,this.isError=!0,this.$emit("error",e)},onLoadHandler(e){this.loading=!1,this.isError=!1,this.$emit("load",e),this.removeBgColor()},removeBgColor(){this.backgroundStyle={backgroundColor:"transparent"}}}},[["render",function(e,a,t,n,f,h){const g=m,_=i(d("u-icon"),X),x=y,b=i(d("u-transition"),Y);return o(),l(b,{mode:"fade",show:f.show,duration:e.fade?1e3:0},{default:r((()=>[u(x,{class:"u-image",onClick:h.onClick,style:c([h.wrapStyle,f.backgroundStyle])},{default:r((()=>[f.isError?p("v-if",!0):(o(),l(g,{key:0,src:e.src,mode:e.mode,onError:h.onErrorHandler,onLoad:h.onLoadHandler,"show-menu-by-longpress":e.showMenuByLongpress,"lazy-load":e.lazyLoad,class:"u-image__image",style:c({borderRadius:"circle"==e.shape?"10000px":e.$u.addUnit(e.radius),width:e.$u.addUnit(e.width),height:e.$u.addUnit(e.height)})},null,8,["src","mode","onError","onLoad","show-menu-by-longpress","lazy-load","style"])),e.showLoading&&f.loading?(o(),l(x,{key:1,class:"u-image__loading",style:c({borderRadius:"circle"==e.shape?"50%":e.$u.addUnit(e.radius),backgroundColor:this.bgColor,width:e.$u.addUnit(e.width),height:e.$u.addUnit(e.height)})},{default:r((()=>[s(e.$slots,"loading",{},(()=>[u(_,{name:e.loadingIcon,width:e.width,height:e.height},null,8,["name","width","height"])]),!0)])),_:3},8,["style"])):p("v-if",!0),e.showError&&f.isError&&!f.loading?(o(),l(x,{key:2,class:"u-image__error",style:c({borderRadius:"circle"==e.shape?"50%":e.$u.addUnit(e.radius),width:e.$u.addUnit(e.width),height:e.$u.addUnit(e.height)})},{default:r((()=>[s(e.$slots,"error",{},(()=>[u(_,{name:e.errorIcon,width:e.width,height:e.height},null,8,["name","width","height"])]),!0)])),_:3},8,["style"])):p("v-if",!0)])),_:3},8,["onClick","style"])])),_:3},8,["show","duration"])}],["__scopeId","data-v-466b6710"]]),ae=W(f({__name:"pay",emits:["close"],setup(e,{expose:a,emit:t}){h()&&Z.init();const s=g(!1),n=g(!1),c=g(null),m=g(""),f=()=>{var e,a;uni.$u.test.isEmpty(m.value)?j({title:S("pay.notHavePayType"),icon:"none"}):n.value||(n.value=!0,G({trade_type:null==(e=c.value)?void 0:e.trade_type,trade_id:null==(a=c.value)?void 0:a.trade_id,type:m.value}).then((e=>{var a,t,o,l,r,s;switch(m.value){case"wechatpay":h()?(e.data.timestamp=e.data.timeStamp,delete e.data.timeStamp,Z.pay({...e.data,success:()=>{L()},cancel:()=>{n.value=!1}})):(uni.setStorageSync("paymenting",{trade_type:null==(a=c.value)?void 0:a.trade_type,trade_id:null==(t=c.value)?void 0:t.trade_id}),location.href=e.data.h5_url);break;case"alipay":h()?x({url:"/app/pages/pay/browser",param:{trade_type:null==(o=c.value)?void 0:o.trade_type,trade_id:null==(l=c.value)?void 0:l.trade_id,alipay:encodeURIComponent(e.data.url)},mode:"redirectTo"}):(uni.setStorageSync("paymenting",{trade_type:null==(r=c.value)?void 0:r.trade_type,trade_id:null==(s=c.value)?void 0:s.trade_id}),location.href=e.data.url);break;default:L()}})).catch((()=>{n.value=!1})))};_("checkIsReturnAfterPayment",(()=>{const e=uni.getStorageSync("paymenting");uni.getStorageSync("paymenting")&&x({url:"/app/pages/pay/result",param:{trade_type:e.trade_type,trade_id:e.trade_id},mode:"redirectTo",success(){uni.removeStorageSync("paymenting")}})}));const L=()=>{var e,a;x({url:"/app/pages/pay/result",param:{trade_type:null==(e=c.value)?void 0:e.trade_type,trade_id:null==(a=c.value)?void 0:a.trade_id},mode:"redirectTo"})},B=()=>{uni.removeStorageSync("paymenting"),s.value=!1,t("close")};return a({open:(e,a,t="")=>{uni.setStorageSync("payReturn",encodeURIComponent(t)),J(e,a).then((e=>{let{data:a}=e;c.value=a,uni.$u.test.isEmpty(a)?j({title:S("pay.notObtainedInfo"),icon:"none"}):0!=a.money?0==a.status?(m.value=a.pay_type_list[0]?a.pay_type_list[0].key:"",s.value=!0):j({title:S("pay.paymentDocuments")+a.status_name,icon:"none"}):L()})).catch((()=>{}))}}),(e,a)=>{const t=y,h=i(d("u-image"),ee),g=i(d("u-icon"),X),_=U,x=i(d("u-button"),O),j=i(d("u-popup"),q);return o(),l(j,{show:s.value,round:10,onClose:B,closeable:!0,bgColor:"#fff",zIndex:"10081",closeOnClickOverlay:!1},{default:r((()=>[c.value?(o(),l(t,{key:0,class:"flex flex-col h-[75vh]"},{default:r((()=>[u(t,{class:"head"},{default:r((()=>[u(t,{class:"text-center py-[26rpx]"},{default:r((()=>[b(v(w(S)("pay.payTitle")),1)])),_:1}),u(t,{class:"flex items-end justify-center w-full text-xl font-bold py-[20rpx]"},{default:r((()=>[u(t,{class:"text-base mr-[4rpx]"},{default:r((()=>[b(v(w(S)("currency")),1)])),_:1}),b(" "+v(w(k)(c.value.money)),1)])),_:1})])),_:1}),u(_,{"scroll-y":"true",class:"flex-1 pt-[20rpx]"},{default:r((()=>[u(t,{class:"flex text-sm px-[30rpx] py-[20rpx]"},{default:r((()=>[u(t,{class:"text-gray-500"},{default:r((()=>[b(v(w(S)("pay.orderInfo")),1)])),_:1}),u(t,{class:"text-right flex-1 pl-[30rpx] truncate"},{default:r((()=>[b(v(c.value.body),1)])),_:1})])),_:1}),u(t,{class:"mx-[30rpx] py-[10rpx] px-[30rpx] bg-white rounded-md bg-page"},{default:r((()=>[c.value.pay_type_list.length?(o(!0),C(E,{key:0},I(c.value.pay_type_list,((e,a)=>(o(),l(t,{class:"pay-item py-[18rpx] flex items-center border-0 border-b border-solid border-[#eee]",key:a,onClick:a=>m.value=e.key},{default:r((()=>[u(h,{src:w($)(e.icon),width:"50rpx",height:"50rpx"},null,8,["src"]),u(t,{class:"flex-1 px-[20rpx] text-sm font-bold"},{default:r((()=>[b(v(e.name),1)])),_:2},1024),e.key==m.value?(o(),l(g,{key:0,name:"checkbox-mark",color:"var(--primary-color)"})):p("v-if",!0)])),_:2},1032,["onClick"])))),128)):(o(),l(t,{key:1,class:"py-[20rpx] text-center text-sm text-gray-subtitle"},{default:r((()=>[b(v(w(S)("pay.notHavePayType")),1)])),_:1}))])),_:1})])),_:1}),u(t,{class:"p-[30rpx]"},{default:r((()=>[u(x,{type:"primary",loading:n.value,text:w(S)("pay.confirmPay"),shape:"circle",onClick:f},null,8,["loading","text"])])),_:1})])),_:1})):p("v-if",!0)])),_:1},8,["show"])}}}),[["__scopeId","data-v-1a623d68"]]),te=W(f({__name:"balance",setup(e){const a=L(),t=g(!1),s=()=>{t.value=!0},n=()=>{t.value=!1},m=g([20,30,50,100,200,300]),f=g(""),h=g(!1),_=g(null),U=B({is_auto_transfer:0,is_auto_verify:0,is_open:0,min:0,rate:0,transfer_type:[]}),K=g(!0);P((()=>{R("checkIsReturnAfterPayment"),T().then((e=>{for(let a in e.data)U[a]=e.data[a];K.value=!1}))}));const N=()=>{uni.$u.test.isEmpty(f.value)?j({title:S("rechargeAmountPlaceholder"),icon:"none"}):!uni.$u.test.amount(f.value)||f.value<=0?j({title:S("rechargeAmountError"),icon:"none"}):h.value||(h.value=!0,A({recharge_money:f.value}).then((e=>{var a;null==(a=_.value)||a.open(e.data.trade_type,e.data.trade_id)})).catch((()=>{h.value=!1})))},W=()=>{uni.setStorageSync("cashOutAccountType","money"),x({url:"/app/pages/member/apply_cash_out"})};return(e,g)=>{const j=i(d("u-loading-page"),M),L=y,B=V,P=i(d("u-button"),O),R=i(d("u--input"),Q),T=i(d("u-popup"),q),A=i(d("pay"),ae);return o(),C(E,null,[u(j,{loading:K.value,loadingText:""},null,8,["loading"]),F(u(L,{class:"account-info-wrap"},{default:r((()=>[u(L,{class:"account-info-head",style:c({background:"url("+w($)("static/resource/images/member/balance_bg.png")+") no-repeat 95% 30% / auto 250rpx, linear-gradient(314deg, #FE7849 0%, #FF1959 100%)"})},{default:r((()=>[u(L,{class:"name"},{default:r((()=>[b(v(w(S)("balanceInfo")),1)])),_:1}),u(L,{class:"content"},{default:r((()=>[u(L,{class:"money"},{default:r((()=>[b(v(w(a).info?w(k)((parseFloat(w(a).info.balance)+parseFloat(w(a).info.money)).toString()):"0.00"),1)])),_:1}),u(L,{class:"text"},{default:r((()=>[b(v(w(S)("accountBalance")),1)])),_:1}),u(L,{class:"money-wrap"},{default:r((()=>[u(L,{class:"money-item",onClick:g[0]||(g[0]=e=>w(x)({url:"/app/pages/member/detailed_account",param:{type:"balance"}}))},{default:r((()=>[u(L,{class:"money"},{default:r((()=>{var e;return[b(v(w(k)(null==(e=w(a).info)?void 0:e.balance)||"0.00"),1)]})),_:1}),u(L,{class:"text leading-none"},{default:r((()=>[b(v(w(S)("balance")),1)])),_:1})])),_:1}),u(L,{class:"money-item",onClick:g[1]||(g[1]=e=>w(x)({url:"/app/pages/member/detailed_account",param:{type:"money"}}))},{default:r((()=>[u(L,{class:"money"},{default:r((()=>{var e;return[b(v(w(k)(null==(e=w(a).info)?void 0:e.money)||"0.00"),1)]})),_:1}),u(L,{class:"text leading-none"},{default:r((()=>[b(v(w(S)("money")),1)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["style"]),u(L,{class:"account-info-btn"},{default:r((()=>[u(P,{type:"primary",shape:"circle",class:"btn",customStyle:{backgroundColor:"#FE4E50",color:"#fff",borderColor:"#FE4E50",width:"calc(100vw - 64rpx)"},onClick:s},{default:r((()=>[z("img",{class:"max-w-[36rpx] max-h-[36rpx] mr-1",src:w($)("static/resource/images/member/reset.png"),alt:""},null,8,["src"]),u(B,null,{default:r((()=>[b(v(w(S)("recharge")),1)])),_:1})])),_:1},8,["customStyle"]),1==U.is_open?(o(),l(P,{key:0,type:"primary",plain:!0,shape:"circle",class:"btn",customStyle:{backgroundColor:"#fff",color:"#FE4E50",borderColor:"#FE4E50",width:"calc(100vw - 64rpx)"},onClick:W},{default:r((()=>[z("img",{class:"max-w-[36rpx] max-h-[36rpx] mr-1",src:w($)("static/resource/images/member/withdraw_deposit.png"),alt:""},null,8,["src"]),u(B,null,{default:r((()=>[b(v(w(S)("cashOut")),1)])),_:1})])),_:1},8,["customStyle"])):p("v-if",!0)])),_:1}),p(" 充值 "),u(T,{show:t.value,mode:"center",round:10,onClose:n,closeable:!0},{default:r((()=>[u(L,{class:"w-80 px-3 pb-4 pt-7 box-border"},{default:r((()=>[u(R,{placeholder:w(S)("rechargeAmountPlaceholder"),modelValue:f.value,"onUpdate:modelValue":g[2]||(g[2]=e=>f.value=e),border:"bottom",type:"number",clearable:""},null,8,["placeholder","modelValue"]),u(L,{class:"top-up-wrap flex flex-wrap justify-around mt-3"},{default:r((()=>[(o(!0),C(E,null,I(m.value,((e,a)=>(o(),l(L,{key:a,class:D(["top-up-item w-22 box-border border-1 text-center rounded mt-2 py-3 px-4 border-gray-400 border-solid",{"border-primary text-primary":f.value==e}]),onClick:a=>f.value=e},{default:r((()=>[u(B,null,{default:r((()=>[b(v(e)+v(w(S)("yuan")),1)])),_:2},1024)])),_:2},1032,["class","onClick"])))),128))])),_:1}),u(L,{class:"mt-5 px-2"},{default:r((()=>[u(P,{type:"primary",shape:"circle",loading:h.value,text:w(S)("clickRecharge"),onClick:N},null,8,["loading","text"])])),_:1}),u(L,{class:"mt-[20rpx] text-center text-sm",onClick:g[3]||(g[3]=e=>w(x)({url:"/app/pages/member/recharge_record"}))},{default:r((()=>[b(v(w(S)("rechargeRecord")),1)])),_:1})])),_:1})])),_:1},8,["show"]),u(A,{ref_key:"payRef",ref:_,onClose:g[4]||(g[4]=e=>h.value=!1)},null,512)])),_:1},512),[[H,!K.value]])],64)}}}),[["__scopeId","data-v-b51df219"]]);export{te as default};
