import{d as M,r as b,n as B,q as I,N as l,h,I as v,w as m,a as $,e as s,i as V,t as y,u as r,y as H,W as R,X as j,Y as L,E as O,aa as T,a0 as z}from"./index-4dcc0234.js";/* empty css                   *//* empty css                   *//* empty css                  *//* empty css                */import"./el-form-item-4ed993c7.js";/* empty css                 */import{p as A,q as S,r as W}from"./member-97cfd04b.js";const X={class:"dialog-footer"},re=M({__name:"add-member",emits:["complete"],setup(Y,{expose:N,emit:P}){const p=b(!1),i=b(!1);let u="",c="";const f={member_id:"",nickname:"",member_no:"",init_member_no:"",mobile:"",password:"",password_copy:""},o=B({...f}),_=b(),D=I(()=>({member_no:[{required:!0,message:l("memberNoPlaceholder"),trigger:"blur"},{validator:C,trigger:"blur"}],mobile:[{required:!0,message:l("mobilePlaceholder"),trigger:"blur"},{validator:E,trigger:"blur"}],password:[{required:!0,message:l("passwordPlaceholder"),trigger:"blur"}],password_copy:[{required:!0,message:l("passwordPlaceholder"),trigger:"blur"},{validator:x,trigger:"blur"}]})),E=(d,e,a)=>{e&&!/^1[3-9]\d{9}$/.test(e)?a(new Error(l("mobileHint"))):a()},x=(d,e,a)=>{e!=o.password?a(l("doubleCipherHint")):a()},C=(d,e,a)=>{e&&!/^[0-9a-zA-Z]*$/g.test(e)?a(new Error(l("memberNoHint"))):a()},k=async()=>{await S().then(d=>{c=d.data}).catch(()=>{})},q=async d=>{if(i.value||!d)return;const e=W;await d.validate(async a=>{a&&(i.value=!0,e(o).then(w=>{i.value=!1,p.value=!1,P("complete")}).catch(()=>{i.value=!1}))})};return N({showDialog:p,setFormData:async(d=null)=>{if(i.value=!0,Object.assign(o,f),u=l("addMember"),d){u=l("updateMember");const e=await(await A(d.member_id)).data;e&&Object.keys(o).forEach(a=>{e[a]!=null&&(o[a]=e[a])})}else await k(),o.member_no=c,o.init_member_no=c;i.value=!1}}),(d,e)=>{const a=R,n=j,w=L,g=O,U=T,F=z;return h(),v(U,{modelValue:p.value,"onUpdate:modelValue":e[7]||(e[7]=t=>p.value=t),title:r(u),width:"500px","destroy-on-close":!0},{footer:m(()=>[$("span",X,[s(g,{onClick:e[5]||(e[5]=t=>p.value=!1)},{default:m(()=>[V(y(r(l)("cancel")),1)]),_:1}),s(g,{type:"primary",loading:i.value,onClick:e[6]||(e[6]=t=>q(_.value))},{default:m(()=>[V(y(r(l)("confirm")),1)]),_:1},8,["loading"])])]),default:m(()=>[H((h(),v(w,{model:o,"label-width":"90px",ref_key:"formRef",ref:_,rules:r(D),class:"page-form"},{default:m(()=>[s(n,{label:r(l)("memberNo"),prop:"member_no"},{default:m(()=>[s(a,{modelValue:o.member_no,"onUpdate:modelValue":e[0]||(e[0]=t=>o.member_no=t),clearable:"",maxlength:"20",placeholder:r(l)("memberNoPlaceholder"),class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),s(n,{label:r(l)("mobile"),prop:"mobile"},{default:m(()=>[s(a,{modelValue:o.mobile,"onUpdate:modelValue":e[1]||(e[1]=t=>o.mobile=t),clearable:"",placeholder:r(l)("mobilePlaceholder"),type:"number",class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),s(n,{label:r(l)("nickname")},{default:m(()=>[s(a,{modelValue:o.nickname,"onUpdate:modelValue":e[2]||(e[2]=t=>o.nickname=t),clearable:"",placeholder:r(l)("nickNamePlaceholder"),class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),s(n,{label:r(l)("password"),prop:"password"},{default:m(()=>[s(a,{modelValue:o.password,"onUpdate:modelValue":e[3]||(e[3]=t=>o.password=t),type:"password",placeholder:r(l)("passwordPlaceholder"),clearable:"",class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),s(n,{label:r(l)("passwordCopy"),prop:"password_copy"},{default:m(()=>[s(a,{modelValue:o.password_copy,"onUpdate:modelValue":e[4]||(e[4]=t=>o.password_copy=t),type:"password",placeholder:r(l)("passwordPlaceholder"),clearable:"",class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model","rules"])),[[F,i.value]])]),_:1},8,["modelValue","title"])}}});export{re as _};
