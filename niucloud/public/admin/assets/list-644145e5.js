import{d as K,O as W,r as k,n as X,f as Q,h as i,c as g,e as o,w as r,a as d,t as p,u as l,i as m,N as a,F as V,G as C,I as v,y as Z,R as ee,B as ae,aS as $,K as te,a8 as le,E as oe,W as se,X as re,as as ne,aE as ie,cJ as pe,Y as de,_ as ue,ah as me,av as ce,aj as _e,a4 as fe,$ as he}from"./index-30b146d4.js";/* empty css                   *//* empty css                      *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                        *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                *//* empty css                     *//* empty css                       *//* empty css                  */import{_ as ge}from"./site_logo-f276251b.js";import{i as ve,s as be,t as ye,v as xe,w as ke,x as we}from"./site-6277ee8c.js";import{_ as Pe}from"./edit-site.vue_vue_type_script_setup_true_lang-1f8db4d8.js";import{g as Ve}from"./addon-afba1560.js";import{_ as Ce}from"./_plugin-vue_export-helper-c27b6911.js";/* empty css                   *//* empty css                  *//* empty css                */import"./member_head-a897263d.js";import"./user-9f5ed5cd.js";const Se={class:"main-container"},De={class:"flex justify-between items-center"},Ee={class:"text-page-title"},Ie={class:"mt-[20px]"},Te={class:"flex items-center"},Le=["src"],Fe={key:1,class:"w-[50px] h-[50px] mr-[10px]",src:ge,alt:""},$e={class:"flex flex flex-col"},Ue={class:"flex items-center"},Be={class:"flex flex flex-col"},Ne={key:0},Ye={key:1},je={class:"mt-[16px] flex justify-end"},ze=K({__name:"list",setup(Me){const S=W(),U=S.meta.title,b=k({all:[]}),D=k([]),s=X({page:1,limit:10,total:0,loading:!0,data:[],searchParam:{keywords:"",group_id:"",app:"all",status:"",site_domain:"",create_time:[],expire_time:[]}});s.searchParam.status=S.query.id||"",(async()=>{const n=await(await ve({})).data;b.value.all=n,n.forEach((t,u)=>{b.value[t.app]||(b.value[t.app]=[]),b.value[t.app].push(t)})})(),(async()=>{D.value=await(await be()).data})();const E=k(),B=n=>{n&&(n.resetFields(),_())},N=()=>{s.searchParam.group_id=""},I=k([]);Ve().then(({data:n})=>{I.value=n}).catch();const _=(n=1)=>{s.loading=!0,s.page=n,s.searchParam.app=s.searchParam.app=="all"?"":s.searchParam.app,ye({page:s.page,limit:s.limit,...s.searchParam}).then(t=>{s.loading=!1,s.data=t.data.data,s.total=t.data.total}).catch(()=>{s.loading=!1})};_();const Y=Q(),x=k(null),j=n=>{x.value.setFormData(),x.value.showDialog=!0},z=n=>{Y.push({path:"/admin/site/info",query:{id:n.site_id}})},M=n=>{x.value.setFormData(n),x.value.showDialog=!0},R=()=>{window.localStorage.setItem("site.token",$()),window.localStorage.setItem("site.comparisonTokenStorage",$()),window.localStorage.setItem("site.userinfo",JSON.stringify(te().userInfo)),window.open(`${location.origin}/home/index`)},G=(n,t)=>{n==1&&xe({site_id:t}).then(u=>{_()}),n==3&&ke({site_id:t}).then(u=>{_()})},H=n=>{le.confirm(a("siteDeleteTips"),a("warning"),{confirmButtonText:a("confirm"),cancelButtonText:a("cancel"),type:"warning"}).then(()=>{we(n.site_id).then(t=>{_()}).catch(()=>{})})};return(n,t)=>{const u=oe,T=se,h=re,y=ne,w=ie,L=pe,O=de,F=ue,f=me,P=ce,q=_e,A=fe,J=he;return i(),g("div",Se,[o(F,{class:"box-card !border-none",shadow:"never"},{default:r(()=>[d("div",De,[d("span",Ee,p(l(U)),1),d("div",null,[o(u,{type:"primary",class:"w-[100px]",onClick:j},{default:r(()=>[m(p(l(a)("addSite")),1)]),_:1}),o(u,{type:"default",class:"w-[100px]",onClick:R},{default:r(()=>[m(p(l(a)("toSite")),1)]),_:1})])]),o(F,{class:"box-card !border-none my-[10px] table-search-wrap",shadow:"never"},{default:r(()=>[o(O,{inline:!0,model:s.searchParam,ref_key:"searchFormRef",ref:E},{default:r(()=>[o(h,{label:l(a)("siteName"),prop:"keywords"},{default:r(()=>[o(T,{modelValue:s.searchParam.keywords,"onUpdate:modelValue":t[0]||(t[0]=e=>s.searchParam.keywords=e),placeholder:l(a)("siteNamePlaceholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),o(h,{label:l(a)("siteDomain"),prop:"site_domain"},{default:r(()=>[o(T,{modelValue:s.searchParam.site_domain,"onUpdate:modelValue":t[1]||(t[1]=e=>s.searchParam.site_domain=e),placeholder:l(a)("siteDomainPlaceholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),o(h,{label:l(a)("app"),prop:"app_id"},{default:r(()=>[o(w,{modelValue:s.searchParam.app,"onUpdate:modelValue":t[2]||(t[2]=e=>s.searchParam.app=e),clearable:"",onChange:N,placeholder:l(a)("appIdPlaceholder"),class:"input-width"},{default:r(()=>[o(y,{label:l(a)("selectPlaceholder"),value:"all"},null,8,["label"]),(i(!0),g(V,null,C(Object.values(I.value),(e,c)=>(i(),v(y,{label:e.title,value:e.key,key:c},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),o(h,{label:l(a)("groupId"),prop:"group_id"},{default:r(()=>[o(w,{modelValue:s.searchParam.group_id,"onUpdate:modelValue":t[3]||(t[3]=e=>s.searchParam.group_id=e),clearable:"",placeholder:l(a)("groupIdPlaceholder"),class:"input-width"},{default:r(()=>[o(y,{label:l(a)("selectPlaceholder"),value:""},null,8,["label"]),(i(!0),g(V,null,C(b.value.all,(e,c)=>(i(),v(y,{label:e.group_name,value:e.group_id,key:c},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),o(h,{label:l(a)("status"),prop:"status"},{default:r(()=>[o(w,{modelValue:s.searchParam.status,"onUpdate:modelValue":t[4]||(t[4]=e=>s.searchParam.status=e),clearable:"",placeholder:l(a)("groupIdPlaceholder"),class:"input-width"},{default:r(()=>[o(y,{label:l(a)("selectPlaceholder"),value:""},null,8,["label"]),(i(!0),g(V,null,C(D.value,(e,c)=>(i(),v(y,{label:e,value:c,key:c},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),o(h,{label:l(a)("createTime"),prop:"create_time"},{default:r(()=>[o(L,{modelValue:s.searchParam.create_time,"onUpdate:modelValue":t[5]||(t[5]=e=>s.searchParam.create_time=e),type:"datetimerange","value-format":"YYYY-MM-DD HH:mm:ss","start-placeholder":l(a)("startDate"),"end-placeholder":l(a)("endDate")},null,8,["modelValue","start-placeholder","end-placeholder"])]),_:1},8,["label"]),o(h,{label:l(a)("expireTime"),prop:"expire_time"},{default:r(()=>[o(L,{modelValue:s.searchParam.expire_time,"onUpdate:modelValue":t[6]||(t[6]=e=>s.searchParam.expire_time=e),type:"datetimerange","value-format":"YYYY-MM-DD HH:mm:ss","start-placeholder":l(a)("startDate"),"end-placeholder":l(a)("endDate")},null,8,["modelValue","start-placeholder","end-placeholder"])]),_:1},8,["label"]),o(h,null,{default:r(()=>[o(u,{type:"primary",onClick:t[7]||(t[7]=e=>_())},{default:r(()=>[m(p(l(a)("search")),1)]),_:1}),o(u,{onClick:t[8]||(t[8]=e=>B(E.value))},{default:r(()=>[m(p(l(a)("reset")),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),d("div",Ie,[Z((i(),v(q,{data:s.data,size:"large"},{empty:r(()=>[d("span",null,p(s.loading?"":l(a)("emptyData")),1)]),default:r(()=>[o(f,{prop:"site_id",label:l(a)("siteId"),width:"100","show-overflow-tooltip":!0},null,8,["label"]),o(f,{label:l(a)("siteInfo"),width:"300",align:"left"},{default:r(({row:e})=>[d("div",Te,[e.logo?(i(),g("img",{key:0,class:"w-[50px] h-[50px] mr-[10px]",src:l(ee)(e.logo),alt:""},null,8,Le)):(i(),g("img",Fe)),d("div",$e,[d("span",null,p(e.site_name||""),1)])])]),_:1},8,["label"]),o(f,{label:l(a)("manager"),width:"150",align:"left"},{default:r(({row:e})=>[d("div",Ue,[d("div",Be,[d("span",null,p(e.admin.username||""),1)])])]),_:1},8,["label"]),o(f,{prop:"group_name",label:l(a)("groupId"),width:"150","show-overflow-tooltip":!0},null,8,["label"]),o(f,{prop:"site_domain",label:l(a)("siteDomain"),width:"150","show-overflow-tooltip":!0},null,8,["label"]),o(f,{prop:"create_time",label:l(a)("createTime"),width:"250","show-overflow-tooltip":!0},null,8,["label"]),o(f,{prop:"expire_time",label:l(a)("expireTime"),width:"250","show-overflow-tooltip":!0},{default:r(({row:e})=>[e.expire_time==0?(i(),g("div",Ne,"永久")):(i(),g("div",Ye,p(e.expire_time),1))]),_:1},8,["label"]),o(f,{label:l(a)("status"),width:"100",align:"center"},{default:r(({row:e})=>[e.status==1?(i(),v(P,{key:0,class:"ml-2",type:"success"},{default:r(()=>[m(p(e.status_name),1)]),_:2},1024)):e.status==3?(i(),v(P,{key:1,class:"ml-2",type:"error"},{default:r(()=>[m(p(e.status_name),1)]),_:2},1024)):(i(),v(P,{key:2,class:"ml-2",type:"error"},{default:r(()=>[m(p(e.status_name),1)]),_:2},1024))]),_:1},8,["label"]),o(f,{label:l(a)("operation"),"min-width":"250",align:"right",fixed:"right"},{default:r(({row:e})=>[e.status==1||e.status==3?(i(),v(u,{key:0,type:"primary",link:"",onClick:c=>G(e.status,e.site_id)},{default:r(()=>[m(p(e.status==1?l(a)("closeTxt"):l(a)("openTxt")),1)]),_:2},1032,["onClick"])):ae("",!0),o(u,{type:"primary",link:"",onClick:c=>M(e)},{default:r(()=>[m(p(l(a)("edit")),1)]),_:2},1032,["onClick"]),o(u,{type:"primary",link:"",onClick:c=>H(e)},{default:r(()=>[m(p(l(a)("delete")),1)]),_:2},1032,["onClick"]),o(u,{type:"primary",link:"",onClick:c=>z(e)},{default:r(()=>[m(p(l(a)("info")),1)]),_:2},1032,["onClick"])]),_:1},8,["label"])]),_:1},8,["data"])),[[J,s.loading]]),d("div",je,[o(A,{"current-page":s.page,"onUpdate:current-page":t[9]||(t[9]=e=>s.page=e),"page-size":s.limit,"onUpdate:page-size":t[10]||(t[10]=e=>s.limit=e),layout:"total, sizes, prev, pager, next, jumper",total:s.total,onSizeChange:t[11]||(t[11]=e=>_()),onCurrentChange:_},null,8,["current-page","page-size","total"])])])]),_:1}),o(Pe,{ref_key:"addSiteDialog",ref:x,onComplete:t[12]||(t[12]=e=>_())},null,512)])}}});const ha=Ce(ze,[["__scopeId","data-v-a81b9fe2"]]);export{ha as default};
