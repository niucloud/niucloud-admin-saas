import{d as T,r as V,cK as A,cU as me,cV as fe,q as I,h as d,c as y,e as t,w as o,a as n,t as $,u as e,N as h,aR as J,aL as he,cA as xe,ap as H,cW as ae,cX as Q,K,n as ee,cS as ve,i as j,af as ge,aI as we,aT as ye,aU as be,aV as ke,W as $e,X as Se,Y as Ve,E as le,aa as re,p as Ee,g as Ce,f as O,U as R,cY as Ie,cM as ce,v as De,I as k,G as N,F as C,B as P,y as te,co as oe,A as B,cZ as Re,c_ as Te,an as Ue,ao as Me,Q as X,O as Y,c$ as Pe,ai as Be,d0 as de,ae as se,s as ie,R as Fe,d1 as Le,cF as ue,V as We,d2 as je,Z as pe,cT as Ae,cN as Ne,a_ as qe,J as ze,a0 as He}from"./index-30b146d4.js";/* empty css                     *//* empty css                   *//* empty css                  *//* empty css               */import{_ as q}from"./index.vue_vue_type_script_setup_true_lang-d070c8c8.js";/* empty css                  *//* empty css                        *//* empty css                 *//* empty css                  */import{_ as Z}from"./_plugin-vue_export-helper-c27b6911.js";/* empty css                     *//* empty css                         *//* empty css                  *//* empty css                  */import{s as Ke}from"./personal-1c97934d.js";/* empty css                        */import"./el-tooltip-4ed993c7.js";/* empty css                 *//* empty css                        */import{_ as Oe}from"./icon-addon-339e16d0.js";/* empty css                */const Xe={class:"flex"},Ye={class:"setting-item flex items-center justify-between mb-[10px]"},Ze={class:"title text-base text-tx-secondary"},Ge={class:""},Je={class:"setting-item flex items-center justify-between mb-[10px]"},Qe={class:"title text-base text-tx-secondary"},et={class:""},tt=T({__name:"layout-setting",setup(u){const x=V(!1),f=A(),p=me(),g=fe(p),s=I({get(){return f.dark},set(a){f.setTheme("dark",a),g(a),Q(f.theme,f.dark?"dark":"light")}}),b=I({get(){return f.theme},set(a){f.setTheme("theme",a),Q(f.theme,f.dark?"dark":"light")}});return(a,r)=>{const w=q,v=he,c=xe,l=H,i=ae;return d(),y("div",Xe,[t(w,{name:"element-Setting",onClick:r[0]||(r[0]=m=>x.value=!0)}),t(i,{modelValue:x.value,"onUpdate:modelValue":r[3]||(r[3]=m=>x.value=m),title:e(h)("layout.layoutSetting"),size:"300px"},{default:o(()=>[t(l,null,{default:o(()=>[n("div",Ye,[n("div",Ze,$(e(h)("layout.darkMode")),1),n("div",Ge,[t(v,{modelValue:e(s),"onUpdate:modelValue":r[1]||(r[1]=m=>J(s)?s.value=m:null),"active-value":!0,"inactive-value":!1},null,8,["modelValue"])])]),n("div",Je,[n("div",Qe,$(e(h)("layout.themeColor")),1),n("div",et,[t(c,{modelValue:e(b),"onUpdate:modelValue":r[2]||(r[2]=m=>J(b)?b.value=m:null)},null,8,["modelValue"])])])]),_:1})]),_:1},8,["modelValue","title"])])}}});const ot=Z(tt,[["__scopeId","data-v-ddd4e4e2"]]),z=u=>(Ee("data-v-b07cf2e9"),u=u(),Ce(),u),st={class:"userinfo flex h-full items-center"},nt={class:"user-name pl-[8px]"},at=z(()=>n("div",{class:"flex items-center leading-[1] py-[5px]"},[n("span",{class:"iconfont iconqiehuan ml-[4px] !text-[14px] mr-[10px]"}),n("span",{class:"text-[14px]"},"切换站点")],-1)),lt=z(()=>n("div",{class:"flex items-center leading-[1] py-[5px]"},[n("span",{class:"iconfont iconshezhi1 ml-[4px] !text-[14px] mr-[10px]"}),n("span",{class:"text-[14px]"},"账号设置")],-1)),rt=z(()=>n("div",{class:"flex items-center leading-[1] py-[5px]"},[n("span",{class:"iconfont iconxiugai ml-[4px] !text-[14px] mr-[10px]"}),n("span",{class:"text-[14px]"},"修改密码")],-1)),ct=z(()=>n("div",{class:"flex items-center leading-[1] py-[2px]"},[n("span",{class:"iconfont icontuichudenglu !text-[21px] mr-[8px]"}),n("span",{class:"text-[14px]"},"退出登录")],-1)),dt={class:"form-tip"},it={class:"dialog-footer"},ut=T({__name:"user-info",setup(u){const x=K(),f=O(),p=v=>{switch(v){case"logout":x.logout();break}},g=v=>{f.push(v)},s=V(!1),b=V(),a=ee({original_password:"",password:"",password_copy:""}),r=ee({original_password:[{required:!0,message:h("originalPasswordPlaceholder"),trigger:"blur"}],password:[{required:!0,message:h("passwordPlaceholder"),trigger:"blur"}],password_copy:[{required:!0,message:h("passwordPlaceholder"),trigger:"blur"}]}),w=v=>{v&&v.validate(c=>{if(c){let l="";if(a.password&&!a.original_password&&(l=h("originalPasswordHint")),a.password&&a.original_password&&!a.password_copy&&(l=h("newPasswordHint")),a.password&&a.original_password&&a.password_copy&&a.password!=a.password_copy&&(l=h("doubleCipherHint")),l){ge({type:"error",message:l});return}Ke(a).then(i=>{s.value=!1})}else return!1})};return(v,c)=>{const l=we,i=q,m=ye,F=be,L=ke,D=$e,E=Se,U=Ve,M=le,W=re;return d(),y("div",null,[t(L,{onCommand:p,tabindex:1},{dropdown:o(()=>[t(F,null,{default:o(()=>[t(m,{onClick:c[0]||(c[0]=_=>g("/home/index"))},{default:o(()=>[at]),_:1}),t(m,{onClick:c[1]||(c[1]=_=>g("/user/center"))},{default:o(()=>[lt]),_:1}),t(m,{onClick:c[2]||(c[2]=_=>s.value=!0)},{default:o(()=>[rt]),_:1}),t(m,{command:"logout"},{default:o(()=>[ct]),_:1})]),_:1})]),default:o(()=>[n("div",st,[t(l,{size:25,icon:e(ve)},null,8,["icon"]),n("div",nt,$(e(x).userInfo.username),1),t(i,{name:"element-ArrowDown",class:"ml-[5px]"})])]),_:1}),t(W,{modelValue:s.value,"onUpdate:modelValue":c[8]||(c[8]=_=>s.value=_),width:"450px",title:"修改密码","before-close":v.handleClose},{footer:o(()=>[n("span",it,[t(M,{onClick:c[6]||(c[6]=_=>s.value=!1)},{default:o(()=>[j($(e(h)("cancel")),1)]),_:1}),t(M,{type:"primary",onClick:c[7]||(c[7]=_=>w(b.value))},{default:o(()=>[j($(e(h)("save")),1)]),_:1})])]),default:o(()=>[n("div",null,[t(U,{model:a,"label-width":"90px",ref_key:"formRef",ref:b,rules:r,class:"page-form"},{default:o(()=>[t(E,{label:e(h)("originalPassword"),prop:"original_password"},{default:o(()=>[t(D,{modelValue:a.original_password,"onUpdate:modelValue":c[3]||(c[3]=_=>a.original_password=_),type:"password",placeholder:e(h)("originalPasswordPlaceholder"),clearable:"",class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(E,{label:e(h)("newPassword"),prop:"password"},{default:o(()=>[t(D,{modelValue:a.password,"onUpdate:modelValue":c[4]||(c[4]=_=>a.password=_),type:"password",placeholder:e(h)("passwordPlaceholder"),clearable:"",class:"input-width"},null,8,["modelValue","placeholder"]),n("div",dt,$(e(h)("passwordTip")),1)]),_:1},8,["label"]),t(E,{label:e(h)("passwordCopy"),prop:"password_copy"},{default:o(()=>[t(D,{modelValue:a.password_copy,"onUpdate:modelValue":c[5]||(c[5]=_=>a.password_copy=_),type:"password",placeholder:e(h)("passwordPlaceholder"),clearable:"",class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model","rules"])])]),_:1},8,["modelValue","before-close"])])}}});const pt=Z(ut,[["__scopeId","data-v-b07cf2e9"]]),_t={class:"left-panel h-full flex items-center"},mt={class:"flex items-center h-full pl-[10px] hidden-xs-only"},ft={class:"right-panel h-full flex items-center justify-end"},ht=["title"],xt={class:"navbar-item flex items-center h-full cursor-pointer"},vt={class:"navbar-item flex items-center h-full cursor-pointer"},gt={class:"dialog-footer"},wt=T({__name:"index",setup(u){const x=R.get("app_type");Ie();const f=A(),p=ce(),g=Y(),s=V(window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth),b=I(()=>f.dark),a=V(!1),r=V(""),w=V("");R.get("comparisonTokenStorage")&&(r.value=R.get("comparisonTokenStorage")),R.get("comparisonSiteIdStorage")&&(w.value=R.get("comparisonSiteIdStorage")),document.addEventListener("visibilitychange",i=>{document.visibilityState==="visible"&&(w.value!=R.get("siteId")||r.value!=R.get("token"))&&(a.value=!0)});const v=()=>{a.value=!1,location.href=`${location.origin}/site/`};De(()=>{window.onresize=()=>(()=>{s.value=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth})()});const c=()=>{p.routeRefreshTag&&p.refreshRouterView()},l=I(()=>{const i=g.matched.filter(m=>m.meta.title);return i[0]&&i[0].path=="/"&&i.splice(0,1),i});return(i,m)=>{const F=q,L=Re,D=Te,E=Ue,U=Me,M=le,W=re,_=X;return d(),k(_,{class:B(["h-full px-[10px]",{"layout-header border-b border-color":!e(b)}])},{default:o(()=>[t(U,{class:"w-100 h-full w-full"},{default:o(()=>[t(E,{span:12},{default:o(()=>[n("div",_t,[n("div",{class:"navbar-item flex items-center h-full cursor-pointer",onClick:c},[t(F,{name:"element-Refresh"})]),n("div",mt,[t(D,{separator:"/"},{default:o(()=>[(d(!0),y(C,null,N(e(l),(S,G)=>(d(),k(L,{key:G},{default:o(()=>[j($(S.meta.title),1)]),_:2},1024))),128))]),_:1})])])]),_:1}),t(E,{span:12},{default:o(()=>[n("div",ft,[e(x)=="site"?(d(),y("i",{key:0,class:"iconfont iconlingdang-xianxing cursor-pointer px-[8px]",title:e(h)("newInfo")},null,8,ht)):P("",!0),n("div",xt,[t(ot)]),n("div",vt,[t(pt)])])]),_:1})]),_:1}),te(n("input",{type:"hidden","onUpdate:modelValue":m[0]||(m[0]=S=>r.value=S)},null,512),[[oe,r.value]]),te(n("input",{type:"hidden","onUpdate:modelValue":m[1]||(m[1]=S=>w.value=S)},null,512),[[oe,w.value]]),t(W,{modelValue:a.value,"onUpdate:modelValue":m[2]||(m[2]=S=>a.value=S),title:e(h)("layout.detectionLoginTip"),width:"30%","close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1},{footer:o(()=>[n("span",gt,[t(M,{onClick:v},{default:o(()=>[j($(e(h)("layout.detectionLoginOperation")),1)]),_:1})])]),default:o(()=>[n("span",null,$(e(h)("layout.detectionLoginContent")),1)]),_:1},8,["modelValue","title"])]),_:1},8,["class"])}}});const yt=Z(wt,[["__scopeId","data-v-85bde98f"]]);const bt={class:B(["ml-[10px]"])},kt={key:2,class:"!border-0 !border-t-[1px] border-solid mx-[25px] bg-[#f7f7f7] my-[5px]"},_e=T({__name:"menu-item",props:{routes:{type:Object,required:!0}},setup(u){const x=u,f=O(),g=K().siteInfo,s=I(()=>x.routes.meta),b=I(()=>{const a={};return g==null||g.apps.forEach(r=>{a[r.key]=r}),g==null||g.site_addons.forEach(r=>{a[r.key]=r}),a});return(a,r)=>{const w=Pe,v=Be,c=de;return e(s).show?(d(),y(C,{key:0},[u.routes.children?(d(),k(w,{key:0,index:String(u.routes.name)},{title:o(()=>[n("span",bt,$(e(s).title),1)]),default:o(()=>[(d(!0),y(C,null,N(u.routes.children,(l,i)=>(d(),k(_e,{routes:l,key:i},null,8,["routes"]))),128))]),_:1},8,["index"])):(d(),y(C,{key:1},[e(s).addon&&e(s).parent_route&&e(s).parent_route.addon==""?(d(),k(c,{key:0,index:String(u.routes.name),onClick:r[0]||(r[0]=l=>e(f).push({name:u.routes.name}))},{title:o(()=>[t(v,{placement:"right",effect:"light"},{content:o(()=>[j(" 该功能仅限"+$(e(b)[e(s).addon].title)+"使用 ",1)]),default:o(()=>[n("span",{class:B([{"text-[15px]":u.routes.meta.class==1},{"text-[14px]":u.routes.meta.class!=1},{"ml-[10px]":u.routes.meta.class==2,"ml-[15px]":u.routes.meta.class==3}])},$(e(s).title),3)]),_:1})]),_:1},8,["index"])):(d(),k(c,{key:1,index:String(u.routes.name),onClick:r[1]||(r[1]=l=>e(f).push({name:u.routes.name}))},{title:o(()=>[n("span",{class:B([{"text-[15px]":u.routes.meta.class==1},{"text-[14px]":u.routes.meta.class!=1},{"ml-[10px]":u.routes.meta.class==2,"ml-[15px]":u.routes.meta.class==3}])},$(e(s).title),3)]),_:1},8,["index"]))],64)),u.routes.is_border?(d(),y("div",kt)):P("",!0)],64)):P("",!0)}}});const $t={class:"w-[124px] px-[8px] bg-[#282c34] h-screen one-menu"},St={key:0,class:"logo flex items-center m-auto h-[64px]"},Vt=["src"],Et={key:1,class:"max-h-[40px] max-w-[40px] rounded-full",src:Oe,alt:""},Ct={key:1,class:"logo flex items-center justify-center h-[64px]"},It=n("i",{class:"text-3xl iconfont iconyunkongjian"},null,-1),Dt=[It],Rt={key:0,class:"w-[16px] h-[16px] relative flex justify-center"},Tt={key:1,class:"w-[16px] h-[16px]"},Ut={class:"relative flex-1 w-0"},Mt={class:"ml-[10px] w-full truncate"},Pt=n("div",{class:"h-[48px]"},null,-1),Bt={class:"w-[140px] h-[64px] flex items-center justify-center text-[16px] border-0 border-b-[1px] border-solid border-[#eee]"},Ft=n("div",{class:"h-[48px]"},null,-1),ne=T({__name:"side",setup(u){const x=A(),f=K(),p=Y(),g=O(),s=f.siteInfo,b=f.routers,a=f.addonIndexRoute,r=V([]),w=V([]),v={};if(b.forEach(l=>{l.original_name=l.name,l.meta.addon==""?(l.children&&l.children.length&&(l.name=se(l.children)),r.value.push(l)):l.meta.addon!=""&&(s==null?void 0:s.apps.length)<=1&&(s==null?void 0:s.apps[0].key)==l.meta.addon?l.children?(l.children.forEach(i=>{i.original_name=i.name,i.children&&i.children.length&&(i.name=se(i.children))}),r.value.unshift(...l.children)):r.value.unshift(l):v[l.meta.addon]=l}),(s==null?void 0:s.apps.length)>1){const l=[];s==null||s.apps.forEach(i=>{var m;l.push({path:v[i.key]?v[i.key].path:"",meta:{icon:((m=v[i.key])==null?void 0:m.meta.icon)||"element-Setting",addon:i.key,title:i.title,app:i.app,show:!0},original_name:i.key,name:a[i.key]})}),r.value.unshift(...l)}const c=V(p.matched[1].name);return ie(p,()=>{(s==null?void 0:s.apps.length)>1?(w.value=p.matched[1].children,c.value=p.matched[1].name):p.meta.addon==""?(c.value=p.matched[1].name,w.value=p.matched[1].children??[]):p.meta.addon&&p.meta.addon!=(s==null?void 0:s.apps[0].key)?(c.value="/site/app",w.value=p.matched[1].children??[]):(c.value=p.matched[2].name,w.value=p.matched[2].children??[])},{immediate:!0}),(l,i)=>{const m=ue,F=We,L=q,D=de,E=je,U=H,M=pe,W=X;return d(),k(W,{class:"w-100 h-screen"},{default:o(()=>[t(M,{class:"p-0 flex"},{default:o(()=>[n("div",$t,[t(m,{class:"logo-wrap"},{default:o(()=>[e(x).menuIsCollapse?(d(),y("div",Ct,Dt)):(d(),y("div",St,[e(s).logo?(d(),y("img",{key:0,class:"max-h-[40px] max-w-[40px] rounded-full",src:e(Fe)(e(s).logo),alt:""},null,8,Vt)):(d(),y("img",Et))]))]),_:1}),t(U,{class:"h-[calc( 100vh - 64px )]"},{default:o(()=>[t(E,{"default-active":c.value,router:!0,class:"aside-menu","unique-opened":"true",collapse:e(x).menuIsCollapse},{default:o(()=>[(d(!0),y(C,null,N(r.value,(_,S)=>(d(),y(C,{key:S},[_.meta.show?(d(),k(D,{key:0,index:_.original_name,onClick:G=>e(g).push({name:_.name})},{title:o(()=>[n("div",Ut,[n("span",Mt,$(_.meta.short_title||_.meta.title),1)])]),default:o(()=>[_.meta.icon?(d(),y("div",Rt,[e(Le)(_.meta.icon)?(d(),k(F,{key:0,class:"w-[16px] h-[16px] rounded-[50%] overflow-hidden",src:_.meta.icon,fit:"fill"},null,8,["src"])):(d(),k(L,{key:1,name:_.meta.icon,class:"absolute top-[50%] -translate-y-[50%]"},null,8,["name"]))])):(d(),y("div",Tt))]),_:2},1032,["index","onClick"])):P("",!0)],64))),128))]),_:1},8,["default-active","collapse"]),Pt]),_:1})]),w.value.length?(d(),k(U,{key:0,class:"two-menu w-[140px]"},{default:o(()=>[n("div",Bt,$(e(p).matched[1].meta.title),1),t(E,{"default-active":e(p).name,router:!0,class:"aside-menu",collapse:e(x).menuIsCollapse},{default:o(()=>[(d(!0),y(C,null,N(w.value,(_,S)=>(d(),k(_e,{routes:_,key:S},null,8,["routes"]))),128))]),_:1},8,["default-active","collapse"]),Ft]),_:1})):P("",!0)]),_:1})]),_:1})}}});const Lt=T({__name:"index",setup(u){const x=A(),f=I(()=>x.dark),p=Y();return ie(p,()=>{x.$patch(g=>{g.menuDrawer=!1})}),(g,s)=>{const b=Ae,a=ae;return d(),y(C,null,[t(b,{class:B(["h-screen layout-aside w-auto",{bright:!e(f)}])},{default:o(()=>[t(ne,{class:"hidden-xs-only"})]),_:1},8,["class"]),t(a,{modelValue:e(x).menuDrawer,"onUpdate:modelValue":s[0]||(s[0]=r=>e(x).menuDrawer=r),direction:"ltr","with-header":!1,"custom-class":"aside-drawer",size:"210px"},{default:o(()=>[t(ne)]),_:1},8,["modelValue"])],64)}}});const Wt={class:"common-layout min-w-[1200px]"},jt={class:"p-[10px]"},io=T({__name:"index",setup(u){const x=ce(),f=Ne(),p=A(),g=I(()=>p.dark);return(s,b)=>{const a=ue,r=He("router-view"),w=H,v=pe,c=X;return d(),y("div",Wt,[t(c,{class:"w-100 h-screen"},{default:o(()=>[t(Lt),t(c,null,{default:o(()=>[t(a,null,{default:o(()=>[t(yt)]),_:1}),t(v,{class:B(["main-wrap h-full p-0",{"bg-page":e(g)}])},{default:o(()=>[t(w,null,{default:o(()=>[n("div",jt,[e(x).routeRefreshTag?(d(),k(r,{key:0},{default:o(({Component:l,route:i})=>[(d(),k(qe,{include:e(f).tabNames},[(d(),k(ze(l),{key:i.fullPath}))],1032,["include"]))]),_:1})):P("",!0)])]),_:1})]),_:1},8,["class"])]),_:1})]),_:1})])}}});export{io as default};
