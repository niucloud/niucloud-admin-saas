import{d as _e,r as _,R as ue,o as fe,V as S,e as u,f as $,y as o,x as e,g as i,B as d,u as l,A as f,F as he,z as xe,v as y,Q as M,H as ve,bl as be,bm as ge}from"./base-9962c822.js";/* empty css                   *//* empty css                   *//* empty css                     *//* empty css                *//* empty css                    *//* empty css                *//* empty css                    *//* empty css                      *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                  *//* empty css                        */import"./el-tooltip-4ed993c7.js";/* empty css                *//* empty css                */import"./el-form-item-4ed993c7.js";/* empty css                *//* empty css                  */import{t}from"./index-6e46fb55.js";import{r as ye,d as ke,s as we,p as Ee,q as Ce,t as Te}from"./tools-35c22ad1.js";import{f as Fe}from"./storage-0874d153.js";import{_ as Ve}from"./add-table.vue_vue_type_script_setup_true_lang-92001c34.js";import{u as De,b as Ne}from"./vue-router-d7e63612.js";import{E as q}from"./index-35c5a824.js";import{a as Se}from"./index-2cabf788.js";import{E as Pe}from"./index-7ab57426.js";import{a as Ae,E as Be}from"./index-f0623d20.js";import{a as Le,E as $e}from"./index-da093955.js";import{a as je,E as ze}from"./index-22970d5d.js";import{a as Ie,E as Ge}from"./index-7c833df7.js";import{E as Re}from"./index-19251c17.js";import{E as Ue}from"./index-189f302e.js";import{a as Oe,E as Me}from"./index-4906bae6.js";import{E as qe}from"./index-26709bbd.js";import{E as He}from"./index-57446bef.js";import{E as Ke}from"./index-bb86585c.js";import{E as Qe}from"./index-2ee99ba1.js";import{E as Je}from"./index-e2acd187.js";import{v as We}from"./directive-f75d4a7d.js";import{_ as Xe}from"./_plugin-vue_export-helper-c27b6911.js";import"./pinia-a9fc3924.js";import"./index-38fee8c5.js";import"./system-1108e5c1.js";import"./index-5c4817f4.js";import"./index-c4e33d8d.js";import"./index-91fda20f.js";import"./error-78e43d3e.js";import"./scroll-d85c8f38.js";import"./vnode-562dae50.js";import"./index-c98e204a.js";import"./aria-adfa05c5.js";import"./focus-trap-d0fc8554.js";import"./validator-00f31ee7.js";import"./index-df16e899.js";import"./index-71b7d8f4.js";import"./typescript-defaf979.js";import"./index-1370ab44.js";import"./index-6b77b11a.js";import"./event-9519ab40.js";import"./strings-66191554.js";import"./index-ab38878f.js";import"./index-fb8b7863.js";import"./isEqual-240b5e0a.js";import"./_Uint8Array-c92ffa25.js";import"./debounce-9674000c.js";import"./index-6edd46fb.js";import"./_initCloneObject-41dd9efb.js";import"./index-ec548bfb.js";import"./index-65bc84a3.js";import"./flatten-940b9f2c.js";import"./_isIterateeCall-909b9c9e.js";import"./index-c25955fe.js";const h=E=>(be("data-v-3d8d8561"),E=E(),ge(),E),Ye={class:"main-container"},Ze={class:"flex justify-between items-center mb-[10px]"},et={class:"text-[20px]"},tt=h(()=>i("div",{class:"w-[24px] h-[24px] text-[#fff] bg-[#778aa3] text-center leading-[24px] rounded-full"}," 1",-1)),ot={class:"text-[14px] text-[#303133] font-[700]"},at={class:"text-[#999]"},lt={class:"mt-[20px] mb-[40px] h-[32px]"},nt=h(()=>i("div",{class:"w-[24px] h-[24px] text-[#fff] bg-[#778aa3] text-center leading-[24px] rounded-full"}," 2",-1)),it={class:"text-[14px] text-[#303133] font-[700]"},st={class:"text-[#999]"},rt=h(()=>i("div",{class:"mt-[20px] mb-[40px] h-[32px]"},null,-1)),dt=h(()=>i("div",{class:"w-[24px] h-[24px] text-[#fff] bg-[#778aa3] text-center leading-[24px] rounded-full"}," 3",-1)),pt={class:"text-[14px] text-[#303133] font-[700]"},ct={class:"text-[#999]"},mt=h(()=>i("div",{class:"mt-[20px] mb-[40px] h-[32px]"},null,-1)),_t=h(()=>i("div",{class:"w-[24px] h-[24px] text-[#fff] bg-[#778aa3] text-center leading-[24px] rounded-full"}," 4",-1)),ut={class:"text-[14px] text-[#303133] font-[700]"},ft={class:"text-[#999]"},ht=h(()=>i("div",{class:"mt-[20px] mb-[40px] h-[32px]"},null,-1)),xt=h(()=>i("div",{class:"w-[24px] h-[24px] text-[#fff] bg-[#778aa3] text-center leading-[24px] rounded-full"}," 5",-1)),vt={class:"text-[14px] text-[#303133] font-[700]"},bt={class:"text-[#999]"},gt=h(()=>i("div",{class:"mt-[20px] mb-[40px] h-[32px]"},null,-1)),yt={class:"mt-[16px] flex justify-end"},kt={class:"flex h-[50vh]"},wt={class:"flex items-center"},Et={class:"pl-[5px]"},Ct={class:"ml-[20px]",style:{width:"calc(100% - 285px)"}},Tt=_e({__name:"index",setup(E){const H=De().meta.title,K=Ne(),P=_("codeGeneration"),s=ue({page:1,limit:10,total:0,loading:!0,data:[],searchParam:{table_name:"",table_content:"",addon_name:""}}),j=_(),Q=r=>{r&&(r.resetFields(),v())};fe(()=>{window.codeActiveName&&(P.value=window.codeActiveName+"",window.codeActiveName=null),v()});const v=(r=1)=>{s.loading=!0,s.page=r,ye({page:s.page,limit:s.limit,...s.searchParam}).then(a=>{s.loading=!1,s.data=a.data.data,s.total=a.data.total}).catch(()=>{s.loading=!1})},z=_([]),J=r=>{ke({search:r}).then(a=>{z.value=a.data})},A=_(null),W=()=>{A.value.setFormData(),A.value.showDialog=!0},X=r=>{q.confirm(t("codeDeleteTips"),t("warning"),{confirmButtonText:t("confirm"),cancelButtonText:t("cancel"),type:"warning"}).then(()=>{we(r).then(()=>{v()}).catch(()=>{})})},Y=r=>{K.push("/tools/code/edit?id="+r.id)},Z=r=>{Ee({id:r}).then(a=>{s.loading=!1,q.confirm(a.msg!="2"?t("saveAndSyncText"):t("saveAndSyncText1"),t("warning"),{confirmButtonText:t("confirm"),cancelButtonText:t("cancel")}).then(()=>{I(r,3)}).catch(()=>{})}).catch(()=>{s.loading=!1})},I=(r,a)=>{s.loading=!0,Ce({id:r,generate_type:a}).then(p=>{Se({type:"success",message:"操作成功"}),a!=3?(s.loading=!1,window.open(Fe(p.data.file),"_blank")):v()}).catch(()=>{s.loading=!1})},B=_([]),L=_(!1),C=_([]),T=_(!1),F=_(""),V=_(""),ee=r=>{L.value=!0,T.value=!0,F.value="",C.value=[],V.value="",Te(r).then(a=>{B.value=a.data,C.value=oe(a.data.map(p=>p.file_dir+p.name)),F.value=B.value[0].content,T.value=!1}).catch(()=>{T.value=!1})},te=r=>{B.value.forEach(a=>{r.path===a.file_dir+a.name&&(F.value=a.content)})},oe=r=>{const a=[];if(Array.isArray(r))for(let m=0;m<r.length;++m){const D=r[m].split("/");let b=a;for(let x=0;x<D.length;++x){const k=D[x];let c=null;for(var p=0;p<b.length;++p){const N=b[p];if(N.name===k){c=N;break}}c||(c={name:k,path:k.indexOf(".")<0?"":r[m],key:"k"+m+x+p},k.indexOf(".")<0&&(c.children=[]),c.path===r[0]&&(V.value=c.key),b.push(c)),c.children&&(b=c.children)}}return a};return(r,a)=>{const p=Pe,m=Ae,D=Be,b=Le,x=je,k=ze,c=Ie,N=Re,ae=Ge,G=Ue,w=Oe,le=Me,ne=qe,ie=$e,se=S("Folder"),re=S("FolderOpened"),R=He,de=S("Document"),pe=Ke,U=Qe,ce=S("highlightjs"),me=Je,O=We;return u(),$("div",Ye,[o(G,{class:"box-card !border-none",shadow:"never"},{default:e(()=>[i("div",Ze,[i("span",et,d(l(H)),1)]),o(ie,{modelValue:P.value,"onUpdate:modelValue":a[7]||(a[7]=n=>P.value=n),class:"demo-tabs"},{default:e(()=>[o(b,{label:l(t)("codeGeneration"),name:"codeGeneration"},{default:e(()=>[o(D,{direction:"vertical"},{default:e(()=>[o(m,null,{icon:e(()=>[tt]),title:e(()=>[i("p",ot,d(l(t)("step1")),1)]),description:e(()=>[i("span",at,d(l(t)("describe1")),1),i("div",lt,[o(p,{type:"primary",class:"w-[100px]",onClick:W},{default:e(()=>[f(d(l(t)("btn1")),1)]),_:1})])]),_:1}),o(m,null,{icon:e(()=>[nt]),title:e(()=>[i("p",it,d(l(t)("step2")),1)]),description:e(()=>[i("span",st,d(l(t)("describe2")),1),rt]),_:1}),o(m,null,{icon:e(()=>[dt]),title:e(()=>[i("p",pt,d(l(t)("step3")),1)]),description:e(()=>[i("span",ct,d(l(t)("describe3")),1),mt]),_:1}),o(m,null,{icon:e(()=>[_t]),title:e(()=>[i("p",ut,d(l(t)("step4")),1)]),description:e(()=>[i("span",ft,d(l(t)("describe4")),1),ht]),_:1}),o(m,null,{icon:e(()=>[xt]),title:e(()=>[i("p",vt,d(l(t)("step5")),1)]),description:e(()=>[i("span",bt,d(l(t)("describe5")),1),gt]),_:1})]),_:1})]),_:1},8,["label"]),o(b,{label:l(t)("codeList"),name:"codeList"},{default:e(()=>[o(G,{class:"box-card !border-none my-[10px] table-search-wrap",shadow:"never"},{default:e(()=>[o(ae,{inline:!0,model:s.searchParam,ref_key:"searchFormRef",ref:j},{default:e(()=>[o(c,{label:l(t)("addonName"),prop:"addon_name"},{default:e(()=>[o(k,{modelValue:s.searchParam.addon_name,"onUpdate:modelValue":a[0]||(a[0]=n=>s.searchParam.addon_name=n),placeholder:"Select",filterable:"",remote:"",clearable:"","remote-method":J},{default:e(()=>[o(x,{label:"全部",value:""}),o(x,{label:"系统",value:"2"}),(u(!0),$(he,null,xe(z.value,n=>(u(),y(x,{label:n.title,value:n.key,key:n.key},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),o(c,{label:l(t)("tableName"),prop:"table_name"},{default:e(()=>[o(N,{modelValue:s.searchParam.table_name,"onUpdate:modelValue":a[1]||(a[1]=n=>s.searchParam.table_name=n),placeholder:l(t)("tableNamePlaceholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),o(c,null,{default:e(()=>[o(p,{type:"primary",onClick:a[2]||(a[2]=n=>v())},{default:e(()=>[f(d(l(t)("search")),1)]),_:1}),o(p,{onClick:a[3]||(a[3]=n=>Q(j.value))},{default:e(()=>[f(d(l(t)("reset")),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),i("div",null,[M((u(),y(le,{data:s.data,size:"large"},{empty:e(()=>[i("span",null,d(s.loading?"":l(t)("emptyData")),1)]),default:e(()=>[o(w,{prop:"table_name","show-overflow-tooltip":!0,label:l(t)("tableName"),"min-width":"120"},null,8,["label"]),o(w,{prop:"title","show-overflow-tooltip":!0,label:l(t)("addonName"),"min-width":"120"},null,8,["label"]),o(w,{prop:"table_content","show-overflow-tooltip":!0,label:l(t)("tableContent"),"min-width":"120"},null,8,["label"]),o(w,{prop:"edit_type",label:l(t)("editType"),"min-width":"150",align:"center"},{default:e(({row:n})=>[f(d(n.edit_type==1?l(t)("popup"):l(t)("page")),1)]),_:1},8,["label"]),o(w,{label:l(t)("createTime"),"min-width":"180",align:"center"},{default:e(({row:n})=>[f(d(n.create_time||""),1)]),_:1},8,["label"]),o(w,{label:l(t)("operation"),fixed:"right",align:"right",width:"330"},{default:e(({row:n})=>[o(p,{type:"primary",link:"",onClick:g=>Y(n)},{default:e(()=>[f(d(l(t)("edit")),1)]),_:2},1032,["onClick"]),o(p,{type:"primary",link:"",onClick:g=>ee(n.id)},{default:e(()=>[f(d(l(t)("preview")),1)]),_:2},1032,["onClick"]),o(p,{type:"primary",link:"",onClick:g=>Z(n.id)},{default:e(()=>[f(d(l(t)("saveAndSync")),1)]),_:2},1032,["onClick"]),o(p,{type:"primary",link:"",onClick:g=>I(n.id,2)},{default:e(()=>[f(d(l(t)("download")),1)]),_:2},1032,["onClick"]),o(p,{type:"primary",link:"",onClick:g=>X(n.id)},{default:e(()=>[f(d(l(t)("delete")),1)]),_:2},1032,["onClick"])]),_:1},8,["label"])]),_:1},8,["data"])),[[O,s.loading]]),i("div",yt,[o(ne,{"current-page":s.page,"onUpdate:currentPage":a[4]||(a[4]=n=>s.page=n),"page-size":s.limit,"onUpdate:pageSize":a[5]||(a[5]=n=>s.limit=n),layout:"total, sizes, prev, pager, next, jumper",total:s.total,onSizeChange:a[6]||(a[6]=n=>v()),onCurrentChange:v},null,8,["current-page","page-size","total"])])])]),_:1},8,["label"])]),_:1},8,["modelValue"]),o(Ve,{ref_key:"addCodeDialog",ref:A},null,512),o(me,{modelValue:L.value,"onUpdate:modelValue":a[8]||(a[8]=n=>L.value=n),class:"dialog-visible",width:"70%",title:"代码预览"},{default:e(()=>[M((u(),$("div",kt,[o(U,{class:"h-[100%] w-[270px]"},{default:e(()=>[C.value.length&&V.value!=""?(u(),y(pe,{key:0,data:C.value,props:{label:"name",value:"key"},"node-key":"key","current-node-key":V.value,"expand-on-click-node":!1,"highlight-current":"","default-expand-all":"",ref:"treeRef",onNodeClick:te},{default:e(({node:n,data:g})=>[i("div",wt,[g.children?(u(),y(R,{key:0},{default:e(()=>[n.expanded?(u(),y(re,{key:1})):(u(),y(se,{key:0}))]),_:2},1024)):(u(),y(R,{key:1},{default:e(()=>[o(de)]),_:1})),i("span",Et,d(g.name),1)])]),_:1},8,["data","current-node-key"])):ve("",!0)]),_:1}),i("div",Ct,[o(U,{class:"h-[100%] w-[100%]"},{default:e(()=>[o(ce,{autodetect:"",class:"h-[100%]",code:F.value},null,8,["code"])]),_:1})])])),[[O,T.value]])]),_:1},8,["modelValue"])]),_:1})])}}});const Wo=Xe(Tt,[["__scopeId","data-v-3d8d8561"]]);export{Wo as default};
