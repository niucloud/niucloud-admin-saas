import{d as C,r as g,n as v,N as o,h as x,c as N,y as F,I,w as i,e as n,a as m,t as _,u as r,i as B,W as D,X as $,$ as M,Y as R,E as P,a0 as k,_ as H}from"./index-9d601459.js";/* empty css                   *//* empty css                  *//* empty css                *//* empty css                */import"./el-form-item-4ed993c7.js";/* empty css                 */import{L,M as S}from"./member-aa9fcf40.js";const T={class:"main-container"},U={class:"panel-title"},j={class:"form-tip"},q={class:"text-lg"},z={class:"fixed-footer-wrap"},A={class:"fixed-footer"},O=C({__name:"member",setup(W){const d=g(!0),p=g({});let h=g("");const b=v({prefix:[{validator:(l,e,a)=>{e&&!/^[a-zA-Z]*$/g.test(e)?a(new Error(o("prefixHint"))):a()},trigger:"blur"}],length:[{required:!0,message:o("lengthPlaceholder"),trigger:"blur"},{validator:(l,e,a)=>{parseInt(e)>30||parseInt(e)-t.prefix.length<4?a(new Error(o("lengthHint"))):a()},trigger:"blur"}]}),t=v({prefix:"",length:10});(async()=>{const l=await(await L()).data;Object.keys(t).forEach(e=>{l[e]!=null&&(t[e]=l[e])}),c(p.value),d.value=!1})();const c=async l=>{await l.validate(e=>{if(e){let a="",f=t.length-t.prefix.length-1;for(let u=1;u<=f;u++)a+="0";h.value=t.prefix+a+"1"}})},w=async l=>{d.value||!l||await l.validate(e=>{e&&S(t).then(()=>{d.value=!1,c()}).catch(()=>{d.value=!1})})};return(l,e)=>{const a=D,f=$,u=M,y=R,V=P,E=k;return x(),N("div",T,[F((x(),I(y,{model:t,"label-width":"150px",ref_key:"ruleFormRef",ref:p,rules:b,class:"page-form"},{default:i(()=>[n(u,{class:"box-card !border-none",shadow:"never"},{default:i(()=>[m("h3",U,_(r(o)("memberNoRule")),1),n(f,{label:r(o)("prefix"),prop:"prefix"},{default:i(()=>[n(a,{modelValue:t.prefix,"onUpdate:modelValue":e[0]||(e[0]=s=>t.prefix=s),placeholder:r(o)("prefixPlaceholder"),class:"input-width",clearable:"",maxlength:"20",onChange:e[1]||(e[1]=s=>c(p.value))},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),n(f,{label:r(o)("length"),prop:"length"},{default:i(()=>[n(a,{modelValue:t.length,"onUpdate:modelValue":e[2]||(e[2]=s=>t.length=s),placeholder:r(o)("lengthPlaceholder"),class:"input-width",clearable:"",type:"number",onChange:e[3]||(e[3]=s=>c(p.value))},null,8,["modelValue","placeholder"]),m("div",j,_(r(o)("lengthTips")),1)]),_:1},8,["label"]),n(f,null,{default:i(()=>[m("div",q,_(r(h)),1)]),_:1})]),_:1})]),_:1},8,["model","rules"])),[[E,d.value]]),m("div",z,[m("div",A,[n(V,{type:"primary",onClick:e[4]||(e[4]=s=>w(p.value))},{default:i(()=>[B(_(r(o)("save")),1)]),_:1})])])])}}});const le=H(O,[["__scopeId","data-v-80ca2ff0"]]);export{le as default};
