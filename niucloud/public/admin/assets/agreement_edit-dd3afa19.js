import{d as R,O as $,f as I,r as y,cM as P,n as S,q as T,N as r,h as k,c as j,a as l,u as o,t as p,y as q,I as O,w as m,e as s,i as x,W as U,X as A,Y as M,_ as z,E as L,$ as W}from"./index-b19d04dd.js";/* empty css                   *//* empty css                  *//* empty css                *//* empty css                */import{_ as X}from"./index.vue_vue_type_script_setup_true_lang-337d68b2.js";import"./el-form-item-4ed993c7.js";/* empty css                 */import{M as Y,N as G}from"./sys-dbdff24e.js";import"./index.vue_vue_type_style_index_0_lang-4806f3ef.js";/* empty css                   */import"./attachment-b6d6fc85.js";/* empty css                        *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                      *//* empty css                    *//* empty css                 */import"./el-tooltip-4ed993c7.js";/* empty css                 *//* empty css               *//* empty css                    *//* empty css                         *//* empty css                   */import"./index.vue_vue_type_script_setup_true_lang-6089139d.js";/* empty css                */import"./_plugin-vue_export-helper-c27b6911.js";const H={class:"main-container"},J={class:"detail-head"},K=l("span",{class:"iconfont iconxiangzuojiantou !text-xs"},null,-1),Q={class:"ml-[1px]"},Z=l("span",{class:"adorn"},"|",-1),ee={class:"right"},te={class:"fixed-footer-wrap"},oe={class:"fixed-footer"},Se=R({__name:"agreement_edit",setup(ae){const u=$(),_=I(),f=u.query.key||"",i=y(!1),V=P(),w=u.meta.title,g={agreement_key:"",content:"",title:"",agreement_key_name:""},t=S({...g});i.value=!0,f&&(async(c="")=>{Object.assign(t,g);const e=await(await Y(c)).data;Object.keys(t).forEach(a=>{e[a]!=null&&(t[a]=e[a])}),i.value=!1})(f);const v=y(),E=T(()=>({title:[{required:!0,message:r("titlePlaceholder"),trigger:"blur"}]})),C=async c=>{i.value||!c||await c.validate(async e=>{if(e){i.value=!0;const a=t;a.key=t.agreement_key,G(a).then(d=>{i.value=!1,b()}).catch(()=>{i.value=!1})}})},b=()=>{V.removeTab(u.path),_.push({path:"/setting/agreement"})};return(c,e)=>{const a=U,d=A,D=X,N=M,B=z,h=L,F=W;return k(),j("div",H,[l("div",J,[l("div",{class:"left",onClick:e[0]||(e[0]=n=>o(_).push({path:"/setting/agreement"}))},[K,l("span",Q,p(o(r)("returnToPreviousPage")),1)]),Z,l("span",ee,p(o(w)),1)]),q((k(),O(B,{class:"box-card !border-none",shadow:"never"},{default:m(()=>[s(N,{model:t,"label-width":"90px",ref_key:"formRef",ref:v,rules:o(E),class:"page-form"},{default:m(()=>[s(d,{label:o(r)("type")},{default:m(()=>[s(a,{modelValue:t.agreement_key_name,"onUpdate:modelValue":e[1]||(e[1]=n=>t.agreement_key_name=n),readonly:"",class:"input-width"},null,8,["modelValue"])]),_:1},8,["label"]),s(d,{label:o(r)("title"),prop:"title"},{default:m(()=>[s(a,{modelValue:t.title,"onUpdate:modelValue":e[2]||(e[2]=n=>t.title=n),clearable:"",placeholder:o(r)("titlePlaceholder"),class:"input-width",maxlength:"20"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),s(d,{label:o(r)("content")},{default:m(()=>[s(D,{modelValue:t.content,"onUpdate:modelValue":e[3]||(e[3]=n=>t.content=n)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model","rules"])]),_:1})),[[F,i.value]]),l("div",te,[l("div",oe,[s(h,{type:"primary",onClick:e[4]||(e[4]=n=>C(v.value))},{default:m(()=>[x(p(o(r)("save")),1)]),_:1}),s(h,{onClick:e[5]||(e[5]=n=>b())},{default:m(()=>[x(p(o(r)("cancel")),1)]),_:1})])])])}}});export{Se as default};
