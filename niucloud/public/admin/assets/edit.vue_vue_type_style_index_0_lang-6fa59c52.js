import{d as F,r as p,n as q,q as B,N as l,h as v,I as y,w as d,a as C,e as i,aH as b,i as V,t as h,u as t,y as I,W as N,X as R,Y as U,E as j,aa as O,a0 as H}from"./index-9d601459.js";/* empty css                   *//* empty css                   *//* empty css                  *//* empty css                */import"./el-form-item-4ed993c7.js";/* empty css                 */import{e as L,a as S,g as T}from"./dict-4da82d1e.js";const W={class:"dialog-footer"},Z=F({__name:"edit",emits:["complete"],setup(X,{expose:D,emit:k}){let r=p(!1);const n=p(!1),f={id:"",name:"",key:"",memo:""},a=q({...f}),_=p(),w=B(()=>({name:[{required:!0,message:l("namePlaceholder"),trigger:"blur"}],key:[{required:!0,message:l("keyPlaceholder"),trigger:"blur"}],data:[{required:!0,message:l("dataPlaceholder"),trigger:"blur"}]})),x=async m=>{if(n.value||!m)return;let e=a.id?L:S;await m.validate(async s=>{s&&(n.value=!0,e(a).then(c=>{n.value=!1,r.value=!1,k("complete")}).catch(c=>{n.value=!1}))})};return D({showDialog:r,setFormData:async(m=null)=>{if(Object.assign(a,f),n.value=!0,m){const e=await(await T(m.id)).data;e&&Object.keys(a).forEach(s=>{e[s]!=null&&(a[s]=e[s])})}n.value=!1}}),(m,e)=>{const s=N,u=R,c=U,g=j,E=O,P=H;return v(),y(E,{modelValue:t(r),"onUpdate:modelValue":e[5]||(e[5]=o=>b(r)?r.value=o:r=o),title:a.id?t(l)("updateDict"):t(l)("addDict"),width:"480",class:"diy-dialog-wrap","destroy-on-close":!0},{footer:d(()=>[C("span",W,[i(g,{onClick:e[3]||(e[3]=o=>b(r)?r.value=!1:r=!1)},{default:d(()=>[V(h(t(l)("cancel")),1)]),_:1}),i(g,{type:"primary",loading:n.value,onClick:e[4]||(e[4]=o=>x(_.value))},{default:d(()=>[V(h(t(l)("confirm")),1)]),_:1},8,["loading"])])]),default:d(()=>[I((v(),y(c,{model:a,"label-width":"120px",ref_key:"formRef",ref:_,rules:t(w),class:"page-form"},{default:d(()=>[i(u,{label:t(l)("name"),prop:"name"},{default:d(()=>[i(s,{modelValue:a.name,"onUpdate:modelValue":e[0]||(e[0]=o=>a.name=o),clearable:"",placeholder:t(l)("namePlaceholder"),class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),i(u,{label:t(l)("key"),prop:"key"},{default:d(()=>[i(s,{modelValue:a.key,"onUpdate:modelValue":e[1]||(e[1]=o=>a.key=o),clearable:"",placeholder:t(l)("keyPlaceholder"),class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),i(u,{label:t(l)("memo")},{default:d(()=>[i(s,{modelValue:a.memo,"onUpdate:modelValue":e[2]||(e[2]=o=>a.memo=o),type:"textarea",clearable:"",placeholder:t(l)("memoPlaceholder"),class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model","rules"])),[[P,n.value]])]),_:1},8,["modelValue","title"])}}});export{Z as _};
