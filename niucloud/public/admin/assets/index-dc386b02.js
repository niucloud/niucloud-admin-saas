import{d as G,K as se,r as h,n as te,N as f,h as l,c as _,e as i,w as c,aR as O,a as o,u as t,cQ as me,t as M,i as Q,af as fe,aI as xe,a0 as le,aT as he,aU as ve,aV as ge,W as ye,X as we,Y as be,E as ae,aa as re,p as ie,g as ce,U as j,cR as ke,cK as Y,cL as pe,q,v as Ce,I as T,F as V,B as y,y as ne,co as oe,G as W,A as B,Q as de,f as ue,O as _e,s as Ee,aC as $e,aD as Se,cS as Ve,cM as Ie,x as Te,a_ as Me,J as Fe,cF as Pe,ap as Re,Z as De}from"./index-4ce69858.js";/* empty css                     *//* empty css                   *//* empty css                  */import{_ as Z}from"./index.vue_vue_type_script_setup_true_lang-861395e6.js";/* empty css                */import"./el-form-item-4ed993c7.js";/* empty css                 *//* empty css                         *//* empty css                  *//* empty css                  */import{s as He}from"./personal-3f735b2a.js";/* empty css                        */import{_ as ee}from"./_plugin-vue_export-helper-c27b6911.js";import{ad as Ue,ae as Le,af as Ne}from"./sys-e410b79c.js";/* empty css                    */import{u as Ae}from"./style-9223daaf.js";/* empty css                */const X=F=>(ie("data-v-827cff93"),F=F(),ce(),F),ze={class:"userinfo flex h-full items-center"},je={class:"user-name pl-[8px]"},Be=X(()=>o("div",{class:"flex items-center leading-[1] py-[5px]"},[o("span",{class:"iconfont iconshezhi1 ml-[4px] !text-[14px] mr-[10px]"}),o("span",{class:"text-[14px]"},"账号设置")],-1)),We=X(()=>o("div",{class:"flex items-center leading-[1] py-[5px]"},[o("span",{class:"iconfont iconshouquanxinxi2 ml-[4px] !text-[14px] mr-[10px]"}),o("span",{class:"text-[14px]"},"授权信息")],-1)),qe=X(()=>o("div",{class:"flex items-center leading-[1] py-[5px]"},[o("span",{class:"iconfont iconxiugai ml-[4px] !text-[14px] mr-[10px]"}),o("span",{class:"text-[14px]"},"修改密码")],-1)),Oe=X(()=>o("div",{class:"flex items-center leading-[1] py-[5px]"},[o("span",{class:"iconfont icontuichudenglu ml-[4px] !text-[14px] mr-[10px]"}),o("span",{class:"text-[14px]"},"退出登录")],-1)),Je={class:"form-tip"},Ke={class:"dialog-footer"},Qe=G({__name:"user-info",setup(F){const R=se(),L=m=>{switch(m){case"logout":R.logout();break}},P=()=>{R.logout()};let x=h(!1);const D=h();let u=te({original_password:"",password:"",password_copy:""});const I=te({original_password:[{required:!0,message:f("originalPasswordPlaceholder"),trigger:"blur"}],password:[{required:!0,message:f("passwordPlaceholder"),trigger:"blur"}],password_copy:[{required:!0,message:f("passwordPlaceholder"),trigger:"blur"}]}),E=m=>{m&&m.validate(s=>{if(s){let v="";if(u.password&&!u.original_password&&(v=f("originalPasswordHint")),u.password&&u.original_password&&!u.password_copy&&(v=f("newPasswordHint")),u.password&&u.original_password&&u.password_copy&&u.password!=u.password_copy&&(v=f("doubleCipherHint")),v){fe({type:"error",message:v});return}He(u).then($=>{x.value=!1})}else return!1})};return(m,s)=>{const v=xe,$=Z,N=le("router-link"),g=he,k=ve,H=ge,C=ye,A=we,z=be,w=ae,p=re;return l(),_("div",null,[i(H,{onCommand:L,tabindex:1},{dropdown:c(()=>[i(k,null,{default:c(()=>[i(g,null,{default:c(()=>[i(N,{to:"/user/center"},{default:c(()=>[Be]),_:1})]),_:1}),i(g,null,{default:c(()=>[i(N,{to:"/tools/authorize"},{default:c(()=>[We]),_:1})]),_:1}),i(g,{onClick:s[0]||(s[0]=e=>O(x)?x.value=!0:x=!0)},{default:c(()=>[qe]),_:1}),i(g,{onClick:P},{default:c(()=>[Oe]),_:1})]),_:1})]),default:c(()=>[o("div",ze,[i(v,{size:25,icon:t(me)},null,8,["icon"]),o("div",je,M(t(R).userInfo.username),1),i($,{name:"element-ArrowDown",class:"ml-[5px]"})])]),_:1}),i(p,{modelValue:t(x),"onUpdate:modelValue":s[6]||(s[6]=e=>O(x)?x.value=e:x=e),width:"450px",title:"修改密码","before-close":m.handleClose},{footer:c(()=>[o("span",Ke,[i(w,{onClick:s[4]||(s[4]=e=>O(x)?x.value=!1:x=!1)},{default:c(()=>[Q(M(t(f)("cancel")),1)]),_:1}),i(w,{type:"primary",onClick:s[5]||(s[5]=e=>E(D.value))},{default:c(()=>[Q(M(t(f)("save")),1)]),_:1})])]),default:c(()=>[o("div",null,[i(z,{model:t(u),"label-width":"90px",ref_key:"formRef",ref:D,rules:I,class:"page-form"},{default:c(()=>[i(A,{label:t(f)("originalPassword"),prop:"original_password"},{default:c(()=>[i(C,{modelValue:t(u).original_password,"onUpdate:modelValue":s[1]||(s[1]=e=>t(u).original_password=e),type:"password",placeholder:t(f)("originalPasswordPlaceholder"),clearable:"",class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),i(A,{label:t(f)("newPassword"),prop:"password"},{default:c(()=>[i(C,{modelValue:t(u).password,"onUpdate:modelValue":s[2]||(s[2]=e=>t(u).password=e),type:"password",placeholder:t(f)("passwordPlaceholder"),clearable:"",class:"input-width"},null,8,["modelValue","placeholder"]),o("div",Je,M(t(f)("passwordTip")),1)]),_:1},8,["label"]),i(A,{label:t(f)("passwordCopy"),prop:"password_copy"},{default:c(()=>[i(C,{modelValue:t(u).password_copy,"onUpdate:modelValue":s[3]||(s[3]=e=>t(u).password_copy=e),type:"password",placeholder:t(f)("passwordPlaceholder"),clearable:"",class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model","rules"])])]),_:1},8,["modelValue","before-close"])])}}});const Ge=ee(Qe,[["__scopeId","data-v-827cff93"]]),J=F=>(ie("data-v-9e74a030"),F=F(),ce(),F),Xe={class:"flex items-center text-[14px] leading-[1]"},Ye=J(()=>o("span",{class:"iconfont icontuodong !text-[25px] mr-[6px]"},null,-1)),Ze=J(()=>o("span",{class:"mx-2 text-[#4F5563] mx-[15px]"},"|",-1)),et=J(()=>o("span",{class:"mx-2 text-[#4F5563] mx-[15px]"},"|",-1)),tt=J(()=>o("span",{class:"mx-2 text-[#4F5563] mx-[15px]"},"|",-1)),nt=J(()=>o("span",{class:"mx-2 text-[#4F5563] mx-[15px]"},"|",-1)),ot={class:"right-panel h-full flex items-center justify-end"},st=["title"],lt={class:"navbar-item flex items-center h-full cursor-pointer"},at={class:"dialog-footer"},rt={class:"flex flex-wrap"},it=["onClick"],ct=["onClick"],pt={class:"dialog-footer"},dt=G({__name:"index",setup(F){const R=ue(),L=j.get("app_type");ke();const P=Y(),x=pe(),D=_e(),u=h(window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth);q(()=>P.dark);let I=h(!0);(()=>{Ue().then(w=>{}).catch(()=>{})})();const m=h(!1),s=h(""),v=h("");j.get("comparisonTokenStorage")&&(s.value=j.get("comparisonTokenStorage")),j.get("comparisonSiteIdStorage")&&(v.value=j.get("comparisonSiteIdStorage")),document.addEventListener("visibilitychange",w=>{document.visibilityState==="visible"&&(v.value!=j.get("siteId")||s.value!=j.get("token"))&&(m.value=!0)});const $=()=>{m.value=!1,location.reload()};Ce(()=>{window.onresize=()=>(()=>{u.value=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth})()});const N=()=>{x.routeRefreshTag&&x.refreshRouterView()};q(()=>{const w=D.matched.filter(p=>p.meta.title);return w[0]&&w[0].path=="/"&&w.splice(0,1),w});const g=h(),k=h(!1),H=()=>{Le().then(w=>{k.value=!0,g.value=w.data;for(let p=0;p<g.value.length;p++)g.value[p].is_use==1&&(C.value=g.value[p].view_path)})},C=h(""),A=()=>{Ne({view_path:C.value}).then(()=>{k.value=!1,R.go(0)})};j.set({key:"currHeadMenuName",data:""});const z=(w,p)=>{R.push(w)};return(w,p)=>{const e=Z,r=ae,d=re,b=de;return l(),T(b,{class:"h-[60px] bg-[#2B303B] layout-admin flex items-center justify-between px-[15px] text-white"},{default:c(()=>[o("div",Xe,[Ye,o("span",{class:"cursor-pointer",onClick:p[0]||(p[0]=a=>z("/admin/index"))},"首页"),Ze,o("span",{class:"cursor-pointer",onClick:p[1]||(p[1]=a=>z("/admin/setting/website/system","setting_manage"))},"配置"),et,o("span",{class:"cursor-pointer",onClick:p[2]||(p[2]=a=>z("/admin/site/list","site_manage"))},"站点"),t(I)?(l(),_(V,{key:0},[tt,o("span",{class:"cursor-pointer",onClick:p[3]||(p[3]=a=>z("/admin/app_manage/app_store",""))},"应用"),nt,o("span",{class:"cursor-pointer",onClick:p[4]||(p[4]=a=>z("/admin/app_manage/tools","tool"))},"开发")],64)):y("",!0)]),o("div",ot,[o("div",{class:"navbar-item flex items-center h-full cursor-pointer",onClick:N},[i(e,{name:"element-Refresh"})]),t(L)=="site"?(l(),_("i",{key:0,class:"iconfont iconlingdang-xianxing cursor-pointer px-[8px]",title:t(f)("newInfo")},null,8,st)):y("",!0),t(L)=="site"?(l(),_("div",{key:1,class:"navbar-item flex items-center h-full cursor-pointer",onClick:H},[i(e,{name:"iconfont-iconqiehuan",title:t(f)("indexSwitch")},null,8,["title"])])):y("",!0),o("div",lt,[i(Ge)])]),ne(o("input",{type:"hidden","onUpdate:modelValue":p[5]||(p[5]=a=>s.value=a)},null,512),[[oe,s.value]]),ne(o("input",{type:"hidden","onUpdate:modelValue":p[6]||(p[6]=a=>v.value=a)},null,512),[[oe,v.value]]),i(d,{modelValue:m.value,"onUpdate:modelValue":p[7]||(p[7]=a=>m.value=a),title:t(f)("layout.detectionLoginTip"),width:"30%","close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1},{footer:c(()=>[o("span",at,[i(r,{onClick:$},{default:c(()=>[Q(M(t(f)("layout.detectionLoginOperation")),1)]),_:1})])]),default:c(()=>[o("span",null,M(t(f)("layout.detectionLoginContent")),1)]),_:1},8,["modelValue","title"]),i(d,{modelValue:k.value,"onUpdate:modelValue":p[8]||(p[8]=a=>k.value=a),title:t(f)("indexTemplate"),width:"550px","destroy-on-close":!0},{footer:c(()=>[o("span",pt,[i(r,{type:"primary",onClick:A},{default:c(()=>[Q(M(t(f)("confirm")),1)]),_:1})])]),default:c(()=>[o("div",rt,[C.value==""?(l(!0),_(V,{key:0},W(g.value,(a,S)=>(l(),_("div",{key:S},[o("div",{onClick:n=>C.value=a.view_path,class:B(["index-item py-[5px] px-[10px] mr-[10px] rounded-[3px] cursor-pointer",a.is_use==1?"bg-primary text-[#fff]":""])},[o("span",null,M(a.name),1)],10,it)]))),128)):(l(!0),_(V,{key:1},W(g.value,(a,S)=>(l(),_("div",{key:S},[o("div",{onClick:n=>C.value=a.view_path,class:B(["index-item py-[5px] px-[10px] mr-[10px] rounded-[3px] cursor-pointer",C.value==a.view_path?"bg-primary text-[#fff]":""])},[o("span",null,M(a.name),1)],10,ct)]))),128))])]),_:1},8,["modelValue","title"])]),_:1})}}});const ut=ee(dt,[["__scopeId","data-v-9e74a030"]]),_t={key:0,class:"pt-[20px] pl-[80px] pr-[70px]"},mt={class:"flex flex-wrap items-center"},ft=["onClick"],xt={class:"text-[14px]"},ht={key:1,class:"flex flex-wrap items-center pt-[20px] pl-[80px] pr-[70px]"},vt=["onClick"],gt={class:"text-[14px]"},yt={key:2,class:"pt-[20px] pl-[80px] pr-[70px]"},wt={class:"flex flex-wrap items-center"},bt=["onClick"],kt={class:"text-[14px]"},Ct=G({__name:"index",emits:["complete"],setup(F,{emit:R}){const L=se(),P=Y(),x=q(()=>P.dark),D=q(()=>P.currHeadMenuName);let u=JSON.parse(JSON.stringify(L.routers));const I=_e(),E=ue(),m=q(()=>String(I.name)),s=h("");Ee(I,()=>{P.$patch(d=>{d.menuDrawer=!1}),p();let e="";u.forEach((d,b)=>{d.name==I.name?e=d.name:d.children&&d.children.length&&d.children.forEach((a,S)=>{a.name==I.name?e=d.name:a.children&&a.children.length&&a.children.forEach((n,U)=>{n.name==I.name&&(e=d.name,e=="setting_manage"&&!s.value&&(s.value=a.name,$.value=a.children),e=="tool"&&!s.value&&(s.value=a.name,k.value=a.children))})})}),R("complete");let r={setting_manage:"setting_manage",site_manage:"site_manage",tool:"tool",app_auth:"tool"};if(Object.keys(r).indexOf(e)!=-1)return P.setHeadMenu(r[e]),!1;P.setHeadMenu("")});let v=h([]),$=h([]),N=h([]),g=h([]),k=h([]);L.routers.forEach((e,r)=>{e.meta.class=1,e.children&&e.children.forEach((d,b)=>{d.meta.class=2,d.children&&d.children.forEach((a,S)=>{a.meta.class=3})}),e.name=="setting_manage"&&(v.value=e.children),e.name=="site_manage"&&(N.value=e.children),e.name=="tool"&&(g.value=e.children)});const H=e=>{let r="/setting/";s.value="",$.value=[],e.children?(s.value=e.name,$.value=e.children,r=r+e.path+"/"+e.children[0].path,E.push(r)):(r=r+e.path,E.push(r))},C=(e,r)=>{let d="/setting/";v.value.forEach((b,a)=>{b.children&&b.children.length&&b.children.forEach((S,n)=>{S.name==e.props.name&&(d=d+b.path+"/"+S.path,E.push(d))})})},A=e=>{let r="/admin/site/";s.value="",e.children?(s.value=e.name,r=r+e.path+"/"+e.children[0].path,E.push(r)):(r=r+e.path,E.push(r))},z=e=>{let r="/admin/tools/";s.value="",k.value=[],e.children?(s.value=e.name,k.value=e.children,r=r+e.path+"/"+e.children[0].path,E.push(r)):(r=r+e.path,E.push(r))},w=(e,r)=>{let d="/tools/";g.value.forEach((b,a)=>{b.children&&b.children.length&&b.children.forEach((S,n)=>{S.name==e.props.name&&(d=d+b.path+"/"+S.path,E.push(d))})})},p=()=>{s.value="",$.value=[]};return(e,r)=>{const d=Z,b=$e,a=Se,S=Ve;return l(),T(S,{class:B(["layout-aside w-full ease-in duration-200",{bright:!t(x)}])},{default:c(()=>[t(D)=="setting_manage"?(l(),_("div",_t,[o("div",mt,[(l(!0),_(V,null,W(t(v),(n,U)=>(l(),_(V,{key:U},[n.meta.show?(l(),_("div",{key:0,onClick:K=>H(n),class:B(["flex items-center h-[32px] border-[1px] border-solid my-[3px] border-[#E0E0E0] rounded-full px-[10px] mr-[24px] cursor-pointer bg-[#f8f8f8] hover:bg-[#fff]",{"text-[#fff] !bg-[#000] border-[#000]":t(m)==n.name||s.value&&s.value==n.name}])},[n.meta.icon?(l(),T(d,{key:0,name:n.meta.icon,class:"!w-auto mr-[4px] !leading-[14px]",size:"14px",title:n.meta.title},null,8,["name","title"])):y("",!0),o("span",xt,M(n.meta.title),1)],10,ft)):y("",!0)],64))),128))]),t($).length?(l(),T(a,{key:0,modelValue:t(m),"onUpdate:modelValue":r[0]||(r[0]=n=>O(m)?m.value=n:null),class:"mt-[20px]",onTabClick:C},{default:c(()=>[(l(!0),_(V,null,W(t($),(n,U)=>(l(),_(V,{key:U},[n.meta.show?(l(),T(b,{key:0,label:n.meta.title,name:n.name,path:n.path,onClick:K=>H(n)},null,8,["label","name","path","onClick"])):y("",!0)],64))),128))]),_:1},8,["modelValue"])):y("",!0)])):y("",!0),t(D)=="site_manage"?(l(),_("div",ht,[(l(!0),_(V,null,W(t(N),(n,U)=>(l(),_(V,{key:U},[n.meta.show?(l(),_("div",{key:0,onClick:K=>A(n),class:B(["flex items-center h-[32px] border-[1px] border-solid my-[3px] border-[#E0E0E0] rounded-full px-[10px] mr-[24px] cursor-pointer bg-[#f8f8f8] hover:bg-[#fff]",{"text-[#fff] !bg-[#000] border-[#000]":t(m)==n.name||s.value&&s.value==n.name}])},[n.meta.icon?(l(),T(d,{key:0,name:n.meta.icon,class:"!w-auto mr-[4px] !leading-[14px]",size:"14px",title:n.meta.title},null,8,["name","title"])):y("",!0),o("span",gt,M(n.meta.title),1)],10,vt)):y("",!0)],64))),128))])):y("",!0),t(D)=="tool"?(l(),_("div",yt,[o("div",wt,[(l(!0),_(V,null,W(t(g),(n,U)=>(l(),_(V,{key:U},[n.meta.show?(l(),_("div",{key:0,onClick:K=>z(n),class:B(["flex items-center h-[32px] border-[1px] border-solid my-[3px] border-[#E0E0E0] rounded-full px-[10px] mr-[24px] cursor-pointer bg-[#f8f8f8] hover:bg-[#fff]",{"text-[#fff] !bg-[#000] border-[#000]":t(m)==n.name||s.value&&s.value==n.name}])},[n.meta.icon?(l(),T(d,{key:0,name:n.meta.icon,class:"!w-auto mr-[4px] !leading-[14px]",size:"14px",title:n.meta.title},null,8,["name","title"])):y("",!0),o("span",kt,M(n.meta.title),1)],10,bt)):y("",!0)],64))),128))]),t(k).length?(l(),T(a,{key:0,modelValue:t(m),"onUpdate:modelValue":r[1]||(r[1]=n=>O(m)?m.value=n:null),class:"mt-[20px]",onTabClick:w},{default:c(()=>[(l(!0),_(V,null,W(t(k),(n,U)=>(l(),_(V,{key:U},[n.meta.show?(l(),T(b,{key:0,label:n.meta.title,name:n.name,path:n.path,onClick:K=>H(n)},null,8,["label","name","path","onClick"])):y("",!0)],64))),128))]),_:1},8,["modelValue"])):y("",!0)])):y("",!0)]),_:1},8,["class"])}}});const Et={class:"common-layout min-w-[1200px]"},$t=G({__name:"index",setup(F){const R=pe(),L=Ie(),P=Y(),x=h(),D=Ae();let u=h("");const I=()=>{setTimeout(()=>{u.value=`calc(100vh - ${x.value.clientHeight+60}px)`},600)};I();const E=q(()=>P.dark),m=q(()=>D.flag);return(s,v)=>{const $=Pe,N=le("router-view"),g=Re,k=De,H=de;return l(),_("div",Et,[i(H,{class:"w-100 h-screen"},{default:c(()=>[i($,{class:"h-[60px]"},{default:c(()=>[i(ut)]),_:1}),i(H,{class:"flex flex-col"},{default:c(()=>[o("div",{ref_key:"layoutAsideRef",ref:x},[i(Ct,{onComplete:I})],512),i(k,{class:B(["main-wrap h-full p-0",{"bg-page":t(E)}])},{default:c(()=>[i(g,{class:B(["layout-content-height",{"px-[64px]":t(m)}]),style:Te({height:t(u)})},{default:c(()=>[t(R).routeRefreshTag?(l(),T(N,{key:0},{default:c(({Component:C,route:A})=>[(l(),T(Me,{include:t(L).tabNames},[(l(),T(Fe(C),{key:A.fullPath}))],1032,["include"]))]),_:1})):y("",!0)]),_:1},8,["class","style"])]),_:1},8,["class"])]),_:1})]),_:1})])}}});const qt=ee($t,[["__scopeId","data-v-b3e5f194"]]);export{qt as default};
