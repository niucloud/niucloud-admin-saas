import{d as $,R as z,r as C,e as w,f as R,y as a,x as n,g as u,B as m,u as e,A as p,Q as U,v as j}from"./base-04829be5.js";/* empty css                   *//* empty css                      *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                        *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                *//* empty css                     *//* empty css                  */import{t as o}from"./index-043d021e.js";import{c as G,d as L,f as S}from"./tools-99382199.js";import{f as I}from"./storage-1a3ddb14.js";import{_ as A}from"./add-table.vue_vue_type_script_setup_true_lang-2e33099b.js";import{u as M,b as Q}from"./vue-router-fee568b2.js";import{E as q}from"./index-d60f63e2.js";import{E as H}from"./index-eb678249.js";import{E as J}from"./index-db9b8d96.js";import{a as K,E as O}from"./index-6bd50bb5.js";import{E as W}from"./index-88566e4e.js";import{a as X,E as Y}from"./index-ed9a1afd.js";import{E as Z}from"./index-1808e3f9.js";import{v as ee}from"./directive-013f0a4e.js";import"./common-111e3797.js";import"./common-2cf17469.js";import"./index-faea7bd5.js";import"./index-236cb599.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./index-30df2c14.js";import"./index-7e933ae4.js";import"./index-92283b18.js";import"./typescript-defaf979.js";import"./index-a2524300.js";/* empty css                   */import"./index-b1557f8a.js";import"./index-9a9de0a3.js";import"./error-78e43d3e.js";import"./scroll-e5463626.js";import"./vnode-85ccdc7f.js";import"./index-1d455165.js";import"./focus-trap-be36cfe9.js";import"./event-9519ab40.js";import"./index-de053f2e.js";import"./index-4edf2cad.js";import"./aria-adfa05c5.js";import"./validator-6838b9a3.js";import"./index-d7f4b4bb.js";import"./castArray-11aea762.js";import"./_Uint8Array-99b916e9.js";import"./_initCloneObject-e5a1aa13.js";import"./index-e9e16697.js";import"./index-94a82d50.js";import"./index-c3b3b83a.js";import"./isEqual-ba353d68.js";import"./flatten-94587e2b.js";import"./_isIterateeCall-f0970b1f.js";import"./debounce-f064e94e.js";import"./index-b519934c.js";import"./index-02bf3820.js";import"./index-bf9de702.js";import"./strings-4ec3ae35.js";const te={class:"main-container"},oe={class:"flex justify-between items-center"},ae={class:"text-[20px]"},le={class:"mt-[16px] flex justify-end"},vt=$({__name:"index",setup(re){const y=M().meta.title,x=Q();let t=z({page:1,limit:10,total:0,loading:!0,data:[],searchParam:{table_name:"",table_content:""}});const b=C(),E=i=>{i&&(i.resetFields(),s())},s=(i=1)=>{t.loading=!0,t.page=i,G({page:t.page,limit:t.limit,...t.searchParam}).then(l=>{t.loading=!1,t.data=l.data.data,t.total=l.data.total}).catch(()=>{t.loading=!1})};s();const _=C(null),k=()=>{_.value.setFormData(),_.value.showDialog=!0},T=i=>{q.confirm(o("codeDeleteTips"),o("warning"),{confirmButtonText:o("confirm"),cancelButtonText:o("cancel"),type:"warning"}).then(()=>{L(i).then(()=>{s()}).catch(()=>{})})},P=i=>{x.push("/tools/code/edit?id="+i.id)},B=i=>{S({id:i}).then(l=>{window.open(I(l.data.file),"_blank")}).catch(()=>{})};return(i,l)=>{const d=H,g=J,f=K,D=O,h=W,c=X,V=Y,F=Z,N=ee;return w(),R("div",te,[a(h,{class:"box-card !border-none",shadow:"never"},{default:n(()=>[u("div",oe,[u("span",ae,m(e(y)),1),a(d,{type:"primary",class:"w-[100px]",onClick:k},{default:n(()=>[p(m(e(o)("addCode")),1)]),_:1})]),a(h,{class:"box-card !border-none my-[10px] table-search-wrap",shadow:"never"},{default:n(()=>[a(D,{inline:!0,model:e(t).searchParam,ref_key:"searchFormRef",ref:b},{default:n(()=>[a(f,{label:e(o)("tableName"),prop:"table_name"},{default:n(()=>[a(g,{modelValue:e(t).searchParam.table_name,"onUpdate:modelValue":l[0]||(l[0]=r=>e(t).searchParam.table_name=r),placeholder:e(o)("tableNamePlaceholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(f,{label:e(o)("tableContent"),prop:"table_content"},{default:n(()=>[a(g,{modelValue:e(t).searchParam.table_content,"onUpdate:modelValue":l[1]||(l[1]=r=>e(t).searchParam.table_content=r),placeholder:e(o)("tableContentPlaceholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(f,null,{default:n(()=>[a(d,{type:"primary",onClick:l[2]||(l[2]=r=>s())},{default:n(()=>[p(m(e(o)("search")),1)]),_:1}),a(d,{onClick:l[3]||(l[3]=r=>E(b.value))},{default:n(()=>[p(m(e(o)("reset")),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),u("div",null,[U((w(),j(V,{data:e(t).data,size:"large"},{empty:n(()=>[u("span",null,m(e(t).loading?"":e(o)("emptyData")),1)]),default:n(()=>[a(c,{prop:"table_name","show-overflow-tooltip":!0,label:e(o)("tableName"),"min-width":"120"},null,8,["label"]),a(c,{prop:"table_content","show-overflow-tooltip":!0,label:e(o)("tableContent"),"min-width":"120"},null,8,["label"]),a(c,{prop:"edit_type",label:e(o)("editType"),"min-width":"150",align:"center"},{default:n(({row:r})=>[p(m(r.edit_type==1?e(o)("popup"):e(o)("page")),1)]),_:1},8,["label"]),a(c,{label:e(o)("createTime"),"min-width":"180",align:"center"},{default:n(({row:r})=>[p(m(r.create_time||""),1)]),_:1},8,["label"]),a(c,{label:e(o)("operation"),fixed:"right",width:"180","show-overflow-tooltip":!0},{default:n(({row:r})=>[a(d,{type:"primary",link:"",onClick:v=>P(r)},{default:n(()=>[p(m(e(o)("edit")),1)]),_:2},1032,["onClick"]),a(d,{type:"primary",link:"",onClick:v=>B(r.id)},{default:n(()=>[p(m(e(o)("download")),1)]),_:2},1032,["onClick"]),a(d,{type:"danger",link:"",onClick:v=>T(r.id)},{default:n(()=>[p(m(e(o)("delete")),1)]),_:2},1032,["onClick"])]),_:1},8,["label"])]),_:1},8,["data"])),[[N,e(t).loading]]),u("div",le,[a(F,{"current-page":e(t).page,"onUpdate:currentPage":l[4]||(l[4]=r=>e(t).page=r),"page-size":e(t).limit,"onUpdate:pageSize":l[5]||(l[5]=r=>e(t).limit=r),layout:"total, sizes, prev, pager, next, jumper",total:e(t).total,onSizeChange:l[6]||(l[6]=r=>s()),onCurrentChange:s},null,8,["current-page","page-size","total"])])]),a(A,{ref_key:"addCodeDialog",ref:_,onComplete:s},null,512)]),_:1})])}}});export{vt as default};
