import{d as M,r as f,n as B,q as C,N as l,h as g,I as V,w as n,a as I,e as i,i as w,t as y,u as o,y as O,W as P,X as U,Y as R,E as T,aa as j,a0 as k}from"./index-4dcc0234.js";/* empty css                   *//* empty css                   *//* empty css                  *//* empty css                */import"./el-form-item-4ed993c7.js";/* empty css                 */import{u as q,s as S,t as $}from"./member-97cfd04b.js";const W={class:"dialog-footer"},ee=M({__name:"edit-label",emits:["complete"],setup(X,{expose:h,emit:x}){const d=f(!1),s=f(!1);let p="";const c={label_id:"",label_name:"",memo:"",sort:0},t=B({...c}),b=f(),D=C(()=>({label_name:[{required:!0,message:l("labelNamePlaceholder"),trigger:"blur"}],sort:[{validator:E,trigger:"blur"}]})),E=(m,e,a)=>{e<0?a(new Error(l("sortVerifyOne"))):e.toString().indexOf(".")!=-1?a(new Error(l("sortVerifyTwo"))):a()},N=async m=>{if(s.value||!m)return;const e=t.label_id?q:S;await m.validate(async a=>{a&&(s.value=!0,e(t).then(_=>{s.value=!1,d.value=!1,x("complete")}).catch(()=>{s.value=!1}))})};return h({showDialog:d,setFormData:async(m=null)=>{if(s.value=!0,Object.assign(t,c),p=l("addMemberLabel"),m){p=l("updateMemberLabel");const e=await(await $(m.label_id)).data;e&&Object.keys(t).forEach(a=>{e[a]!=null&&(t[a]=e[a])})}s.value=!1}}),(m,e)=>{const a=P,u=U,_=R,v=T,L=j,F=k;return g(),V(L,{modelValue:d.value,"onUpdate:modelValue":e[5]||(e[5]=r=>d.value=r),title:o(p),width:"500px","destroy-on-close":!0},{footer:n(()=>[I("span",W,[i(v,{onClick:e[3]||(e[3]=r=>d.value=!1)},{default:n(()=>[w(y(o(l)("cancel")),1)]),_:1}),i(v,{type:"primary",loading:s.value,onClick:e[4]||(e[4]=r=>N(b.value))},{default:n(()=>[w(y(o(l)("confirm")),1)]),_:1},8,["loading"])])]),default:n(()=>[O((g(),V(_,{model:t,"label-width":"90px",ref_key:"formRef",ref:b,rules:o(D),class:"page-form"},{default:n(()=>[i(u,{label:o(l)("labelName"),prop:"label_name"},{default:n(()=>[i(a,{modelValue:t.label_name,"onUpdate:modelValue":e[0]||(e[0]=r=>t.label_name=r),clearable:"",placeholder:o(l)("labelNamePlaceholder"),class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),i(u,{label:o(l)("memo")},{default:n(()=>[i(a,{modelValue:t.memo,"onUpdate:modelValue":e[1]||(e[1]=r=>t.memo=r),type:"textarea",rows:"4",clearable:"",placeholder:o(l)("memoPlaceholder"),class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),i(u,{label:o(l)("sort"),prop:"sort"},{default:n(()=>[i(a,{modelValue:t.sort,"onUpdate:modelValue":e[2]||(e[2]=r=>t.sort=r),clearable:"",placeholder:o(l)("sortPlaceholder"),class:"input-width",type:"number"},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model","rules"])),[[F,s.value]])]),_:1},8,["modelValue","title"])}}});export{ee as _};
