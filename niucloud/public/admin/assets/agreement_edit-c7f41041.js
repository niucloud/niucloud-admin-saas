import{d as R,cL as S,O as $,f as I,r as y,cM as P,n as T,q as j,N as r,h as k,c as q,a as l,u as a,t as d,y as A,I as O,w as m,e as s,i as x,W as U,X as L,Y as z,$ as J,E as K,a0 as M}from"./index-9d601459.js";/* empty css                   *//* empty css                  *//* empty css                *//* empty css                */import{_ as W}from"./index.vue_vue_type_script_setup_true_lang-37ad4b47.js";import"./el-form-item-4ed993c7.js";/* empty css                 */import{J as X,K as Y}from"./sys-45a56363.js";import"./index.vue_vue_type_style_index_0_lang-e34cc8d7.js";/* empty css                   */import"./attachment-b997aaa8.js";/* empty css                        *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                      *//* empty css                    *//* empty css                 */import"./el-tooltip-4ed993c7.js";/* empty css                 *//* empty css               *//* empty css                    *//* empty css                         *//* empty css                   */import"./index.vue_vue_type_script_setup_true_lang-6df3a9a5.js";/* empty css                */const G={class:"main-container"},H={class:"detail-head"},Q=l("span",{class:"iconfont iconxiangzuojiantou !text-xs"},null,-1),Z={class:"ml-[1px]"},ee=l("span",{class:"adorn"},"|",-1),te={class:"right"},ae={class:"fixed-footer-wrap"},oe={class:"fixed-footer"},Pe=R({__name:"agreement_edit",setup(se){S();const u=$(),_=I(),f=u.query.key||"",i=y(!1),V=P(),w=u.meta.title,g={agreement_key:"",content:"",title:"",agreement_key_name:""},t=T({...g});i.value=!0,f&&(async(c="")=>{Object.assign(t,g);const e=await(await X(c)).data;Object.keys(t).forEach(o=>{e[o]!=null&&(t[o]=e[o])}),i.value=!1})(f);const v=y(),E=j(()=>({title:[{required:!0,message:r("titlePlaceholder"),trigger:"blur"}]})),C=async c=>{i.value||!c||await c.validate(async e=>{if(e){i.value=!0;const o=t;o.key=t.agreement_key,Y(o).then(p=>{i.value=!1,b()}).catch(()=>{i.value=!1})}})},b=()=>{V.removeTab(u.path),_.push({path:"/setting/agreement"})};return(c,e)=>{const o=U,p=L,D=W,B=z,F=J,h=K,N=M;return k(),q("div",G,[l("div",H,[l("div",{class:"left",onClick:e[0]||(e[0]=n=>a(_).push({path:"/setting/agreement"}))},[Q,l("span",Z,d(a(r)("returnToPreviousPage")),1)]),ee,l("span",te,d(a(w)),1)]),A((k(),O(F,{class:"box-card !border-none",shadow:"never"},{default:m(()=>[s(B,{model:t,"label-width":"90px",ref_key:"formRef",ref:v,rules:a(E),class:"page-form"},{default:m(()=>[s(p,{label:a(r)("type")},{default:m(()=>[s(o,{modelValue:t.agreement_key_name,"onUpdate:modelValue":e[1]||(e[1]=n=>t.agreement_key_name=n),readonly:"",class:"input-width"},null,8,["modelValue"])]),_:1},8,["label"]),s(p,{label:a(r)("title"),prop:"title"},{default:m(()=>[s(o,{modelValue:t.title,"onUpdate:modelValue":e[2]||(e[2]=n=>t.title=n),clearable:"",placeholder:a(r)("titlePlaceholder"),class:"input-width",maxlength:"20"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),s(p,{label:a(r)("content")},{default:m(()=>[s(D,{modelValue:t.content,"onUpdate:modelValue":e[3]||(e[3]=n=>t.content=n)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model","rules"])]),_:1})),[[N,i.value]]),l("div",ae,[l("div",oe,[s(h,{type:"primary",onClick:e[4]||(e[4]=n=>C(v.value))},{default:m(()=>[x(d(a(r)("save")),1)]),_:1}),s(h,{onClick:e[5]||(e[5]=n=>b())},{default:m(()=>[x(d(a(r)("cancel")),1)]),_:1})])])])}}});export{Pe as default};
