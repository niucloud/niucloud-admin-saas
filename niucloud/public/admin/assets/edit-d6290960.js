import{d as ue,r as v,R as W,ap as x,w as ce,V as _e,e as s,f as h,y as n,x as i,g as r,B as d,u as t,A as P,F as Z,z as G,v as c,Q as X,n as Y,H as f,Z as fe,bl as ge,bm as ve}from"./base-04829be5.js";/* empty css                *//* empty css                     *//* empty css                  *//* empty css                        *//* empty css                 */import"./el-tooltip-4ed993c7.js";/* empty css                  *//* empty css                        *//* empty css                  *//* empty css                     *//* empty css                         */import{_ as be}from"./index.vue_vue_type_script_setup_true_lang-df8a984f.js";import{c as xe}from"./index-236cb599.js";/* empty css                */import{_ as Ce}from"./edit-article-9e04f0e0.js";import{_ as ye}from"./edit-graphic-nav-8c7b14ee.js";import{_ as he}from"./edit-horz-blank-bcaf4c90.js";import{_ as ke}from"./edit-hot-area-316f4b12.js";import{_ as we}from"./edit-image-ads-fc9f4d82.js";import{_ as Ve}from"./edit-member-info-4869ff41.js";import{_ as Be}from"./edit-page-5067a9e6.js";import{_ as ze}from"./edit-rubik-cube-41f0170b.js";import{_ as Ee}from"./edit-text-3f24307a.js";import{v as K}from"./index-30df2c14.js";import{t as a}from"./index-043d021e.js";import{i as Oe,e as Te,a as Re}from"./diy-7cd4083a.js";import{u as Se,b as De}from"./vue-router-fee568b2.js";import{u as Ne}from"./diy-9ea654fa.js";import{a as qe}from"./storage-1a3ddb14.js";import{c as Ue}from"./cloneDeep-44ad47b7.js";import{E as Ie}from"./index-d60f63e2.js";import{a as $e}from"./index-92283b18.js";import{E as Pe}from"./index-7e933ae4.js";import{E as Je}from"./index-eb678249.js";import{a as je,E as Fe}from"./index-8d133efc.js";import{E as Le}from"./index-e9e16697.js";import{E as Me}from"./index-94a82d50.js";import{E as Ae}from"./index-db9b8d96.js";import{E as He}from"./index-869e0480.js";import{a as Qe,E as We}from"./index-6bd50bb5.js";import{E as Ze}from"./index-cc473227.js";import{E as Ge}from"./index-88566e4e.js";import{_ as Xe}from"./_plugin-vue_export-helper-c27b6911.js";/* empty css                   *//* empty css                   *//* empty css                      *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                        *//* empty css                    *//* empty css                 *//* empty css                        *//* empty css                 */import"./article-082cb1c5.js";import"./index-faea7bd5.js";import"./index-1cbf3455.js";import"./event-9519ab40.js";import"./index-de053f2e.js";import"./index-d7f4b4bb.js";import"./error-78e43d3e.js";import"./index-ed9a1afd.js";import"./index-a2524300.js";import"./_Uint8Array-99b916e9.js";import"./_initCloneObject-e5a1aa13.js";import"./index-c3b3b83a.js";import"./isEqual-ba353d68.js";import"./flatten-94587e2b.js";import"./_isIterateeCall-f0970b1f.js";import"./debounce-f064e94e.js";import"./index-b519934c.js";import"./index-1d455165.js";import"./index-c4af56cf.js";import"./index-ed22fe56.js";import"./typescript-defaf979.js";import"./position-b298e95e.js";import"./scroll-e5463626.js";import"./index-1808e3f9.js";import"./index-02bf3820.js";import"./index-bf9de702.js";import"./strings-4ec3ae35.js";import"./index-4edf2cad.js";import"./validator-6838b9a3.js";import"./index-b1557f8a.js";import"./index-9a9de0a3.js";import"./vnode-85ccdc7f.js";import"./focus-trap-be36cfe9.js";import"./directive-013f0a4e.js";import"./index.vue_vue_type_script_setup_true_lang-eeb1c1a8.js";import"./index-c1ab0e3c.js";import"./index.vue_vue_type_style_index_0_lang-f0796d29.js";import"./attachment-9a932beb.js";/* empty css                 *//* empty css               *//* empty css                    *//* empty css                         */import"./index-bdd39755.js";import"./index-bf8db610.js";import"./sys-f9859bed.js";import"./index-760fce0d.js";import"./index-cbf0aee7.js";import"./index-91afef8c.js";import"./sortable.esm-be94e56d.js";import"./range-2819bbed.js";/* empty css                  */import"./index-c91f25f0.js";import"./common-111e3797.js";import"./common-2cf17469.js";import"./aria-adfa05c5.js";import"./castArray-11aea762.js";import"./index-3bc8a8be.js";import"./index-ee32f612.js";import"./index-9d53c87f.js";const Ye=E=>(ge("data-v-ce125976"),E=E(),ve(),E),Ke={class:"main-container flex-1"},et={class:"pl-[5px]"},tt={class:"text-white ml-[10px] flex items-center"},ot={class:"mr-[5px]"},lt=Ye(()=>r("div",{class:"flex-1"},null,-1)),nt={class:"full-container flex flex-row flex-1 bg-page"},at={class:"component-list w-[290px]"},it={class:"flex flex-row flex-wrap"},rt=["title","onClick"],st={class:"block text-base truncate"},pt={class:"preview-wrap flex-1 relative mt-[20px]"},mt={class:"diy-view-wrap w-[375px] shadow-lg mx-auto"},dt={class:"text-base block text-center truncate cursor-pointer h-[64px] leading-[84px]"},ut={class:"preview-block relative"},ct={class:"quick-action absolute text-center -right-[70px] top-[20px] w-[42px] rounded shadow-md"},_t=["src"],ft={class:"preview-iframe w-[375px] pt-[20px] px-[20px]"},gt={class:"font-bold text-xl mb-[40px]"},vt={class:"mb-[20px] flex flex-col"},bt={class:"mb-[10px]"},xt={class:"edit-attribute-wrap w-[400px]"},Ct={class:"card-header flex justify-between items-center"},yt={class:"title flex-1"},ht={key:0,class:"tab-wrap flex rounded-[50px] bg-gray-100 text-[14px]"},kt={class:"edit-component-wrap"},wt={class:"edit-attr-item-wrap"},Vt={class:"mb-[10px]"},Bt={class:"text-sm text-gray-400"},zt={key:1,class:"edit-attr-item-wrap"},Et={class:"mb-[10px]"},Ot={class:"text-sm text-gray-400"},Tt=ue({__name:"edit",setup(E){const e=Ne(),p=Se(),q=De();p.query.id=p.query.id||0,p.query.name=p.query.name||"",p.query.type=p.query.type||"",p.query.template=p.query.template||"",p.query.title=p.query.title||"",p.query.back=p.query.back||"/diy/list";const O=v(""),k=v(""),T=v(""),R=v(!1),S=v(!1),ee=v(0),U=p.query.back,w=v([]),J=W([]),j=v(""),F=v(J),te=m=>{},V=W({id:e.id,name:e.name,title:e.global.title,value:JSON.stringify({global:x(e.global),value:x(e.value)})}),I=v(!0),oe=()=>{I.value?q.push(U):Ie.confirm(a("leavePageTitleTips"),a("leavePageContentTips"),{confirmButtonText:a("confirm"),cancelButtonText:a("cancel"),type:"warning",autofocus:!1}).then(()=>{q.push(U)}).catch(()=>{})},le=Object.assign({"./components/edit-article.vue":Ce,"./components/edit-graphic-nav.vue":ye,"./components/edit-horz-blank.vue":he,"./components/edit-hot-area.vue":ke,"./components/edit-image-ads.vue":we,"./components/edit-member-info.vue":Ve,"./components/edit-page.vue":Be,"./components/edit-rubik-cube.vue":ze,"./components/edit-text.vue":Ee}),L={};for(const[m,o]of Object.entries(le)){const C=m.replace(/^\.\/(.*)\.\w+$/,"$1").split("/")[1];L[C]=o.default}ce(()=>e,(m,o)=>{let _={id:m.id,name:m.name,title:m.global.title,value:JSON.stringify({global:x(m.global),value:x(m.value)})};e.postMessage(),I.value=JSON.stringify(_)==JSON.stringify(V)},{deep:!0}),Oe({id:p.query.id,name:p.query.name,type:p.query.type,template:p.query.template,title:p.query.title}).then(m=>{let o=m.data;if(e.init(),e.id=o.id||0,e.name=o.name,e.type=o.type,e.typeName=o.type_name,e.templateName=o.template,e.isDefault=o.is_default,e.pageMode=o.mode,o.value){let _=JSON.parse(o.value);e.global=_.global,_.value.length&&(e.value=_.value)}else e.global.title=o.title;V.id=e.id,V.name=e.name,V.title=e.global.title,V.value=JSON.stringify({global:x(e.global),value:x(e.value)}),w.value=o.component;for(let _ in w.value){J.push(_);for(let C in w.value[_].list){let u=Ue(w.value[_].list[C]);u.id=e.generateRandom(),u.componentName=C,u.componentTitle=u.title,Object.assign(u,u.value),delete u.name,delete u.title,delete u.value,delete u.type,delete u.icon,e.components.push(u)}}k.value=o.domain_url.wap_domain,O.value=o.domain_url.wap_url,j.value=o.page,M()}),window.addEventListener("message",m=>{try{let o=JSON.parse(m.data);if(!o.type)return;switch(o.type){case"init":e.load=!0,e.postMessage();break;case"change":e.changeCurrentIndex(o.index,o.component);break;case"data":e.changeCurrentIndex(o.index,o.component),e.global=o.global,e.value=o.value;break}}catch(o){console.log("后台接受数据错误",o)}},!1);const ne=()=>{if(k.value.trim().length==0){$e({type:"warning",message:`${a("wapDomainPlaceholder")}`});return}O.value=k.value+"/wap",M(),qe.set({key:"wap_domain",data:O.value}),R.value=!0,S.value=!1},M=()=>{T.value=`${O.value}/${j.value}?mode=decorate`},ae=()=>{if(T.value){var m=new Date().getTime(),o=m-ee.value;o<1e3?(S.value=!0,R.value=!1,T.value=""):(S.value=!1,R.value=!0)}},B=v(!1),ie=()=>{if(!e.verify()||B.value)return;B.value=!0;let m={id:e.id,name:e.name,title:e.global.title,type:e.type,template:e.templateName,is_default:e.isDefault,is_change:I.value?0:1,value:JSON.stringify({global:x(e.global),value:x(e.value)})};(e.id?Te:Re)(m).then(_=>{B.value=!1,_.code==1&&(e.id?B.value=!1:q.push(U))}).catch(_=>{B.value=!1})};return(m,o)=>{const _=_e("ArrowLeft"),C=Pe,u=Je,re=xe,y=be,se=je,pe=Fe,$=Le,z=Me,me=Ae,D=He,g=Qe,b=Ze,A=We,de=Ge;return s(),h("div",Ke,[n(re,{class:"flex items-center h-[60px] bg-primary px-[20px]"},{default:i(()=>[r("div",{class:"text-white cursor-pointer flex items-center",onClick:oe},[n(C,{size:"14"},{default:i(()=>[n(_)]),_:1}),r("span",et,d(t(a)("back")),1)]),r("div",tt,[r("span",ot," ｜ "+d(t(a)("decorating"))+"："+d(t(e).typeName),1)]),lt,n(u,{onClick:o[0]||(o[0]=l=>ie())},{default:i(()=>[P(d(t(a)("save")),1)]),_:1})]),_:1}),r("div",nt,[r("div",at,[n($,{class:"px-[10px]"},{default:i(()=>[n(pe,{modelValue:F.value,"onUpdate:modelValue":o[1]||(o[1]=l=>F.value=l),onChange:te},{default:i(()=>[(s(!0),h(Z,null,G(w.value,(l,H)=>(s(),c(se,{key:H,title:l.title,name:H},{default:i(()=>[r("ul",it,[(s(!0),h(Z,null,G(l.list,(N,Q)=>(s(),h("li",{key:Q,class:"w-2/6 text-center cursor-pointer h-[75px]",title:N.title,onClick:Rt=>t(e).addComponent(Q,N)},[n(y,{name:N.icon,size:"23px"},null,8,["name"]),r("span",st,d(N.title),1)],8,rt))),128))])]),_:2},1032,["title","name"]))),128))]),_:1},8,["modelValue"])]),_:1})]),r("div",pt,[n($,null,{default:i(()=>[n(u,{class:"page-btn absolute right-[20px]",onClick:o[2]||(o[2]=l=>t(e).changeCurrentIndex(-99))},{default:i(()=>[P(d(t(a)("pageSet")),1)]),_:1}),r("div",mt,[r("div",{class:"preview-head bg-no-repeat bg-center bg-cover",onClick:o[3]||(o[3]=l=>t(e).changeCurrentIndex(-99))},[r("span",dt,d(t(e).global.title),1)]),r("div",ut,[r("ul",ct,[n(z,{effect:"light",content:t(a)("moveUpComponent"),placement:"right"},{default:i(()=>[n(y,{name:"iconfont-iconjiantoushang",size:"20px",class:"block cursor-pointer leading-[40px]",onClick:t(e).moveUpComponent},null,8,["onClick"])]),_:1},8,["content"]),n(z,{effect:"light",content:t(a)("moveDownComponent"),placement:"right"},{default:i(()=>[n(y,{name:"iconfont-iconjiantouxia",size:"20px",class:"block cursor-pointer leading-[40px]",onClick:t(e).moveDownComponent},null,8,["onClick"])]),_:1},8,["content"]),n(z,{effect:"light",content:t(a)("copyComponent"),placement:"right"},{default:i(()=>[n(y,{name:"iconfont-iconcopy-line",size:"20px",class:"block cursor-pointer leading-[40px]",onClick:t(e).copyComponent},null,8,["onClick"])]),_:1},8,["content"]),n(z,{effect:"light",content:t(a)("delComponent"),placement:"right"},{default:i(()=>[n(y,{name:"iconfont-icondelete-line",size:"20px",class:"block cursor-pointer leading-[40px]",onClick:t(e).delComponent},null,8,["onClick"])]),_:1},8,["content"]),n(z,{effect:"light",content:t(a)("resetComponent"),placement:"right"},{default:i(()=>[n(y,{name:"iconfont-iconloader-line",size:"20px",class:"block cursor-pointer leading-[40px]",onClick:t(e).resetComponent},null,8,["onClick"])]),_:1},8,["content"])]),X(r("iframe",{id:"previewIframe",src:T.value,frameborder:"0",class:"preview-iframe w-[375px]",onLoad:ae},null,40,_t),[[K,R.value]]),X(r("div",ft,[r("div",gt,d(t(a)("developTitle")),1),r("div",vt,[r("text",bt,d(t(a)("wapDomain")),1),n(me,{modelValue:k.value,"onUpdate:modelValue":o[4]||(o[4]=l=>k.value=l),placeholder:t(a)("wapDomainPlaceholder"),clearable:""},null,8,["modelValue","placeholder"])]),n(u,{type:"primary",onClick:ne},{default:i(()=>[P(d(t(a)("confirm")),1)]),_:1})],512),[[K,S.value]])])])]),_:1})]),r("div",xt,[n($,null,{default:i(()=>[n(de,{class:"box-card",shadow:"never"},{header:i(()=>[r("div",Ct,[r("span",yt,d(t(e).currentIndex==-99?t(a)("pageSet"):t(e).editComponent.componentTitle),1),t(e).currentComponent?(s(),h("div",ht,[r("span",{class:Y(["cursor-pointer rounded-[50px] py-[5px] px-[15px]",{"bg-primary text-white":t(e).editTab=="content"}]),onClick:o[5]||(o[5]=l=>t(e).editTab="content")},d(t(a)("tabEditContent")),3),r("span",{class:Y(["cursor-pointer rounded-[50px] py-[5px] px-[15px]",{"bg-primary text-white":t(e).editTab=="style"}]),onClick:o[6]||(o[6]=l=>t(e).editTab="style")},d(t(a)("tabEditStyle")),3)])):f("",!0)])]),default:i(()=>[r("div",kt,[t(e).currentComponent?(s(),c(fe(L[t(e).currentComponent]),{key:0,value:t(e).value[t(e).currentIndex]},{style:i(()=>[r("div",wt,[r("h3",Vt,d(t(a)("componentStyleTitle")),1),n(A,{"label-width":"80px",class:"px-[10px]"},{default:i(()=>[t(e).editComponent.ignore.indexOf("pageBgColor")==-1?(s(),c(g,{key:0,label:t(a)("bottomBgColor"),class:"display-block"},{default:i(()=>[n(D,{modelValue:t(e).editComponent.pageBgColor,"onUpdate:modelValue":o[7]||(o[7]=l=>t(e).editComponent.pageBgColor=l),"show-alpha":"",predefine:t(e).predefineColors},null,8,["modelValue","predefine"]),r("div",Bt,d(t(a)("bottomBgTips")),1)]),_:1},8,["label"])):f("",!0),t(e).editComponent.ignore.indexOf("componentBgColor")==-1?(s(),c(g,{key:1,label:t(a)("componentBgColor")},{default:i(()=>[n(D,{modelValue:t(e).editComponent.componentBgColor,"onUpdate:modelValue":o[8]||(o[8]=l=>t(e).editComponent.componentBgColor=l),"show-alpha":"",predefine:t(e).predefineColors},null,8,["modelValue","predefine"])]),_:1},8,["label"])):f("",!0),t(e).editComponent.ignore.indexOf("marginTop")==-1?(s(),c(g,{key:2,label:t(a)("marginTop")},{default:i(()=>[n(b,{modelValue:t(e).editComponent.margin.top,"onUpdate:modelValue":o[9]||(o[9]=l=>t(e).editComponent.margin.top=l),"show-input":"",size:"small",min:0,class:"ml-[10px] horz-blank-slider"},null,8,["modelValue"])]),_:1},8,["label"])):f("",!0),t(e).editComponent.ignore.indexOf("marginBottom")==-1?(s(),c(g,{key:3,label:t(a)("marginBottom")},{default:i(()=>[n(b,{modelValue:t(e).editComponent.margin.bottom,"onUpdate:modelValue":o[10]||(o[10]=l=>t(e).editComponent.margin.bottom=l),"show-input":"",size:"small",class:"ml-[10px] horz-blank-slider"},null,8,["modelValue"])]),_:1},8,["label"])):f("",!0),t(e).editComponent.ignore.indexOf("marginBoth")==-1?(s(),c(g,{key:4,label:t(a)("marginBoth")},{default:i(()=>[n(b,{modelValue:t(e).editComponent.margin.both,"onUpdate:modelValue":o[11]||(o[11]=l=>t(e).editComponent.margin.both=l),"show-input":"",size:"small",class:"ml-[10px] horz-blank-slider"},null,8,["modelValue"])]),_:1},8,["label"])):f("",!0),t(e).editComponent.ignore.indexOf("topRounded")==-1?(s(),c(g,{key:5,label:t(a)("topRounded")},{default:i(()=>[n(b,{modelValue:t(e).editComponent.topRounded,"onUpdate:modelValue":o[12]||(o[12]=l=>t(e).editComponent.topRounded=l),"show-input":"",size:"small",class:"ml-[10px] horz-blank-slider",max:50},null,8,["modelValue"])]),_:1},8,["label"])):f("",!0),t(e).editComponent.ignore.indexOf("bottomRounded")==-1?(s(),c(g,{key:6,label:t(a)("bottomRounded")},{default:i(()=>[n(b,{modelValue:t(e).editComponent.bottomRounded,"onUpdate:modelValue":o[13]||(o[13]=l=>t(e).editComponent.bottomRounded=l),"show-input":"",size:"small",class:"ml-[10px] horz-blank-slider",max:50},null,8,["modelValue"])]),_:1},8,["label"])):f("",!0)]),_:1})])]),_:1},8,["value"])):(s(),h("div",zt,[r("h3",Et,d(t(a)("componentStyleTitle")),1),n(A,{"label-width":"80px",class:"px-[10px]"},{default:i(()=>[t(e).editComponent.ignore.indexOf("pageBgColor")==-1?(s(),c(g,{key:0,label:t(a)("bottomBgColor"),class:"display-block"},{default:i(()=>[n(D,{modelValue:t(e).editComponent.pageBgColor,"onUpdate:modelValue":o[14]||(o[14]=l=>t(e).editComponent.pageBgColor=l),"show-alpha":"",predefine:t(e).predefineColors},null,8,["modelValue","predefine"]),r("div",Ot,d(t(a)("bottomBgTips")),1)]),_:1},8,["label"])):f("",!0),t(e).editComponent.ignore.indexOf("componentBgColor")==-1?(s(),c(g,{key:1,label:t(a)("componentBgColor")},{default:i(()=>[n(D,{modelValue:t(e).editComponent.componentBgColor,"onUpdate:modelValue":o[15]||(o[15]=l=>t(e).editComponent.componentBgColor=l),"show-alpha":"",predefine:t(e).predefineColors},null,8,["modelValue","predefine"])]),_:1},8,["label"])):f("",!0),t(e).editComponent.ignore.indexOf("marginTop")==-1?(s(),c(g,{key:2,label:t(a)("marginTop")},{default:i(()=>[n(b,{modelValue:t(e).editComponent.margin.top,"onUpdate:modelValue":o[16]||(o[16]=l=>t(e).editComponent.margin.top=l),"show-input":"",size:"small",min:0,class:"ml-[10px] horz-blank-slider"},null,8,["modelValue"])]),_:1},8,["label"])):f("",!0),t(e).editComponent.ignore.indexOf("marginBottom")==-1?(s(),c(g,{key:3,label:t(a)("marginBottom")},{default:i(()=>[n(b,{modelValue:t(e).editComponent.margin.bottom,"onUpdate:modelValue":o[17]||(o[17]=l=>t(e).editComponent.margin.bottom=l),"show-input":"",size:"small",class:"ml-[10px] horz-blank-slider"},null,8,["modelValue"])]),_:1},8,["label"])):f("",!0),t(e).editComponent.ignore.indexOf("marginBoth")==-1?(s(),c(g,{key:4,label:t(a)("marginBoth")},{default:i(()=>[n(b,{modelValue:t(e).editComponent.margin.both,"onUpdate:modelValue":o[18]||(o[18]=l=>t(e).editComponent.margin.both=l),"show-input":"",size:"small",class:"ml-[10px] horz-blank-slider"},null,8,["modelValue"])]),_:1},8,["label"])):f("",!0),t(e).editComponent.ignore.indexOf("topRounded")==-1?(s(),c(g,{key:5,label:t(a)("topRounded")},{default:i(()=>[n(b,{modelValue:t(e).editComponent.topRounded,"onUpdate:modelValue":o[19]||(o[19]=l=>t(e).editComponent.topRounded=l),"show-input":"",size:"small",class:"ml-[10px] horz-blank-slider",max:50},null,8,["modelValue"])]),_:1},8,["label"])):f("",!0),t(e).editComponent.ignore.indexOf("bottomRounded")==-1?(s(),c(g,{key:6,label:t(a)("bottomRounded")},{default:i(()=>[n(b,{modelValue:t(e).editComponent.bottomRounded,"onUpdate:modelValue":o[20]||(o[20]=l=>t(e).editComponent.bottomRounded=l),"show-input":"",size:"small",class:"ml-[10px] horz-blank-slider",max:50},null,8,["modelValue"])]),_:1},8,["label"])):f("",!0)]),_:1})]))])]),_:1})]),_:1})])])])}}});const Pl=Xe(Tt,[["__scopeId","data-v-ce125976"]]);export{Pl as default};
