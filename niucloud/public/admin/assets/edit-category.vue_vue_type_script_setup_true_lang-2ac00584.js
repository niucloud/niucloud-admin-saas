import{d as I,r as g,R as U,c as P,e as E,v as V,x as r,g as S,y as i,i as h,A as p,B as f,u as l,Q as j}from"./base-04829be5.js";/* empty css                   *//* empty css                   *//* empty css                  *//* empty css                     *//* empty css                 *//* empty css                        *//* empty css                 */import{t as o}from"./index-043d021e.js";import{e as O,a as T,b as k}from"./article-082cb1c5.js";import{E as q}from"./index-db9b8d96.js";import{a as G,E as L}from"./index-6bd50bb5.js";import{E as M}from"./index-ee32f612.js";import{E as Q,b as $}from"./index-1cbf3455.js";import{E as z}from"./index-eb678249.js";import{E as H}from"./index-b1557f8a.js";import{v as J}from"./directive-013f0a4e.js";const K={class:"dialog-footer"},_e=I({__name:"edit-category",emits:["complete"],setup(W,{expose:C,emit:x}){let c="",n=g(!1);const m=g(!0),v={category_id:"",name:"",sort:"",is_show:1},a=U({...v}),b=g(),D=P(()=>({name:[{required:!0,message:o("namePlaceholder"),trigger:"blur"},{validator:(d,e,t)=>{e.length>20&&t(new Error(o("nameMax"))),t()},trigger:"blur"}],sort:[{validator:(d,e,t)=>{(e===""||isNaN(e))&&t(new Error(o("sortNumber"))),parseInt(e)>1e4&&t(new Error(o("sortBetween"))),t()},trigger:"blur"}]})),N=async d=>{if(m.value||!d)return;let e=a.category_id?O:T;await d.validate(async t=>{t&&(m.value=!0,e(a).then(_=>{m.value=!1,n.value=!1,x("complete")}).catch(_=>{m.value=!1}))})};return C({showDialog:n,setFormData:async(d=null)=>{if(m.value=!0,Object.assign(a,v),c=o("addArticleCategory"),d){c=o("updateArticleCategory");const e=await(await k(d.category_id)).data;Object.keys(a).forEach(t=>{e[t]!=null&&(a[t]=e[t])})}m.value=!1}}),(d,e)=>{const t=q,u=G,_=M,w=Q,R=$,A=L,y=z,B=H,F=J;return E(),V(B,{modelValue:l(n),"onUpdate:modelValue":e[5]||(e[5]=s=>h(n)?n.value=s:n=s),title:l(c),width:"500px","destroy-on-close":!0},{footer:r(()=>[S("span",K,[i(y,{onClick:e[3]||(e[3]=s=>h(n)?n.value=!1:n=!1)},{default:r(()=>[p(f(l(o)("cancel")),1)]),_:1}),i(y,{type:"primary",loading:m.value,onClick:e[4]||(e[4]=s=>N(b.value))},{default:r(()=>[p(f(l(o)("confirm")),1)]),_:1},8,["loading"])])]),default:r(()=>[j((E(),V(A,{model:a,"label-width":"90px",ref_key:"formRef",ref:b,rules:l(D),class:"page-form"},{default:r(()=>[i(u,{label:l(o)("name"),prop:"name"},{default:r(()=>[i(t,{modelValue:a.name,"onUpdate:modelValue":e[0]||(e[0]=s=>a.name=s),clearable:"",placeholder:l(o)("namePlaceholder"),class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),i(u,{label:l(o)("sort"),prop:"sort"},{default:r(()=>[i(_,{modelValue:a.sort,"onUpdate:modelValue":e[1]||(e[1]=s=>a.sort=s),min:0},null,8,["modelValue"])]),_:1},8,["label"]),i(u,{label:l(o)("isShow")},{default:r(()=>[i(R,{modelValue:a.is_show,"onUpdate:modelValue":e[2]||(e[2]=s=>a.is_show=s),placeholder:l(o)("isShowPlaceholder")},{default:r(()=>[i(w,{label:1},{default:r(()=>[p(f(l(o)("show")),1)]),_:1}),i(w,{label:0},{default:r(()=>[p(f(l(o)("hidden")),1)]),_:1})]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model","rules"])),[[F,m.value]])]),_:1},8,["modelValue","title"])}}});export{_e as _};
