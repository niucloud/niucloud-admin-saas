import{a2 as W,d as A,K as F,n as q,m as H,r as I,c as n,a as t,u as i,t as r,e as _,w as h,A as g,F as $,G as j,S as M,y as R,B as E,a3 as G,E as O,W as P,a4 as T,$ as J,p as Q,g as X,h as p,R as V,i as Y,a5 as Z,a6 as ee,U as v,a1 as te}from"./index-4ce69858.js";/* empty css                   *//* empty css                      *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                *//* empty css                  */import{_ as se}from"./icon-addon-339e16d0.js";import{_ as oe}from"./member_head-a897263d.js";import{_ as ae}from"./empty-77b60adb.js";import{a as ne}from"./sys-e410b79c.js";import{g as ie}from"./addon-74eac974.js";import{_ as pe}from"./_plugin-vue_export-helper-c27b6911.js";function re(l){return W.get("home/site",{params:l})}const y=l=>(Q("data-v-4e91afee"),l=l(),X(),l),le={class:"flex justify-between items-center py-[24px] pl-[62px] pr-[64px] home-head"},ce={class:"flex items-center"},de=["src"],_e={key:1,class:"w-[32x] h-[32px] rounded-full",src:se,alt:""},me={class:"ml-[10px] text-[16px] font-bold"},xe={class:"flex items-center"},ue={class:"mr-[12px] text-[14px]"},fe={class:"w-[1200px] m-auto mt-[62px]"},he={class:"flex justify-between items-center"},ge=y(()=>t("span",{class:"text-[24px] font-bold"},"站点列表",-1)),ve={class:"flex justify-between items-center mt-[18px]"},ye={class:"flex items-center flex-wrap text-[14px] w-[800px]"},we=["onClick"],ke={class:"min-h-[580px]"},be={class:"flex flex-wrap mt-[30px]"},Ce=["onClick"],Se={class:"flex items-center px-[24px] pt-[22px] pb-[16px] bg-[#F0F2F4] home-item-head"},Fe=["src"],Ie={key:1,class:"w-[48px] h-[48px] mr-[15px] rounded-[50%] overflow-hidden",src:oe},$e={class:"flex flex-col flex-1 justify-center"},je={class:"flex items-center flex-wrap"},Ee={class:"text-[16px] text-[#000] max-w-[145px] font-bold truncate mr-[10px]"},Ve={key:0,class:"flex items-center justify-center min-w-[42px] h-[18px] bg-[#FF5500] rounded-tl-md rounded-br-md items-tab"},ze={class:"text-[12px] text-[#fff]"},De={class:"text-[12px] mt-[3px] text-[#555]"},Be={class:"px-[24px] py-[20px] text-[#6D7278]"},Ue={class:"text-[14px]"},Ke={class:"text-[14px] mt-[2px]"},Le={key:0,class:"m-auto"},Ne=y(()=>t("img",{src:ae},null,-1)),We=y(()=>t("p",{class:"text-center text-gray-400"},"暂无站点",-1)),Ae=[Ne,We],qe={class:"mt-[16px] flex justify-end"},He=A({__name:"index",setup(l){const w=F(),o=q({params:{keywords:"",page:1,limit:12,app:"",sort:!1},loading:!1,tableData:[],total:0}),{params:m,loading:k,tableData:b}=H(o),c=(a=1)=>{o.params.page=a,o.loading=!0,re(o.params).then(s=>{o.tableData=s.data.data,o.total=s.data.total,o.loading=!1}).catch(()=>{o.loading=!1})};c();const C=a=>{o.params.app=a,c()},x=I({icon:"",site_name:""});(()=>{ne().then(a=>{x.value=a.data})})();const z=a=>{v.set({key:"siteId",data:a.site_id}),v.set({key:"siteInfo",data:a}),v.set({key:"comparisonSiteIdStorage",data:a.site_id}),F().$patch(s=>{s.siteInfo=s}),location.href=`${location.origin}/site/`},D=()=>{w.logout()},S=I([]);ie().then(({data:a})=>{const s=[];Object.keys(a).forEach(f=>{const u=a[f];u.type=="app"&&s.push(u)}),S.value=s}).catch();const B=()=>{G("加班加点研发中...")};return(a,s)=>{const f=O,u=te,U=P,K=T,L=J;return p(),n("div",null,[t("div",le,[t("div",ce,[x.value.icon?(p(),n("img",{key:0,class:"w-[32x] h-[32px] rounded-full",src:i(V)(x.value.icon),alt:""},null,8,de)):(p(),n("img",_e)),t("span",me,r(x.value.site_name),1)]),t("div",xe,[t("span",ue,r(i(w).userInfo.username),1),t("span",{onClick:s[0]||(s[0]=e=>D()),class:"text-[14px] cursor-pointer text-[var(--el-color-primary)]"},"退出")])]),t("div",fe,[t("div",he,[ge,_(f,{type:"primary",class:"w-[90px] !h-[34px]",onClick:B},{default:h(()=>[Y("创建站点")]),_:1})]),t("div",ve,[t("div",ye,[t("span",{class:g(["mr-[12px] cursor-pointer",{"text-[var(--el-color-primary)]":i(m).app==""}]),onClick:s[1]||(s[1]=e=>C(""))},"所有应用",2),(p(!0),n($,null,j(S.value,(e,d)=>(p(),n("span",{class:g(["mr-[12px] cursor-pointer",{"text-[var(--el-color-primary)]":i(m).app==e.key}]),onClick:N=>C(e.key),key:d},r(e.title),11,we))),128))]),_(U,{modelValue:i(m).keywords,"onUpdate:modelValue":s[3]||(s[3]=e=>i(m).keywords=e),class:"!w-[300px] !h-[34px]",placeholder:"输入要搜索的站点名称",onKeyup:M(a.query,["enter","native"])},{suffix:h(()=>[_(u,{onClick:s[2]||(s[2]=Z(e=>c(),["stop"])),class:"cursor-pointer"},{default:h(()=>[_(i(ee))]),_:1})]),_:1},8,["modelValue","onKeyup"])]),t("div",ke,[R((p(),n("div",be,[(p(!0),n($,null,j(i(b),(e,d)=>(p(),n("div",{key:d,onClick:N=>z(e),class:g(["home-item w-[285px] box-border mb-[20px] cursor-pointer",{"mr-[20px]":d==0||(d+1)%4!=0}])},[t("div",Se,[e.logo?(p(),n("img",{key:0,class:"w-[48px] h-[48px] mr-[15px] rounded-[50%] overflow-hidden",src:i(V)(e.logo)},null,8,Fe)):(p(),n("img",Ie)),t("div",$e,[t("div",je,[t("span",Ee,r(e.site_name),1),e.app_name?(p(),n("div",Ve,[t("span",ze,r(e.app_name),1)])):E("",!0)]),t("span",De,r(e.create_time?e.create_time.split(" ")[0]:"--")+" 到 "+r(e.expire_time?e.expire_time.split(" ")[0]:"--"),1)])]),t("div",Be,[t("p",Ue,"站点编号："+r(e.site_id),1),t("p",Ke,"站点套餐："+r(e.group_name||"--"),1)])],10,Ce))),128)),!i(b).length&&!i(k)?(p(),n("div",Le,Ae)):E("",!0)])),[[L,i(k)]])]),t("div",qe,[_(K,{"current-page":o.params.page,"onUpdate:current-page":s[4]||(s[4]=e=>o.params.page=e),"page-size":o.params.limit,"onUpdate:page-size":s[5]||(s[5]=e=>o.params.limit=e),layout:"total, sizes, prev, pager, next, jumper",total:o.total,onSizeChange:s[6]||(s[6]=e=>c()),onCurrentChange:c,"hide-on-single-page":!0},null,8,["current-page","page-size","total"])])])])}}});const pt=pe(He,[["__scopeId","data-v-4e91afee"]]);export{pt as default};
