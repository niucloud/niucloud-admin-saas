import{d as B,r as c,R as F,c as R,e as v,v as y,x as m,g as C,y as d,i as b,A as V,B as h,u as t,Q as U}from"./base-9962c822.js";/* empty css                   *//* empty css                   *//* empty css                  *//* empty css                */import"./el-form-item-4ed993c7.js";/* empty css                 */import{t as l}from"./index-5516aed6.js";import{e as q,a as I,g as N}from"./dict-5909722d.js";import{E as j}from"./index-19251c17.js";import{a as O,E as A}from"./index-7c833df7.js";import{E as L}from"./index-7ab57426.js";import{E as Q}from"./index-e2acd187.js";import{v as S}from"./directive-f75d4a7d.js";const T={class:"dialog-footer"},re=B({__name:"edit",emits:["complete"],setup($,{expose:D,emit:k}){let r=c(!1);const i=c(!1),f={id:"",name:"",key:"",memo:""},a=F({...f}),_=c(),w=R(()=>({name:[{required:!0,message:l("namePlaceholder"),trigger:"blur"}],key:[{required:!0,message:l("keyPlaceholder"),trigger:"blur"}],data:[{required:!0,message:l("dataPlaceholder"),trigger:"blur"}]})),E=async n=>{if(i.value||!n)return;let e=a.id?q:I;await n.validate(async s=>{s&&(i.value=!0,e(a).then(p=>{i.value=!1,r.value=!1,k("complete")}).catch(p=>{i.value=!1}))})};return D({showDialog:r,setFormData:async(n=null)=>{if(Object.assign(a,f),i.value=!0,n){const e=await(await N(n.id)).data;e&&Object.keys(a).forEach(s=>{e[s]!=null&&(a[s]=e[s])})}i.value=!1}}),(n,e)=>{const s=j,u=O,p=A,g=L,x=Q,P=S;return v(),y(x,{modelValue:t(r),"onUpdate:modelValue":e[5]||(e[5]=o=>b(r)?r.value=o:r=o),title:a.id?t(l)("updateDict"):t(l)("addDict"),width:"480",class:"diy-dialog-wrap","destroy-on-close":!0},{footer:m(()=>[C("span",T,[d(g,{onClick:e[3]||(e[3]=o=>b(r)?r.value=!1:r=!1)},{default:m(()=>[V(h(t(l)("cancel")),1)]),_:1}),d(g,{type:"primary",loading:i.value,onClick:e[4]||(e[4]=o=>E(_.value))},{default:m(()=>[V(h(t(l)("confirm")),1)]),_:1},8,["loading"])])]),default:m(()=>[U((v(),y(p,{model:a,"label-width":"120px",ref_key:"formRef",ref:_,rules:t(w),class:"page-form"},{default:m(()=>[d(u,{label:t(l)("name"),prop:"name"},{default:m(()=>[d(s,{modelValue:a.name,"onUpdate:modelValue":e[0]||(e[0]=o=>a.name=o),clearable:"",placeholder:t(l)("namePlaceholder"),class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),d(u,{label:t(l)("key"),prop:"key"},{default:m(()=>[d(s,{modelValue:a.key,"onUpdate:modelValue":e[1]||(e[1]=o=>a.key=o),clearable:"",placeholder:t(l)("keyPlaceholder"),class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),d(u,{label:t(l)("memo")},{default:m(()=>[d(s,{modelValue:a.memo,"onUpdate:modelValue":e[2]||(e[2]=o=>a.memo=o),type:"textarea",clearable:"",placeholder:t(l)("memoPlaceholder"),class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model","rules"])),[[P,i.value]])]),_:1},8,["modelValue","title"])}}});export{re as _};
