import"./base-962c0c23.js";/* empty css                   */import{E as B}from"./el-overlay-60700377.js";/* empty css                  *//* empty css                     *//* empty css                 */import{t as a}from"./index-105fbad0.js";import{u as C,s as O,t as P}from"./member-21f99754.js";import{E as R}from"./index-93f2c618.js";import{a as U,E as I}from"./index-61c777fa.js";import{E as T}from"./index-bba9e58c.js";import{v as j}from"./directive-c0c3e9a3.js";import{d as k,r as c,M as q,c as S,b as g,m as V,p as n,f as $,q as i,i as w,v as y,x as h,u as t,L as z}from"./runtime-core.esm-bundler-dc7a07d7.js";const A={class:"dialog-footer"},se=k({__name:"edit-label",emits:["complete"],setup(G,{expose:E,emit:x}){let s=c(!1);const m=c(!1);let p="";const b={label_id:"",label_name:"",memo:"",sort:0},o=q({...b}),_=c(),D=S(()=>({label_name:[{required:!0,message:a("labelNamePlaceholder"),trigger:"blur"}],sort:[{validator:L,trigger:"blur"}]})),L=(d,e,l)=>{e<0?l(new Error(a("sortVerifyOne"))):e.toString().indexOf(".")!=-1?l(new Error(a("sortVerifyTwo"))):l()},M=async d=>{if(m.value||!d)return;let e=o.label_id?C:O;await d.validate(async l=>{l&&(m.value=!0,e(o).then(f=>{m.value=!1,s.value=!1,x("complete")}).catch(f=>{m.value=!1}))})};return E({showDialog:s,setFormData:async(d=null)=>{if(m.value=!0,Object.assign(o,b),p=a("addMemberLabel"),d){p=a("updateMemberLabel");const e=await(await P(d.label_id)).data;e&&Object.keys(o).forEach(l=>{e[l]!=null&&(o[l]=e[l])})}m.value=!1}}),(d,e)=>{const l=R,u=U,f=I,v=T,N=B,F=j;return g(),V(N,{modelValue:t(s),"onUpdate:modelValue":e[5]||(e[5]=r=>w(s)?s.value=r:s=r),title:t(p),width:"500px","destroy-on-close":!0},{footer:n(()=>[$("span",A,[i(v,{onClick:e[3]||(e[3]=r=>w(s)?s.value=!1:s=!1)},{default:n(()=>[y(h(t(a)("cancel")),1)]),_:1}),i(v,{type:"primary",loading:m.value,onClick:e[4]||(e[4]=r=>M(_.value))},{default:n(()=>[y(h(t(a)("confirm")),1)]),_:1},8,["loading"])])]),default:n(()=>[z((g(),V(f,{model:o,"label-width":"90px",ref_key:"formRef",ref:_,rules:t(D),class:"page-form"},{default:n(()=>[i(u,{label:t(a)("labelName"),prop:"label_name"},{default:n(()=>[i(l,{modelValue:o.label_name,"onUpdate:modelValue":e[0]||(e[0]=r=>o.label_name=r),clearable:"",placeholder:t(a)("labelNamePlaceholder"),class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),i(u,{label:t(a)("memo")},{default:n(()=>[i(l,{modelValue:o.memo,"onUpdate:modelValue":e[1]||(e[1]=r=>o.memo=r),type:"textarea",rows:"4",clearable:"",placeholder:t(a)("memoPlaceholder"),class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),i(u,{label:t(a)("sort"),prop:"sort"},{default:n(()=>[i(l,{modelValue:o.sort,"onUpdate:modelValue":e[2]||(e[2]=r=>o.sort=r),clearable:"",placeholder:t(a)("sortPlaceholder"),class:"input-width",type:"number"},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model","rules"])),[[F,m.value]])]),_:1},8,["modelValue","title"])}}});export{se as _};
