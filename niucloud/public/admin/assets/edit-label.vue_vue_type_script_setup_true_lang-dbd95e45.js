import{d as M,r as c,R,c as C,e as g,v as V,x as i,g as O,y as n,i as w,A as y,B as h,u as t,Q as P}from"./base-9962c822.js";/* empty css                   *//* empty css                   *//* empty css                  *//* empty css                */import"./el-form-item-4ed993c7.js";/* empty css                 */import{t as a}from"./index-5516aed6.js";import{u as U,s as I,t as T}from"./member-8490bdef.js";import{E as j}from"./index-19251c17.js";import{a as k,E as S}from"./index-7c833df7.js";import{E as q}from"./index-7ab57426.js";import{E as A}from"./index-e2acd187.js";import{v as Q}from"./directive-f75d4a7d.js";const $={class:"dialog-footer"},me=M({__name:"edit-label",emits:["complete"],setup(z,{expose:E,emit:x}){let s=c(!1);const m=c(!1);let p="";const b={label_id:"",label_name:"",memo:"",sort:0},o=R({...b}),_=c(),D=C(()=>({label_name:[{required:!0,message:a("labelNamePlaceholder"),trigger:"blur"}],sort:[{validator:L,trigger:"blur"}]})),L=(d,e,l)=>{e<0?l(new Error(a("sortVerifyOne"))):e.toString().indexOf(".")!=-1?l(new Error(a("sortVerifyTwo"))):l()},N=async d=>{if(m.value||!d)return;let e=o.label_id?U:I;await d.validate(async l=>{l&&(m.value=!0,e(o).then(f=>{m.value=!1,s.value=!1,x("complete")}).catch(f=>{m.value=!1}))})};return E({showDialog:s,setFormData:async(d=null)=>{if(m.value=!0,Object.assign(o,b),p=a("addMemberLabel"),d){p=a("updateMemberLabel");const e=await(await T(d.label_id)).data;e&&Object.keys(o).forEach(l=>{e[l]!=null&&(o[l]=e[l])})}m.value=!1}}),(d,e)=>{const l=j,u=k,f=S,v=q,B=A,F=Q;return g(),V(B,{modelValue:t(s),"onUpdate:modelValue":e[5]||(e[5]=r=>w(s)?s.value=r:s=r),title:t(p),width:"500px","destroy-on-close":!0},{footer:i(()=>[O("span",$,[n(v,{onClick:e[3]||(e[3]=r=>w(s)?s.value=!1:s=!1)},{default:i(()=>[y(h(t(a)("cancel")),1)]),_:1}),n(v,{type:"primary",loading:m.value,onClick:e[4]||(e[4]=r=>N(_.value))},{default:i(()=>[y(h(t(a)("confirm")),1)]),_:1},8,["loading"])])]),default:i(()=>[P((g(),V(f,{model:o,"label-width":"90px",ref_key:"formRef",ref:_,rules:t(D),class:"page-form"},{default:i(()=>[n(u,{label:t(a)("labelName"),prop:"label_name"},{default:i(()=>[n(l,{modelValue:o.label_name,"onUpdate:modelValue":e[0]||(e[0]=r=>o.label_name=r),clearable:"",placeholder:t(a)("labelNamePlaceholder"),class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),n(u,{label:t(a)("memo")},{default:i(()=>[n(l,{modelValue:o.memo,"onUpdate:modelValue":e[1]||(e[1]=r=>o.memo=r),type:"textarea",rows:"4",clearable:"",placeholder:t(a)("memoPlaceholder"),class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),n(u,{label:t(a)("sort"),prop:"sort"},{default:i(()=>[n(l,{modelValue:o.sort,"onUpdate:modelValue":e[2]||(e[2]=r=>o.sort=r),clearable:"",placeholder:t(a)("sortPlaceholder"),class:"input-width",type:"number"},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model","rules"])),[[F,m.value]])]),_:1},8,["modelValue","title"])}}});export{me as _};
