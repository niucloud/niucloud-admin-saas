import{d as K,r as h,R as te,e as l,f as m,y as i,x as p,i as O,g as n,u as t,B as M,A as G,V as se,bl as le,bm as ae,c as q,o as _e,v as T,F as I,H as w,Q as oe,z as W,n as B,w as fe,j as xe,bo as he,Z as ve}from"./base-9962c822.js";import{E as re,a as ge,c as ye,d as we}from"./index-c4e33d8d.js";/* empty css                     *//* empty css                   *//* empty css                  */import{_ as Z}from"./index.vue_vue_type_script_setup_true_lang-780dd221.js";import{G as be,g as ne}from"./index-5c4817f4.js";/* empty css                */import"./el-form-item-4ed993c7.js";/* empty css                 *//* empty css                         *//* empty css                  *//* empty css                  */import{ax as ke}from"./index-57446bef.js";import{u as ie,d as Ee}from"./index-38fee8c5.js";import{s as Ce}from"./personal-302ef1ba.js";import{t as f,u as pe}from"./index-6e46fb55.js";/* empty css                        */import{E as $e}from"./index-886a23f9.js";import{a as Se,b as Ve,E as Ie}from"./index-3427fe17.js";import{E as ce}from"./index-e2acd187.js";import{E as Te}from"./index-fc574226.js";import{E as Me}from"./index-19251c17.js";import{a as Fe,E as He}from"./index-7c833df7.js";import{E as de}from"./index-7ab57426.js";import{_ as X}from"./_plugin-vue_export-helper-c27b6911.js";import{u as Y}from"./system-1108e5c1.js";import{b as ue,u as me}from"./vue-router-d7e63612.js";import{a as j}from"./storage-0874d153.js";import{a8 as Pe,a9 as Re,aa as De}from"./sys-361f7d2c.js";/* empty css                    */import{a as Le,E as Ne}from"./index-da093955.js";import{u as Ue}from"./style-18eab70b.js";import{E as Ae}from"./index-2ee99ba1.js";/* empty css                */import"./pinia-a9fc3924.js";import"./index-2cabf788.js";import"./typescript-defaf979.js";import"./index-c98e204a.js";import"./index-ab38878f.js";import"./index-71b7d8f4.js";import"./focus-trap-d0fc8554.js";import"./dropdown-ccb689be.js";import"./index-df16e899.js";import"./index-91fda20f.js";import"./error-78e43d3e.js";import"./scroll-d85c8f38.js";import"./vnode-562dae50.js";import"./event-9519ab40.js";import"./index-1370ab44.js";import"./index-ec548bfb.js";import"./index-6b77b11a.js";import"./_Uint8Array-c92ffa25.js";import"./_initCloneObject-41dd9efb.js";import"./strings-66191554.js";const Q=F=>(le("data-v-827cff93"),F=F(),ae(),F),ze={class:"userinfo flex h-full items-center"},je={class:"user-name pl-[8px]"},Be=Q(()=>n("div",{class:"flex items-center leading-[1] py-[5px]"},[n("span",{class:"iconfont iconshezhi1 ml-[4px] !text-[14px] mr-[10px]"}),n("span",{class:"text-[14px]"},"账号设置")],-1)),We=Q(()=>n("div",{class:"flex items-center leading-[1] py-[5px]"},[n("span",{class:"iconfont iconshouquanxinxi2 ml-[4px] !text-[14px] mr-[10px]"}),n("span",{class:"text-[14px]"},"授权信息")],-1)),qe=Q(()=>n("div",{class:"flex items-center leading-[1] py-[5px]"},[n("span",{class:"iconfont iconxiugai ml-[4px] !text-[14px] mr-[10px]"}),n("span",{class:"text-[14px]"},"修改密码")],-1)),Oe=Q(()=>n("div",{class:"flex items-center leading-[1] py-[5px]"},[n("span",{class:"iconfont icontuichudenglu ml-[4px] !text-[14px] mr-[10px]"}),n("span",{class:"text-[14px]"},"退出登录")],-1)),Je={class:"form-tip"},Ge={class:"dialog-footer"},Ke=K({__name:"user-info",setup(F){const P=ie(),N=_=>{switch(_){case"logout":P.logout();break}},H=()=>{P.logout()};let x=h(!1);const R=h();let u=te({original_password:"",password:"",password_copy:""});const C=te({original_password:[{required:!0,message:f("originalPasswordPlaceholder"),trigger:"blur"}],password:[{required:!0,message:f("passwordPlaceholder"),trigger:"blur"}],password_copy:[{required:!0,message:f("passwordPlaceholder"),trigger:"blur"}]}),$=_=>{_&&_.validate(s=>{if(s){let v="";if(u.password&&!u.original_password&&(v=f("originalPasswordHint")),u.password&&u.original_password&&!u.password_copy&&(v=f("newPasswordHint")),u.password&&u.original_password&&u.password_copy&&u.password!=u.password_copy&&(v=f("doubleCipherHint")),v){Te({type:"error",message:v});return}Ce(u).then(S=>{x.value=!1})}else return!1})};return(_,s)=>{const v=$e,S=Z,U=se("router-link"),g=Se,k=Ve,D=Ie,E=Me,A=Fe,z=He,y=de,c=ce;return l(),m("div",null,[i(D,{onCommand:N,tabindex:1},{dropdown:p(()=>[i(k,null,{default:p(()=>[i(g,null,{default:p(()=>[i(U,{to:"/user/center"},{default:p(()=>[Be]),_:1})]),_:1}),i(g,null,{default:p(()=>[i(U,{to:"/tools/authorize"},{default:p(()=>[We]),_:1})]),_:1}),i(g,{onClick:s[0]||(s[0]=e=>O(x)?x.value=!0:x=!0)},{default:p(()=>[qe]),_:1}),i(g,{onClick:H},{default:p(()=>[Oe]),_:1})]),_:1})]),default:p(()=>[n("div",ze,[i(v,{size:25,icon:t(ke)},null,8,["icon"]),n("div",je,M(t(P).userInfo.username),1),i(S,{name:"element-ArrowDown",class:"ml-[5px]"})])]),_:1}),i(c,{modelValue:t(x),"onUpdate:modelValue":s[6]||(s[6]=e=>O(x)?x.value=e:x=e),width:"450px",title:"修改密码","before-close":_.handleClose},{footer:p(()=>[n("span",Ge,[i(y,{onClick:s[4]||(s[4]=e=>O(x)?x.value=!1:x=!1)},{default:p(()=>[G(M(t(f)("cancel")),1)]),_:1}),i(y,{type:"primary",onClick:s[5]||(s[5]=e=>$(R.value))},{default:p(()=>[G(M(t(f)("save")),1)]),_:1})])]),default:p(()=>[n("div",null,[i(z,{model:t(u),"label-width":"90px",ref_key:"formRef",ref:R,rules:C,class:"page-form"},{default:p(()=>[i(A,{label:t(f)("originalPassword"),prop:"original_password"},{default:p(()=>[i(E,{modelValue:t(u).original_password,"onUpdate:modelValue":s[1]||(s[1]=e=>t(u).original_password=e),type:"password",placeholder:t(f)("originalPasswordPlaceholder"),clearable:"",class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),i(A,{label:t(f)("newPassword"),prop:"password"},{default:p(()=>[i(E,{modelValue:t(u).password,"onUpdate:modelValue":s[2]||(s[2]=e=>t(u).password=e),type:"password",placeholder:t(f)("passwordPlaceholder"),clearable:"",class:"input-width"},null,8,["modelValue","placeholder"]),n("div",Je,M(t(f)("passwordTip")),1)]),_:1},8,["label"]),i(A,{label:t(f)("passwordCopy"),prop:"password_copy"},{default:p(()=>[i(E,{modelValue:t(u).password_copy,"onUpdate:modelValue":s[3]||(s[3]=e=>t(u).password_copy=e),type:"password",placeholder:t(f)("passwordPlaceholder"),clearable:"",class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model","rules"])])]),_:1},8,["modelValue","before-close"])])}}});const Qe=X(Ke,[["__scopeId","data-v-827cff93"]]),ee=F=>(le("data-v-b4fb64a7"),F=F(),ae(),F),Ze={class:"flex items-center text-[14px] leading-[1]"},Xe=ee(()=>n("span",{class:"mx-2 text-[#4F5563] mx-[15px]"},"|",-1)),Ye=ee(()=>n("span",{class:"mx-2 text-[#4F5563] mx-[15px]"},"|",-1)),et=ee(()=>n("span",{class:"mx-2 text-[#4F5563] mx-[15px]"},"|",-1)),tt={class:"right-panel h-full flex items-center justify-end"},ot=["title"],nt={class:"navbar-item flex items-center h-full cursor-pointer"},st={class:"dialog-footer"},lt={class:"flex flex-wrap"},at=["onClick"],rt=["onClick"],it={class:"dialog-footer"},pt=K({__name:"index",setup(F){const P=ue(),N=j.get("app_type");be();const H=Y(),x=pe(),R=me(),u=h(window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth);q(()=>H.dark);let C=h(!0);(()=>{Pe().then(y=>{C.value=y.data.app_debug}).catch(()=>{})})();const _=h(!1),s=h(""),v=h("");j.get("comparisonTokenStorage")&&(s.value=j.get("comparisonTokenStorage")),j.get("comparisonSiteIdStorage")&&(v.value=j.get("comparisonSiteIdStorage")),document.addEventListener("visibilitychange",y=>{document.visibilityState==="visible"&&(v.value!=j.get("siteId")||s.value!=j.get("token"))&&(_.value=!0)});const S=()=>{_.value=!1,location.reload()};_e(()=>{window.onresize=()=>(()=>{u.value=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth})()});const U=()=>{x.routeRefreshTag&&x.refreshRouterView()};q(()=>{const y=R.matched.filter(c=>c.meta.title);return y[0]&&y[0].path=="/"&&y.splice(0,1),y});const g=h(),k=h(!1),D=()=>{Re().then(y=>{k.value=!0,g.value=y.data;for(let c=0;c<g.value.length;c++)g.value[c].is_use==1&&(E.value=g.value[c].view_path)})},E=h(""),A=()=>{De({view_path:E.value}).then(()=>{k.value=!1,P.go(0)})};j.set({key:"currHeadMenuName",data:""});const z=(y,c)=>{P.push(y)};return(y,c)=>{const e=Z,r=de,d=ce,b=re;return l(),T(b,{class:"h-[60px] bg-[#2B303B] layout-admin flex items-center justify-between px-[15px] text-white"},{default:p(()=>[n("div",Ze,[n("span",{class:"iconfont icontuodong !text-[25px] cursor-pointer mr-[6px]",onClick:c[0]||(c[0]=a=>z("/admin/index"))}),n("span",{class:"cursor-pointer",onClick:c[1]||(c[1]=a=>z("/admin/setting/website/system","setting_manage"))},"控制台"),Xe,n("span",{class:"cursor-pointer",onClick:c[2]||(c[2]=a=>z("/admin/site/list","site_manage"))},"站点"),t(C)?(l(),m(I,{key:0},[Ye,n("span",{class:"cursor-pointer",onClick:c[3]||(c[3]=a=>z("/admin/app_manage/app_store",""))},"应用"),et,n("span",{class:"cursor-pointer",onClick:c[4]||(c[4]=a=>z("/admin/app_manage/tools","tool"))},"开发")],64)):w("",!0)]),n("div",tt,[n("div",{class:"navbar-item flex items-center h-full cursor-pointer",onClick:U},[i(e,{name:"element-Refresh"})]),t(N)=="site"?(l(),m("i",{key:0,class:"iconfont iconlingdang-xianxing cursor-pointer px-[8px]",title:t(f)("newInfo")},null,8,ot)):w("",!0),t(N)=="site"?(l(),m("div",{key:1,class:"navbar-item flex items-center h-full cursor-pointer",onClick:D},[i(e,{name:"iconfont-iconqiehuan",title:t(f)("indexSwitch")},null,8,["title"])])):w("",!0),n("div",nt,[i(Qe)])]),oe(n("input",{type:"hidden","onUpdate:modelValue":c[5]||(c[5]=a=>s.value=a)},null,512),[[ne,s.value]]),oe(n("input",{type:"hidden","onUpdate:modelValue":c[6]||(c[6]=a=>v.value=a)},null,512),[[ne,v.value]]),i(d,{modelValue:_.value,"onUpdate:modelValue":c[7]||(c[7]=a=>_.value=a),title:t(f)("layout.detectionLoginTip"),width:"30%","close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1},{footer:p(()=>[n("span",st,[i(r,{onClick:S},{default:p(()=>[G(M(t(f)("layout.detectionLoginOperation")),1)]),_:1})])]),default:p(()=>[n("span",null,M(t(f)("layout.detectionLoginContent")),1)]),_:1},8,["modelValue","title"]),i(d,{modelValue:k.value,"onUpdate:modelValue":c[8]||(c[8]=a=>k.value=a),title:t(f)("indexTemplate"),width:"550px","destroy-on-close":!0},{footer:p(()=>[n("span",it,[i(r,{type:"primary",onClick:A},{default:p(()=>[G(M(t(f)("confirm")),1)]),_:1})])]),default:p(()=>[n("div",lt,[E.value==""?(l(!0),m(I,{key:0},W(g.value,(a,V)=>(l(),m("div",{key:V},[n("div",{onClick:o=>E.value=a.view_path,class:B(["index-item py-[5px] px-[10px] mr-[10px] rounded-[3px] cursor-pointer",a.is_use==1?"bg-primary text-[#fff]":""])},[n("span",null,M(a.name),1)],10,at)]))),128)):(l(!0),m(I,{key:1},W(g.value,(a,V)=>(l(),m("div",{key:V},[n("div",{onClick:o=>E.value=a.view_path,class:B(["index-item py-[5px] px-[10px] mr-[10px] rounded-[3px] cursor-pointer",E.value==a.view_path?"bg-primary text-[#fff]":""])},[n("span",null,M(a.name),1)],10,rt)]))),128))])]),_:1},8,["modelValue","title"])]),_:1})}}});const ct=X(pt,[["__scopeId","data-v-b4fb64a7"]]),dt={key:0,class:"pt-[20px] pl-[80px] pr-[70px]"},ut={class:"flex flex-wrap items-center"},mt=["onClick"],_t={class:"text-[14px]"},ft={key:1,class:"flex flex-wrap items-center pt-[20px] pl-[80px] pr-[70px]"},xt=["onClick"],ht={class:"text-[14px]"},vt={key:2,class:"pt-[20px] pl-[80px] pr-[70px]"},gt={class:"flex flex-wrap items-center"},yt=["onClick"],wt={class:"text-[14px]"},bt=K({__name:"index",emits:["complete"],setup(F,{emit:P}){const N=ie(),H=Y(),x=q(()=>H.dark),R=q(()=>H.currHeadMenuName);let u=JSON.parse(JSON.stringify(N.routers));const C=me(),$=ue(),_=q(()=>String(C.name)),s=h("");fe(C,()=>{H.$patch(d=>{d.menuDrawer=!1}),c();let e="";u.forEach((d,b)=>{d.name==C.name?e=d.name:d.children&&d.children.length&&d.children.forEach((a,V)=>{a.name==C.name?e=d.name:a.children&&a.children.length&&a.children.forEach((o,L)=>{o.name==C.name&&(e=d.name,e=="setting_manage"&&!s.value&&(s.value=a.name,S.value=a.children),e=="tool"&&!s.value&&(s.value=a.name,k.value=a.children))})})}),P("complete");let r={setting_manage:"setting_manage",site_manage:"site_manage",tool:"tool",app_auth:"tool"};if(Object.keys(r).indexOf(e)!=-1)return H.setHeadMenu(r[e]),!1;H.setHeadMenu("")});let v=h([]),S=h([]),U=h([]),g=h([]),k=h([]);N.routers.forEach((e,r)=>{e.meta.class=1,e.children&&e.children.forEach((d,b)=>{d.meta.class=2,d.children&&d.children.forEach((a,V)=>{a.meta.class=3})}),e.name=="setting_manage"&&(v.value=e.children),e.name=="site_manage"&&(U.value=e.children),e.name=="tool"&&(g.value=e.children)});const D=e=>{let r="/setting/";s.value="",S.value=[],e.children?(s.value=e.name,S.value=e.children,r=r+e.path+"/"+e.children[0].path,$.push(r)):(r=r+e.path,$.push(r))},E=(e,r)=>{let d="/setting/";v.value.forEach((b,a)=>{b.children&&b.children.length&&b.children.forEach((V,o)=>{V.name==e.props.name&&(d=d+b.path+"/"+V.path,$.push(d))})})},A=e=>{let r="/admin/site/";s.value="",e.children?(s.value=e.name,r=r+e.path+"/"+e.children[0].path,$.push(r)):(r=r+e.path,$.push(r))},z=e=>{let r="/admin/tools/";s.value="",k.value=[],e.children?(s.value=e.name,k.value=e.children,r=r+e.path+"/"+e.children[0].path,$.push(r)):(r=r+e.path,$.push(r))},y=(e,r)=>{let d="/tools/";g.value.forEach((b,a)=>{b.children&&b.children.length&&b.children.forEach((V,o)=>{V.name==e.props.name&&(d=d+b.path+"/"+V.path,$.push(d))})})},c=()=>{s.value="",S.value=[]};return(e,r)=>{const d=Z,b=Le,a=Ne,V=ge;return l(),T(V,{class:B(["layout-aside w-full ease-in duration-200",{bright:!t(x)}])},{default:p(()=>[t(R)=="setting_manage"?(l(),m("div",dt,[n("div",ut,[(l(!0),m(I,null,W(t(v),(o,L)=>(l(),m(I,{key:L},[o.meta.show?(l(),m("div",{key:0,onClick:J=>D(o),class:B(["flex items-center h-[32px] border-[1px] border-solid my-[3px] border-[#E0E0E0] rounded-full px-[10px] mr-[24px] cursor-pointer bg-[#f8f8f8] hover:bg-[#fff]",{"text-[#fff] !bg-[#000] border-[#000]":t(_)==o.name||s.value&&s.value==o.name}])},[o.meta.icon?(l(),T(d,{key:0,name:o.meta.icon,class:"!w-auto mr-[4px] !leading-[14px]",size:"14px",title:o.meta.title},null,8,["name","title"])):w("",!0),n("span",_t,M(o.meta.title),1)],10,mt)):w("",!0)],64))),128))]),t(S).length?(l(),T(a,{key:0,modelValue:t(_),"onUpdate:modelValue":r[0]||(r[0]=o=>O(_)?_.value=o:null),class:"mt-[20px]",onTabClick:E},{default:p(()=>[(l(!0),m(I,null,W(t(S),(o,L)=>(l(),m(I,{key:L},[o.meta.show?(l(),T(b,{key:0,label:o.meta.title,name:o.name,path:o.path,onClick:J=>D(o)},null,8,["label","name","path","onClick"])):w("",!0)],64))),128))]),_:1},8,["modelValue"])):w("",!0)])):w("",!0),t(R)=="site_manage"?(l(),m("div",ft,[(l(!0),m(I,null,W(t(U),(o,L)=>(l(),m(I,{key:L},[o.meta.show?(l(),m("div",{key:0,onClick:J=>A(o),class:B(["flex items-center h-[32px] border-[1px] border-solid my-[3px] border-[#E0E0E0] rounded-full px-[10px] mr-[24px] cursor-pointer bg-[#f8f8f8] hover:bg-[#fff]",{"text-[#fff] !bg-[#000] border-[#000]":t(_)==o.name||s.value&&s.value==o.name}])},[o.meta.icon?(l(),T(d,{key:0,name:o.meta.icon,class:"!w-auto mr-[4px] !leading-[14px]",size:"14px",title:o.meta.title},null,8,["name","title"])):w("",!0),n("span",ht,M(o.meta.title),1)],10,xt)):w("",!0)],64))),128))])):w("",!0),t(R)=="tool"?(l(),m("div",vt,[n("div",gt,[(l(!0),m(I,null,W(t(g),(o,L)=>(l(),m(I,{key:L},[o.meta.show?(l(),m("div",{key:0,onClick:J=>z(o),class:B(["flex items-center h-[32px] border-[1px] border-solid my-[3px] border-[#E0E0E0] rounded-full px-[10px] mr-[24px] cursor-pointer bg-[#f8f8f8] hover:bg-[#fff]",{"text-[#fff] !bg-[#000] border-[#000]":t(_)==o.name||s.value&&s.value==o.name}])},[o.meta.icon?(l(),T(d,{key:0,name:o.meta.icon,class:"!w-auto mr-[4px] !leading-[14px]",size:"14px",title:o.meta.title},null,8,["name","title"])):w("",!0),n("span",wt,M(o.meta.title),1)],10,yt)):w("",!0)],64))),128))]),t(k).length?(l(),T(a,{key:0,modelValue:t(_),"onUpdate:modelValue":r[1]||(r[1]=o=>O(_)?_.value=o:null),class:"mt-[20px]",onTabClick:y},{default:p(()=>[(l(!0),m(I,null,W(t(k),(o,L)=>(l(),m(I,{key:L},[o.meta.show?(l(),T(b,{key:0,label:o.meta.title,name:o.name,path:o.path,onClick:J=>D(o)},null,8,["label","name","path","onClick"])):w("",!0)],64))),128))]),_:1},8,["modelValue"])):w("",!0)])):w("",!0)]),_:1},8,["class"])}}});const kt={class:"common-layout min-w-[1200px]"},Et=K({__name:"index",setup(F){const P=pe(),N=Ee(),H=Y(),x=h(),R=Ue();let u=h("");const C=()=>{setTimeout(()=>{u.value=`calc(100vh - ${x.value.clientHeight+60}px)`},600)};C();const $=q(()=>H.dark),_=q(()=>R.flag);return(s,v)=>{const S=ye,U=se("router-view"),g=Ae,k=we,D=re;return l(),m("div",kt,[i(D,{class:"w-100 h-screen"},{default:p(()=>[i(S,{class:"h-[60px]"},{default:p(()=>[i(ct)]),_:1}),i(D,{class:"flex flex-col"},{default:p(()=>[n("div",{ref_key:"layoutAsideRef",ref:x},[i(bt,{onComplete:C})],512),i(k,{class:B(["main-wrap h-full p-0",{"bg-page":t($)}])},{default:p(()=>[i(g,{class:B(["layout-content-height",{"px-[64px]":t(_)}]),style:xe({height:t(u)})},{default:p(()=>[t(P).routeRefreshTag?(l(),T(U,{key:0},{default:p(({Component:E,route:A})=>[(l(),T(he,{include:t(N).tabNames},[(l(),T(ve(E),{key:A.fullPath}))],1032,["include"]))]),_:1})):w("",!0)]),_:1},8,["class","style"])]),_:1},8,["class"])]),_:1})]),_:1})])}}});const So=X(Et,[["__scopeId","data-v-b3e5f194"]]);export{So as default};
