import{d as K,r as k,R as W,e as p,f,y as l,x as s,g as u,B as n,u as o,A as d,F as C,z as V,v as h,Q as X,H as Z,bl as ee,bm as te}from"./base-9962c822.js";/* empty css                   *//* empty css                      *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                        *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                *//* empty css                *//* empty css                       *//* empty css                  */import"./el-form-item-4ed993c7.js";import{_ as ae}from"./site_logo-f276251b.js";import{f as le}from"./storage-0874d153.js";import{t as r}from"./index-6e46fb55.js";import{i as oe,s as re,t as se,v as ie,w as pe}from"./site-5ee5d2a2.js";import{u as ne,b as me}from"./vue-router-d7e63612.js";import{_ as de}from"./edit-site.vue_vue_type_script_setup_true_lang-01633f4e.js";import{g as ue}from"./addon-3d6a9b5a.js";/* empty css                   */import{a as ce}from"./index-2cabf788.js";import{E as _e}from"./index-7ab57426.js";import{E as fe}from"./index-19251c17.js";import{a as he,E as ge}from"./index-7c833df7.js";import{a as ve,E as be}from"./index-22970d5d.js";import{E as ye}from"./index-00b73d5a.js";import{E as xe}from"./index-189f302e.js";import{a as ke,E as Pe}from"./index-4906bae6.js";import{E as we}from"./index-fb8b7863.js";import{E as Ee}from"./index-26709bbd.js";import{v as Ce}from"./directive-f75d4a7d.js";import{_ as Ve}from"./_plugin-vue_export-helper-c27b6911.js";import"./index-57446bef.js";import"./index-5c4817f4.js";import"./pinia-a9fc3924.js";import"./index-38fee8c5.js";import"./system-1108e5c1.js";import"./index-c4e33d8d.js";/* empty css                   *//* empty css                  *//* empty css                */import"./member_head-a897263d.js";import"./user-3ccd62ab.js";import"./index-886a23f9.js";import"./index-e2acd187.js";import"./index-91fda20f.js";import"./error-78e43d3e.js";import"./scroll-d85c8f38.js";import"./vnode-562dae50.js";import"./index-df16e899.js";import"./focus-trap-d0fc8554.js";import"./index-c98e204a.js";import"./event-9519ab40.js";import"./index-71b7d8f4.js";import"./index-1370ab44.js";import"./typescript-defaf979.js";import"./index-6b77b11a.js";import"./index-ec548bfb.js";import"./_Uint8Array-c92ffa25.js";import"./_initCloneObject-41dd9efb.js";import"./index-ab38878f.js";import"./index-2ee99ba1.js";import"./strings-66191554.js";import"./isEqual-240b5e0a.js";import"./debounce-9674000c.js";import"./index-6edd46fb.js";import"./validator-00f31ee7.js";import"./flatten-940b9f2c.js";import"./index-6d647c6f.js";import"./index-65bc84a3.js";import"./_isIterateeCall-909b9c9e.js";const De=P=>(ee("data-v-19830388"),P=P(),te(),P),Se={class:"main-container"},Le={class:"flex justify-between items-center"},Ie={class:"text-[20px]"},Fe={class:"mt-[20px]"},Te={class:"flex items-center"},Ue=["src"],$e={key:1,class:"w-[50px] h-[50px] mr-[10px]",src:ae,alt:""},Ye={class:"flex flex flex-col"},je={key:0},ze={key:1},Ne=De(()=>u("a",{href:"javascript:;",title:"启动站点",class:"iconfont iconicon_huojian"},null,-1)),Be={class:"mt-[16px] flex justify-end"},Me=K({__name:"list",setup(P){const D=ne(),U=D.meta.title,$=location.origin+"/site/login",v=k({all:[]}),S=k([]),a=W({page:1,limit:10,total:0,loading:!0,data:[],searchParam:{keywords:"",group_id:"",app:"all",status:"",create_time:[],expire_time:[]}});a.searchParam.status=D.query.id||"",(async()=>{let i=await(await oe({})).data;v.value.all=i,i.forEach((t,m)=>{v.value[t.app]||(v.value[t.app]=[]),v.value[t.app].push(t)})})(),(async()=>{S.value=await(await re()).data})();const L=k(),Y=i=>{i&&(i.resetFields(),c())},j=i=>{a.searchParam.group_id=""},I=k([]);ue().then(({data:i})=>{I.value=i}).catch();const c=(i=1)=>{a.loading=!0,a.page=i,a.searchParam.app=a.searchParam.app=="all"?"":a.searchParam.app,se({page:a.page,limit:a.limit,...a.searchParam}).then(t=>{a.loading=!1,a.data=t.data.data,a.total=t.data.total}).catch(()=>{a.loading=!1})};c();const z=me(),y=k(null),N=i=>{y.value.setFormData(),y.value.showDialog=!0},B=i=>{z.push({path:"/admin/site/info",query:{id:i.site_id}})},M=i=>{ce({message:r("siteUrlDevelopMessage"),grouping:!0,type:"success"})},H=i=>{y.value.setFormData(i),y.value.showDialog=!0},R=()=>{window.open($)},A=(i,t)=>{i==1&&ie({site_id:t}).then(m=>{c()}),i==3&&pe({site_id:t}).then(m=>{c()})};return(i,t)=>{const m=_e,G=fe,g=he,b=ve,w=be,F=ye,q=ge,T=xe,_=ke,E=we,O=Pe,Q=Ee,J=Ce;return p(),f("div",Se,[l(T,{class:"box-card !border-none",shadow:"never"},{default:s(()=>[u("div",Le,[u("span",Ie,n(o(U)),1),l(m,{type:"primary",class:"w-[100px]",onClick:N},{default:s(()=>[d(n(o(r)("addSite")),1)]),_:1})]),l(T,{class:"box-card !border-none my-[10px] table-search-wrap",shadow:"never"},{default:s(()=>[l(q,{inline:!0,model:a.searchParam,ref_key:"searchFormRef",ref:L},{default:s(()=>[l(g,{label:o(r)("siteName"),prop:"keywords"},{default:s(()=>[l(G,{modelValue:a.searchParam.keywords,"onUpdate:modelValue":t[0]||(t[0]=e=>a.searchParam.keywords=e),placeholder:o(r)("siteNamePlaceholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),l(g,{label:o(r)("app"),prop:"app_id"},{default:s(()=>[l(w,{modelValue:a.searchParam.app,"onUpdate:modelValue":t[1]||(t[1]=e=>a.searchParam.app=e),clearable:"",onChange:j,placeholder:o(r)("appIdPlaceholder"),class:"input-width"},{default:s(()=>[l(b,{label:o(r)("selectPlaceholder"),value:"all"},null,8,["label"]),(p(!0),f(C,null,V(Object.values(I.value),e=>(p(),h(b,{label:e.title,value:e.key},null,8,["label","value"]))),256))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),l(g,{label:o(r)("groupId"),prop:"group_id"},{default:s(()=>[l(w,{modelValue:a.searchParam.group_id,"onUpdate:modelValue":t[2]||(t[2]=e=>a.searchParam.group_id=e),clearable:"",placeholder:o(r)("groupIdPlaceholder"),class:"input-width"},{default:s(()=>[l(b,{label:o(r)("selectPlaceholder"),value:""},null,8,["label"]),(p(!0),f(C,null,V(v.value[a.searchParam.app],e=>(p(),h(b,{label:e.group_name,value:e.group_id},null,8,["label","value"]))),256))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),l(g,{label:o(r)("status"),prop:"status"},{default:s(()=>[l(w,{modelValue:a.searchParam.status,"onUpdate:modelValue":t[3]||(t[3]=e=>a.searchParam.status=e),clearable:"",placeholder:o(r)("groupIdPlaceholder"),class:"input-width"},{default:s(()=>[l(b,{label:o(r)("selectPlaceholder"),value:""},null,8,["label"]),(p(!0),f(C,null,V(S.value,(e,x)=>(p(),h(b,{label:e,value:x},null,8,["label","value"]))),256))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),l(g,{label:o(r)("createTime"),prop:"create_time"},{default:s(()=>[l(F,{modelValue:a.searchParam.create_time,"onUpdate:modelValue":t[4]||(t[4]=e=>a.searchParam.create_time=e),type:"datetimerange","value-format":"YYYY-MM-DD HH:mm:ss","start-placeholder":o(r)("startDate"),"end-placeholder":o(r)("endDate")},null,8,["modelValue","start-placeholder","end-placeholder"])]),_:1},8,["label"]),l(g,{label:o(r)("expireTime"),prop:"expire_time"},{default:s(()=>[l(F,{modelValue:a.searchParam.expire_time,"onUpdate:modelValue":t[5]||(t[5]=e=>a.searchParam.expire_time=e),type:"datetimerange","value-format":"YYYY-MM-DD HH:mm:ss","start-placeholder":o(r)("startDate"),"end-placeholder":o(r)("endDate")},null,8,["modelValue","start-placeholder","end-placeholder"])]),_:1},8,["label"]),l(g,null,{default:s(()=>[l(m,{type:"primary",onClick:t[6]||(t[6]=e=>c())},{default:s(()=>[d(n(o(r)("search")),1)]),_:1}),l(m,{onClick:t[7]||(t[7]=e=>Y(L.value))},{default:s(()=>[d(n(o(r)("reset")),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),u("div",Fe,[X((p(),h(O,{data:a.data,size:"large"},{empty:s(()=>[u("span",null,n(a.loading?"":o(r)("emptyData")),1)]),default:s(()=>[l(_,{prop:"site_id",label:o(r)("siteId"),width:"100","show-overflow-tooltip":!0},null,8,["label"]),l(_,{label:o(r)("siteInfo"),width:"300",align:"left"},{default:s(({row:e})=>[u("div",Te,[e.logo?(p(),f("img",{key:0,class:"w-[50px] h-[50px] mr-[10px]",src:o(le)(e.logo),alt:""},null,8,Ue)):(p(),f("img",$e)),u("div",Ye,[u("span",null,n(e.site_name||""),1)])])]),_:1},8,["label"]),l(_,{prop:"app_name",label:o(r)("app"),width:"150","show-overflow-tooltip":!0},null,8,["label"]),l(_,{prop:"group_name",label:o(r)("groupId"),width:"150","show-overflow-tooltip":!0},null,8,["label"]),l(_,{prop:"create_time",label:o(r)("createTime"),width:"250","show-overflow-tooltip":!0},null,8,["label"]),l(_,{prop:"expire_time",label:o(r)("expireTime"),width:"250","show-overflow-tooltip":!0},{default:s(({row:e})=>[e.expire_time==0?(p(),f("div",je,"永久")):(p(),f("div",ze,n(e.expire_time),1))]),_:1},8,["label"]),l(_,{label:o(r)("status"),width:"100",align:"center"},{default:s(({row:e})=>[e.status==1?(p(),h(E,{key:0,class:"ml-2",type:"success"},{default:s(()=>[d(n(e.status_name),1)]),_:2},1024)):e.status==3?(p(),h(E,{key:1,class:"ml-2",type:"error"},{default:s(()=>[d(n(e.status_name),1)]),_:2},1024)):(p(),h(E,{key:2,class:"ml-2",type:"error"},{default:s(()=>[d(n(e.status_name),1)]),_:2},1024))]),_:1},8,["label"]),l(_,{label:o(r)("operation"),"min-width":"250",align:"right",fixed:"right"},{default:s(({row:e})=>[l(m,{type:"primary",link:"",onClick:R},{default:s(()=>[Ne]),_:1}),e.status==1||e.status==3?(p(),h(m,{key:0,type:"primary",link:"",onClick:x=>A(e.status,e.site_id)},{default:s(()=>[d(n(e.status==1?o(r)("closeTxt"):o(r)("openTxt")),1)]),_:2},1032,["onClick"])):Z("",!0),l(m,{type:"primary",link:"",onClick:x=>H(e)},{default:s(()=>[d(n(o(r)("edit")),1)]),_:2},1032,["onClick"]),l(m,{type:"primary",link:"",onClick:x=>M(e)},{default:s(()=>[d(n(o(r)("url")),1)]),_:2},1032,["onClick"]),l(m,{type:"primary",link:"",onClick:x=>B(e)},{default:s(()=>[d(n(o(r)("info")),1)]),_:2},1032,["onClick"])]),_:1},8,["label"])]),_:1},8,["data"])),[[J,a.loading]]),u("div",Be,[l(Q,{"current-page":a.page,"onUpdate:currentPage":t[8]||(t[8]=e=>a.page=e),"page-size":a.limit,"onUpdate:pageSize":t[9]||(t[9]=e=>a.limit=e),layout:"total, sizes, prev, pager, next, jumper",total:a.total,onSizeChange:t[10]||(t[10]=e=>c()),onCurrentChange:c},null,8,["current-page","page-size","total"])])])]),_:1}),l(de,{ref_key:"addSiteDialog",ref:y,onComplete:t[11]||(t[11]=e=>c())},null,512)])}}});const ua=Ve(Me,[["__scopeId","data-v-19830388"]]);export{ua as default};
