import{d as P,r as c,n as F,q,N as l,h as v,I as y,w as n,a as B,e as d,i as b,t as V,u as t,y as C,W as I,X as N,Y as U,E as R,aa as j,a0 as O}from"./index-4dcc0234.js";/* empty css                   *//* empty css                   *//* empty css                  *//* empty css                */import"./el-form-item-4ed993c7.js";/* empty css                 */import{e as $,a as L,g as S}from"./dict-1d5574f0.js";const T={class:"dialog-footer"},Q=P({__name:"edit",emits:["complete"],setup(W,{expose:h,emit:D}){const m=c(!1),r=c(!1),p={id:"",name:"",key:"",memo:""},a=F({...p}),f=c(),k=q(()=>({name:[{required:!0,message:l("namePlaceholder"),trigger:"blur"}],key:[{required:!0,message:l("keyPlaceholder"),trigger:"blur"}],data:[{required:!0,message:l("dataPlaceholder"),trigger:"blur"}]})),w=async i=>{if(r.value||!i)return;const e=a.id?$:L;await i.validate(async o=>{o&&(r.value=!0,e(a).then(_=>{r.value=!1,m.value=!1,D("complete")}).catch(()=>{r.value=!1}))})};return h({showDialog:m,setFormData:async(i=null)=>{if(Object.assign(a,p),r.value=!0,i){const e=await(await S(i.id)).data;e&&Object.keys(a).forEach(o=>{e[o]!=null&&(a[o]=e[o])})}r.value=!1}}),(i,e)=>{const o=I,u=N,_=U,g=R,x=j,E=O;return v(),y(x,{modelValue:m.value,"onUpdate:modelValue":e[5]||(e[5]=s=>m.value=s),title:a.id?t(l)("updateDict"):t(l)("addDict"),width:"480",class:"diy-dialog-wrap","destroy-on-close":!0},{footer:n(()=>[B("span",T,[d(g,{onClick:e[3]||(e[3]=s=>m.value=!1)},{default:n(()=>[b(V(t(l)("cancel")),1)]),_:1}),d(g,{type:"primary",loading:r.value,onClick:e[4]||(e[4]=s=>w(f.value))},{default:n(()=>[b(V(t(l)("confirm")),1)]),_:1},8,["loading"])])]),default:n(()=>[C((v(),y(_,{model:a,"label-width":"120px",ref_key:"formRef",ref:f,rules:t(k),class:"page-form"},{default:n(()=>[d(u,{label:t(l)("name"),prop:"name"},{default:n(()=>[d(o,{modelValue:a.name,"onUpdate:modelValue":e[0]||(e[0]=s=>a.name=s),clearable:"",placeholder:t(l)("namePlaceholder"),class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),d(u,{label:t(l)("key"),prop:"key"},{default:n(()=>[d(o,{modelValue:a.key,"onUpdate:modelValue":e[1]||(e[1]=s=>a.key=s),clearable:"",placeholder:t(l)("keyPlaceholder"),class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),d(u,{label:t(l)("memo")},{default:n(()=>[d(o,{modelValue:a.memo,"onUpdate:modelValue":e[2]||(e[2]=s=>a.memo=s),type:"textarea",clearable:"",placeholder:t(l)("memoPlaceholder"),class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model","rules"])),[[E,r.value]])]),_:1},8,["modelValue","title"])}}});export{Q as _};
