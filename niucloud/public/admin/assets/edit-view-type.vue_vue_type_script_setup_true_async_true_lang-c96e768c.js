import{d as j,r as p,q as X,N as n,h as u,I as s,w as o,a as Y,e as r,i as V,t as g,u as d,c as y,F as f,G as b,B as k,ax as H,cz as J,az as K,aA as Q,X as W,as as Z,aF as ee,Y as le,E as ae,aa as te}from"./index-4dcc0234.js";/* empty css                   *//* empty css                  *//* empty css                *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  */import"./el-form-item-4ed993c7.js";/* empty css                 */import{c as oe}from"./dict-1d5574f0.js";import{g as ne,l as ue,n as de}from"./tools-123d2a10.js";const re={class:"dialog-footer"},Ce=j({__name:"edit-view-type",emits:["complete"],setup(se,{expose:L,emit:U}){const m=p(!1),B=p(""),F={select_type:1,dict_type:"",addon:"",model:"",value_key:"",label_key:""},a=p({...F}),h=p(),P=p([]),E=p([]),w=t=>{ue(t).then(l=>{E.value=l.data})},D=p([]);(async()=>{let{data:t}=await ne({});D.value=[{title:"系统",key:"system"}],D.value.push(...t),w({addon:"system"})})();const G=t=>{a.value.model="",w({addon:t})},C=p([]),A=t=>{de(t).then(l=>{C.value=l.data})},M=t=>{A({model:t})},R=X(()=>({dict_type:[{required:!0,message:n("dictTypePlaceholder"),trigger:"change"}]})),$=()=>{oe().then(t=>{P.value=t.data})},N=async t=>{t&&await t.validate(async l=>{l&&(U("complete",H(a.value)),m.value=!1)})},q=async(t=null)=>{a.value=J(Object.assign(F,t)),$(),a.value.model!=""&&(w({addon:a.value.addon}),A({model:a.value.model})),m.value=!0},z=t=>{var l;(l=h.value)==null||l.clearValidate(),t()};return L({showDialog:m,setFormData:q}),(t,l)=>{const T=K,I=Q,c=W,i=Z,v=ee,O=le,x=ae,S=te;return u(),s(S,{modelValue:m.value,"onUpdate:modelValue":l[8]||(l[8]=e=>m.value=e),title:B.value,width:"480px","before-close":z,"destroy-on-close":!0},{footer:o(()=>[Y("span",re,[r(x,{onClick:l[6]||(l[6]=e=>m.value=!1)},{default:o(()=>[V(g(d(n)("cancel")),1)]),_:1}),r(x,{type:"primary",onClick:l[7]||(l[7]=e=>N(h.value))},{default:o(()=>[V(g(d(n)("confirm")),1)]),_:1})])]),default:o(()=>[r(O,{model:a.value,"label-width":"130px",ref_key:"formRef",ref:h,rules:d(R),class:"page-form"},{default:o(()=>[r(c,{label:d(n)("selectType"),prop:"type"},{default:o(()=>[r(I,{modelValue:a.value.select_type,"onUpdate:modelValue":l[0]||(l[0]=e=>a.value.select_type=e)},{default:o(()=>[r(T,{label:1},{default:o(()=>[V(g(d(n)("dictType")),1)]),_:1}),r(T,{label:2},{default:o(()=>[V(g(d(n)("remotePullDown")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["label"]),a.value.select_type==1?(u(),s(c,{key:0,label:d(n)("dictType")},{default:o(()=>[r(v,{class:"input-width",placeholder:d(n)("dictTypePlaceholder"),modelValue:a.value.dict_type,"onUpdate:modelValue":l[1]||(l[1]=e=>a.value.dict_type=e),filterable:"",remote:"",clearable:""},{default:o(()=>[(u(!0),y(f,null,b(P.value,e=>(u(),s(i,{label:e.name,value:e.key,key:e.key},null,8,["label","value"]))),128))]),_:1},8,["placeholder","modelValue"])]),_:1},8,["label"])):k("",!0),a.value.select_type==2?(u(),s(c,{key:1,label:d(n)("addons"),prop:"addon"},{default:o(()=>[r(v,{modelValue:a.value.addon,"onUpdate:modelValue":l[2]||(l[2]=e=>a.value.addon=e),placeholder:d(n)("addonsPlaceholder"),class:"input-width",onChange:G},{default:o(()=>[(u(!0),y(f,null,b(D.value,(e,_)=>(u(),s(i,{label:e.title,value:e.key,key:_},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])):k("",!0),a.value.select_type==2?(u(),s(c,{key:2,label:d(n)("associatedModel"),prop:"model"},{default:o(()=>[r(v,{placeholder:d(n)("associatedModelPlaceholder"),modelValue:a.value.model,"onUpdate:modelValue":l[3]||(l[3]=e=>a.value.model=e),class:"input-width",filterable:"",onChange:M},{default:o(()=>[(u(!0),y(f,null,b(E.value,e=>(u(),s(i,{label:e,value:e,key:e},null,8,["label","value"]))),128))]),_:1},8,["placeholder","modelValue"])]),_:1},8,["label"])):k("",!0),a.value.select_type==2?(u(),s(c,{key:3,prop:"value_key",label:d(n)("remotePullDownValue")},{default:o(()=>[r(v,{class:"input-width",placeholder:d(n)("remotePullDownValuePlaceholder"),modelValue:a.value.value_key,"onUpdate:modelValue":l[4]||(l[4]=e=>a.value.value_key=e)},{default:o(()=>[(u(!0),y(f,null,b(C.value,(e,_)=>(u(),s(i,{label:`${e.name}:${e.comment}`,value:e.name,key:_},null,8,["label","value"]))),128))]),_:1},8,["placeholder","modelValue"])]),_:1},8,["label"])):k("",!0),a.value.select_type==2?(u(),s(c,{key:4,prop:"label_key",label:d(n)("remotePullDownLabel")},{default:o(()=>[r(v,{class:"input-width",placeholder:d(n)("remotePullDownLabelPlaceholder"),modelValue:a.value.label_key,"onUpdate:modelValue":l[5]||(l[5]=e=>a.value.label_key=e)},{default:o(()=>[(u(!0),y(f,null,b(C.value,(e,_)=>(u(),s(i,{label:`${e.name}:${e.comment}`,value:e.name,key:_},null,8,["label","value"]))),128))]),_:1},8,["placeholder","modelValue"])]),_:1},8,["label"])):k("",!0)]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])}}});export{Ce as _};
