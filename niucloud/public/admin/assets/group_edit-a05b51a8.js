import{d as J,r as v,c as I,w as K,V as N,Q as S,e as n,f as u,g as l,B as c,u as a,y as s,x as r,F as A,z as P,v as m,H as M,A as B,b9 as W,ba as X}from"./base-d79f9f62.js";/* empty css                   *//* empty css                *//* empty css                  *//* empty css                *//* empty css                          *//* empty css                    *//* empty css                *//* empty css                 *//* empty css                        *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  */import"./el-form-item-4ed993c7.js";import{t as i}from"./index-9e0d1e6c.js";import{p as Y,q as Z,r as ee}from"./site-a042abc5.js";import{g as oe}from"./addon-3b05baad.js";import{f as te}from"./storage-5316d819.js";import{u as ae,b as le}from"./vue-router-fc35ac55.js";import{E as re}from"./index-f249e665.js";import{a as se,E as pe}from"./index-6befecc6.js";import{a as ne,E as ie}from"./index-f3bad52c.js";import{E as de}from"./index-8774d4a8.js";import{E as ue}from"./index-2048a34f.js";import{E as ce,a as me}from"./index-d4057e2a.js";import{E as _e}from"./index-03649f16.js";import{E as fe}from"./index-ba59a1dc.js";import{v as ve}from"./directive-13582d99.js";import{_ as ge}from"./_plugin-vue_export-helper-c27b6911.js";import"./pinia-55149fa9.js";import"./index-6fcaf7b3.js";import"./index-542aa78e.js";import"./index-3fd412a3.js";import"./typescript-defaf979.js";import"./index-34cd7f55.js";import"./system-d23898e7.js";import"./index-5dbb8f83.js";import"./event-9519ab40.js";import"./index-b6ca69fd.js";import"./index-427f5a83.js";import"./index-71aec1df.js";import"./error-78e43d3e.js";import"./_Uint8Array-bbbfd6ac.js";import"./_initCloneObject-a2c44136.js";import"./index-54a839cc.js";import"./focus-trap-50fa5770.js";import"./index-2462875f.js";import"./index-3a5faaeb.js";import"./strings-d73e3c52.js";import"./index-6229e0fd.js";import"./index-bdfee32a.js";import"./scroll-aa5f3aa0.js";import"./isEqual-3f50b221.js";import"./debounce-6fd93949.js";import"./index-af085fbd.js";import"./validator-8f1b170d.js";import"./index-51305aa3.js";import"./position-4bcbb4c8.js";import"./flatten-0bbd547a.js";const q=g=>(W("data-v-6014b466"),g=g(),X(),g),he={class:"main-container mb-80"},be={class:"detail-head !mb-[10px]"},xe=q(()=>l("span",{class:"iconfont iconxiangzuojiantou !text-xs"},null,-1)),ye={class:"ml-[1px]"},ke=q(()=>l("span",{class:"adorn"},"|",-1)),we={class:"right"},Ee={key:0,class:"text-gray-400"},Ve={key:1,class:"text-gray-400"},Ce={class:"flex w-[300px]"},Ie={class:"w-full"},Ne={class:"flex"},Se={class:"w-[60px] h-[60px] mr-[10px] rounded-md overflow-hidden"},Ae={class:"image-error"},Pe={class:"flex-1 w-0 flex flex-col justify-center"},Be={class:"font-bold"},qe={class:"text-gray-400 mt-[10px]"},De={class:"fixed-footer-wrap"},Le={class:"fixed-footer"},Re=J({__name:"group_edit",setup(g){const b=v(!0),_=v([]),x=ae(),D=le(),L=x.meta.title,h=v(!1),o=v({group_id:0,group_name:"",group_desc:"",app:"",addon:[]});x.query.id?Y(x.query.id).then(({data:p})=>{o.value=p,b.value=!1}).catch():b.value=!1;const y=()=>{D.push("/admin/site/group")};oe().then(({data:p})=>{_.value=p}).catch();const k=I(()=>{const p=[];return o.value.app&&Object.keys(_.value).length&&Object.keys(_.value).forEach(t=>{const d=_.value[t];(d.type=="addon"&&d.support_app==""||d.support_app==o.value.app)&&p.push(d)}),p}),w=v(),R=I(()=>({group_name:[{required:!0,message:i("groupNamePlaceholder"),trigger:"blur"}],app:[{required:!0,message:i("mainAppPlaceholder"),trigger:"blur"}]}));K(()=>o.value.app,(p,t)=>{p&&t&&(o.value.addon=[])});const j=async p=>{if(h.value||!p)return;const t=o.value.group_id?Z:ee;await p.validate(async d=>{d&&(h.value=!0,t(o.value).then(f=>{setTimeout(()=>{y()},1e3)}).catch(()=>{h.value=!1}))})};return(p,t)=>{const d=re,f=se,F=ne,G=N("block"),U=ie,E=de,O=N("icon-picture"),T=ue,z=ce,$=me,H=pe,V=_e,Q=fe,C=ve;return S((n(),u("div",he,[l("div",be,[l("div",{class:"left",onClick:y},[xe,l("span",ye,c(a(i)("returnToPreviousPage")),1)]),ke,l("span",we,c(a(L)),1)]),s(Q,{class:"box-card !border-none",shadow:"never"},{default:r(()=>[s(H,{model:o.value,"label-width":"110px",ref_key:"formRef",ref:w,rules:a(R),class:"page-form"},{default:r(()=>[s(f,{label:a(i)("groupName"),prop:"group_name"},{default:r(()=>[s(d,{modelValue:o.value.group_name,"onUpdate:modelValue":t[0]||(t[0]=e=>o.value.group_name=e),placeholder:a(i)("groupNamePlaceholder"),clearable:"",disabled:o.value.uid,class:"input-width",maxlength:"20","show-word-limit":!0},null,8,["modelValue","placeholder","disabled"])]),_:1},8,["label"]),s(f,{label:a(i)("groupDesc"),prop:"group_desc"},{default:r(()=>[s(d,{modelValue:o.value.group_desc,"onUpdate:modelValue":t[1]||(t[1]=e=>o.value.group_desc=e),type:"textarea",rows:"4",clearable:"",placeholder:a(i)("groupDescPlaceholder"),class:"input-width",maxlength:"100"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),s(f,{label:a(i)("mainApp"),prop:"app"},{default:r(()=>[s(U,{class:"input-width",modelValue:o.value.app,"onUpdate:modelValue":t[2]||(t[2]=e=>o.value.app=e),placeholder:a(i)("mainAppPlaceholder"),disabled:o.value.group_id},{default:r(()=>[(n(!0),u(A,null,P(_.value,e=>(n(),m(G,null,{default:r(()=>[e.type=="app"?(n(),m(F,{key:e.key,label:e.title,value:e.key},null,8,["label","value"])):M("",!0)]),_:2},1024))),256))]),_:1},8,["modelValue","placeholder","disabled"])]),_:1},8,["label"]),s(f,{label:a(i)("containAddon")},{default:r(()=>[o.value.app?a(k).length?(n(),m($,{key:2,modelValue:o.value.addon,"onUpdate:modelValue":t[3]||(t[3]=e=>o.value.addon=e),class:"flex w-full"},{default:r(()=>[(n(!0),u(A,null,P(a(k),e=>(n(),u("div",Ce,[s(z,{label:e.key,name:"",class:"w-full !h-auto border border-solid p-[10px] !mr-[10px] !mb-[10px] rounded-md"},{default:r(()=>[l("div",Ie,[l("div",Ne,[l("div",Se,[e.cover?(n(),m(E,{key:0,src:a(te)(e.cover),class:"w-full h-full"},null,8,["src"])):(n(),m(E,{key:1,class:"w-full h-full"},{error:r(()=>[l("div",Ae,[s(T,null,{default:r(()=>[s(O)]),_:1})])]),_:1}))]),l("div",Pe,[l("div",Be,c(e.title),1),l("div",qe,c(e.desc),1)])])])]),_:2},1032,["label"])]))),256))]),_:1},8,["modelValue"])):(n(),u("div",Ve,"没有所选应用可用的插件")):(n(),u("div",Ee,"请先选择主应用"))]),_:1},8,["label"])]),_:1},8,["model","rules"]),l("div",De,[l("div",Le,[S((n(),m(V,{type:"primary",onClick:t[4]||(t[4]=e=>j(w.value))},{default:r(()=>[B(c(a(i)("save")),1)]),_:1})),[[C,h.value]]),s(V,{onClick:t[5]||(t[5]=e=>y())},{default:r(()=>[B(c(a(i)("cancel")),1)]),_:1})])])]),_:1})])),[[C,b.value]])}}});const Qo=ge(Re,[["__scopeId","data-v-6014b466"]]);export{Qo as default};
