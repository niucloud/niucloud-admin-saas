import{d as C,r as g,n as h,N as o,h as b,c as N,y as F,I,w as i,e as s,a as m,t as _,u as n,cL as B,i as D,W as $,X as M,_ as R,Y as L,E as P,$ as k}from"./index-30b146d4.js";/* empty css                   *//* empty css                  *//* empty css                     *//* empty css                *//* empty css                 */import{L as H,M as S}from"./member-753640ab.js";import{_ as T}from"./_plugin-vue_export-helper-c27b6911.js";const U={class:"main-container"},j={class:"panel-title"},q={class:"form-tip"},z={class:"text-lg"},A={class:"fixed-footer-wrap"},K={class:"fixed-footer"},O=C({__name:"member",setup(W){const d=g(!0),p=g({}),v=g(""),x=h({prefix:[{validator:(l,e,a)=>{e&&!/^[a-zA-Z]*$/g.test(e)?a(new Error(o("prefixHint"))):a()},trigger:"blur"}],length:[{required:!0,message:o("lengthPlaceholder"),trigger:"blur"},{validator:(l,e,a)=>{parseInt(e)>30||parseInt(e)-t.prefix.length<4?a(new Error(o("lengthHint"))):a()},trigger:"blur"}]}),t=h({prefix:"",length:10});(async()=>{const l=await(await H()).data;Object.keys(t).forEach(e=>{l[e]!=null&&(t[e]=l[e])}),u(p.value),d.value=!1})();const u=async l=>{await l.validate(e=>{if(e){let a="";const f=t.length-t.prefix.length-1;for(let c=1;c<=f;c++)a+="0";v.value=t.prefix+a+"1"}})},w=async l=>{d.value||!l||await l.validate(e=>{e&&S(t).then(()=>{d.value=!1,u()}).catch(()=>{d.value=!1})})};return(l,e)=>{const a=$,f=M,c=R,y=L,V=P,E=k;return b(),N("div",U,[F((b(),I(y,{model:t,"label-width":"150px",ref_key:"ruleFormRef",ref:p,rules:x,class:"page-form"},{default:i(()=>[s(c,{class:"box-card !border-none",shadow:"never"},{default:i(()=>[m("h3",j,_(n(o)("memberNoRule")),1),s(f,{label:n(o)("prefix"),prop:"prefix"},{default:i(()=>[s(a,{modelValue:t.prefix,"onUpdate:modelValue":e[0]||(e[0]=r=>t.prefix=r),placeholder:n(o)("prefixPlaceholder"),class:"input-width",clearable:"",maxlength:"20",onChange:e[1]||(e[1]=r=>u(p.value))},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),s(f,{label:n(o)("length"),prop:"length"},{default:i(()=>[s(a,{modelValue:t.length,"onUpdate:modelValue":e[2]||(e[2]=r=>t.length=r),placeholder:n(o)("lengthPlaceholder"),class:"input-width",clearable:"",onKeyup:e[3]||(e[3]=r=>n(B)(r)),onChange:e[4]||(e[4]=r=>u(p.value))},null,8,["modelValue","placeholder"]),m("div",q,_(n(o)("lengthTips")),1)]),_:1},8,["label"]),s(f,null,{default:i(()=>[m("div",z,_(v.value),1)]),_:1})]),_:1})]),_:1},8,["model","rules"])),[[E,d.value]]),m("div",A,[m("div",K,[s(V,{type:"primary",onClick:e[5]||(e[5]=r=>w(p.value))},{default:i(()=>[D(_(n(o)("save")),1)]),_:1})])])])}}});const oe=T(O,[["__scopeId","data-v-b007ab4f"]]);export{oe as default};
