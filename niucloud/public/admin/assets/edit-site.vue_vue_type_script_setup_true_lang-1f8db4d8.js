import{d as X,r as _,n as Y,q as U,N as e,a0 as H,h as n,I as g,w as s,a as c,e as r,i as h,t as m,u as t,y as N,c as f,F as y,G as E,R as K,z as Q,W as Z,X as ee,as as le,aE as ae,a1 as oe,aI as te,cJ as re,Y as se,E as ie,aa as de,$ as ne}from"./index-30b146d4.js";/* empty css                   *//* empty css                   *//* empty css                  *//* empty css                     *//* empty css                       *//* empty css                 *//* empty css                     *//* empty css                  *//* empty css                  *//* empty css                *//* empty css               *//* empty css                  *//* empty css                  */import{_ as ue}from"./member_head-a897263d.js";import{i as pe,j as me,k as ce,m as _e}from"./site-6277ee8c.js";import{a as ge}from"./user-9f5ed5cd.js";import{g as fe}from"./addon-afba1560.js";const we={key:0},ve={class:"flex items-center"},he={class:"flex items-center"},be={key:1,src:ue,alt:"",class:"mr-[10px] w-[24px]"},xe={key:1},Ve={class:"text-[12px] text-[#a9a9a9] leading-normal mt-[5px]"},Pe={class:"text-[12px] text-[#a9a9a9] leading-normal mt-[5px]"},ye={class:"text-[12px] text-[#a9a9a9] leading-normal mt-[5px]"},Ee={class:"dialog-footer"},Je=X({__name:"edit-site",emits:["complete"],setup(De,{expose:S,emit:q}){const w=_(!1),p=_(!0),b=_([]),D=_([]),L=_([]),A=location.hostname;ge({}).then(({data:d})=>{D.value=d}).catch();const x=new Date;x.setTime(x.getTime()+3600*1e3*2*360);const k={site_id:"",site_name:"",real_name:"",uid:"",username:"",password:"",confirm_password:"",expire_time:x,site_domain:"",group_id:""},a=Y({...k}),T=_();(async()=>{b.value=await(await pe()).data})();const F=_([]);fe().then(({data:d})=>{F.value=d}).catch();const B=async(d=null)=>{if(p.value=!0,Object.assign(a,k),d){const o=await(await me(d.site_id)).data;L.value=o,Object.keys(a).forEach(i=>{o[i]!=null&&(a[i]=o[i])})}p.value=!1},C=U(()=>({site_name:[{required:!0,message:e("siteNamePlaceholder"),trigger:"blur"}],group_id:[{required:!0,message:e("groupIdPlaceholder"),trigger:"blur"}],uid:[{validator:(d,o,i)=>{a.uid===""?i(new Error(e("managerPlaceholder"))):i()},trigger:"blur"}],username:[{required:a.uid==0,message:e("usernamePlaceholder"),trigger:"blur"}],password:[{required:a.uid==0,message:e("passwordPlaceholder"),trigger:"blur"}],real_name:[{required:!0,message:e("userRealNamePlaceholder"),trigger:"blur"}],confirm_password:[{required:a.uid==0,message:e("confirmPasswordPlaceholder"),trigger:"blur"},{validator:(d,o,i)=>{a.uid==0&&o!=a.password?i(new Error(e("confirmPasswordError"))):i()},trigger:"blur"}],expire_time:[{required:!0,message:e("expireTimePlaceholder"),trigger:"blur"}]})),R=U(()=>p.value?"":a.site_id?e("editSite"):e("addSite")),G=async d=>{p.value||!d||await d.validate(async o=>{if(o){p.value=!0;const i=a;(i.site_id?ce:_e)(i).then(v=>{p.value=!1,w.value=!1,q("complete")}).catch(()=>{p.value=!1})}})};return S({showDialog:w,setFormData:B,loading:p}),(d,o)=>{const i=Z,u=ee,v=le,V=ae,j=H("Plus"),O=oe,$=te,z=re,M=se,I=ie,J=de,W=ne;return n(),g(J,{modelValue:w.value,"onUpdate:modelValue":o[11]||(o[11]=l=>w.value=l),title:t(R),width:"500px","destroy-on-close":!0},{footer:s(()=>[c("span",Ee,[r(I,{onClick:o[9]||(o[9]=l=>w.value=!1)},{default:s(()=>[h(m(t(e)("cancel")),1)]),_:1}),r(I,{type:"primary",loading:p.value,onClick:o[10]||(o[10]=l=>G(T.value))},{default:s(()=>[h(m(t(e)("confirm")),1)]),_:1},8,["loading"])])]),default:s(()=>[N((n(),g(M,{model:a,"label-width":"90px",ref_key:"formRef",ref:T,rules:t(C),class:"page-form"},{default:s(()=>[a.site_id==0?(n(),f("div",we,[r(u,{label:t(e)("siteName"),prop:"site_name"},{default:s(()=>[r(i,{modelValue:a.site_name,"onUpdate:modelValue":o[0]||(o[0]=l=>a.site_name=l),clearable:"",placeholder:t(e)("siteNamePlaceholder"),class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),r(u,{label:t(e)("groupId"),prop:"group_id"},{default:s(()=>[r(V,{modelValue:a.group_id,"onUpdate:modelValue":o[1]||(o[1]=l=>a.group_id=l),clearable:"",placeholder:t(e)("groupIdPlaceholder"),class:"input-width"},{default:s(()=>[(n(!0),f(y,null,E(b.value,(l,P)=>(n(),g(v,{label:l.group_name,value:l.group_id,key:P},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),r(u,{label:t(e)("manager"),prop:"uid"},{default:s(()=>[r(V,{modelValue:a.uid,"onUpdate:modelValue":o[2]||(o[2]=l=>a.uid=l),placeholder:t(e)("managerPlaceholder"),class:"input-width",filterable:"",autocomplete:"off"},{default:s(()=>[r(v,{label:t(e)("newAddManager"),value:0},{default:s(()=>[c("div",ve,[r(O,{class:"mr-[10px]"},{default:s(()=>[r(j)]),_:1}),h(" "+m(t(e)("newAddManager")),1)])]),_:1},8,["label"]),(n(!0),f(y,null,E(D.value,l=>(n(),g(v,{key:l.uid,label:l.username,value:l.uid},{default:s(()=>[c("div",he,[l.head_img?(n(),g($,{key:0,src:t(K)(l.head_img),size:"small",class:"mr-[10px]"},null,8,["src"])):(n(),f("img",be)),h(" "+m(l.username),1)])]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),N(c("div",null,[r(u,{label:t(e)("username"),prop:"username"},{default:s(()=>[r(i,{modelValue:a.username,"onUpdate:modelValue":o[3]||(o[3]=l=>a.username=l),clearable:"",placeholder:t(e)("usernamePlaceholder"),class:"input-width",autocomplete:"new-password"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),r(u,{label:t(e)("password"),prop:"password"},{default:s(()=>[r(i,{modelValue:a.password,"onUpdate:modelValue":o[4]||(o[4]=l=>a.password=l),clearable:"",placeholder:t(e)("passwordPlaceholder"),class:"input-width","show-password":!0,type:"password",autocomplete:"new-password"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),r(u,{label:t(e)("confirmPassword"),prop:"confirm_password"},{default:s(()=>[r(i,{modelValue:a.confirm_password,"onUpdate:modelValue":o[5]||(o[5]=l=>a.confirm_password=l),placeholder:t(e)("confirmPasswordPlaceholder"),type:"password","show-password":!0,clearable:"",class:"input-width",autocomplete:"new-password"},null,8,["modelValue","placeholder"])]),_:1},8,["label"])],512),[[Q,a.uid===0]])])):(n(),f("div",xe,[r(u,{label:t(e)("siteName")},{default:s(()=>[h(m(a.site_name),1)]),_:1},8,["label"]),r(u,{label:t(e)("groupId"),prop:"group_id"},{default:s(()=>[r(V,{modelValue:a.group_id,"onUpdate:modelValue":o[6]||(o[6]=l=>a.group_id=l),clearable:"",placeholder:t(e)("groupIdPlaceholder"),class:"input-width"},{default:s(()=>[(n(!0),f(y,null,E(b.value,(l,P)=>(n(),g(v,{label:l.group_name,value:l.group_id,key:P},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])])),r(u,{label:t(e)("siteDomain"),prop:"site_domain"},{default:s(()=>[r(i,{modelValue:a.site_domain,"onUpdate:modelValue":o[7]||(o[7]=l=>a.site_domain=l),clearable:"",placeholder:t(e)("siteDomainPlaceholder"),class:"input-width"},null,8,["modelValue","placeholder"]),c("div",null,[c("p",Ve,m(t(e)("siteDomainTips")),1),c("p",Pe,m(t(e)("siteDomainTipsTwo")),1),c("p",ye,m(t(e)("siteDomainTipsThree"))+m(t(A)),1)])]),_:1},8,["label"]),r(u,{label:t(e)("expireTime"),prop:"expire_time",class:"input-width"},{default:s(()=>[r(z,{class:"flex-1 !flex",modelValue:a.expire_time,"onUpdate:modelValue":o[8]||(o[8]=l=>a.expire_time=l),clearable:"",type:"datetime",placeholder:t(e)("expireTimePlaceholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model","rules"])),[[W,p.value]])]),_:1},8,["modelValue","title"])}}});export{Je as _};
