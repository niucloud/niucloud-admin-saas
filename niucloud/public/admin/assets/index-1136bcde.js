import{d as _e,r as m,R as ue,o as fe,V as S,e as _,f as $,y as o,x as t,g as i,B as d,u as e,A as u,F as ve,z as he,v as k,Q as q,H as xe,b9 as ge,ba as be}from"./base-d79f9f62.js";/* empty css                   *//* empty css                   *//* empty css                     *//* empty css                *//* empty css                    *//* empty css                *//* empty css                    *//* empty css                      *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                  *//* empty css                        */import"./el-tooltip-4ed993c7.js";/* empty css                *//* empty css                */import"./el-form-item-4ed993c7.js";/* empty css                *//* empty css                  */import{t as a}from"./index-9e0d1e6c.js";import{r as ye,d as ke,s as we,p as Ee,q as Ce,t as Te}from"./tools-6d0ea037.js";import{f as Fe}from"./storage-5316d819.js";import{_ as Ve}from"./add-table.vue_vue_type_script_setup_true_lang-5daccc86.js";import{u as De,b as Ne}from"./vue-router-fc35ac55.js";import{E as H}from"./index-d1262e7a.js";import{a as Se}from"./index-542aa78e.js";import{E as Pe}from"./index-03649f16.js";import{a as Ae,E as Be}from"./index-5b670ffa.js";import{a as Le,E as $e}from"./index-3f47b227.js";import{a as ze,E as Ie}from"./index-f3bad52c.js";import{a as Ge,E as Re}from"./index-6befecc6.js";import{E as Ue}from"./index-f249e665.js";import{E as Oe}from"./index-ba59a1dc.js";import{a as Me,E as qe}from"./index-2b5d43b9.js";import{E as He}from"./index-014848fe.js";import{E as Ke}from"./index-2048a34f.js";import{E as Qe}from"./index-0751469c.js";import{E as Je}from"./index-2462875f.js";import{E as We}from"./index-d0ada8fb.js";import{v as Xe}from"./directive-13582d99.js";import{_ as Ye}from"./_plugin-vue_export-helper-c27b6911.js";import"./pinia-55149fa9.js";import"./index-6fcaf7b3.js";import"./system-d23898e7.js";import"./index-3fd412a3.js";import"./index-5dbb8f83.js";import"./index-cf3a42e3.js";import"./error-78e43d3e.js";import"./scroll-aa5f3aa0.js";import"./vnode-772b0c47.js";import"./index-34cd7f55.js";import"./aria-adfa05c5.js";import"./focus-trap-50fa5770.js";import"./validator-8f1b170d.js";import"./index-6229e0fd.js";import"./index-71aec1df.js";import"./typescript-defaf979.js";import"./index-bdfee32a.js";import"./index-427f5a83.js";import"./event-9519ab40.js";import"./strings-d73e3c52.js";import"./index-54a839cc.js";import"./index-3a5faaeb.js";import"./isEqual-3f50b221.js";import"./_Uint8Array-bbbfd6ac.js";import"./debounce-6fd93949.js";import"./index-af085fbd.js";import"./_initCloneObject-a2c44136.js";import"./index-b6ca69fd.js";import"./index-d4057e2a.js";import"./flatten-0bbd547a.js";import"./_isIterateeCall-559d3e90.js";import"./index-6d156531.js";const f=C=>(ge("data-v-bd3522bc"),C=C(),be(),C),Ze={class:"main-container"},je={class:"flex justify-between items-center mb-[10px]"},et={class:"text-[20px]"},tt=f(()=>i("div",{class:"w-[24px] h-[24px] text-[#fff] bg-[#778aa3] text-center leading-[24px] rounded-full"}," 1",-1)),at={class:"text-[14px] text-[#303133] font-[700]"},ot={class:"text-[#999]"},lt={class:"mt-[20px] mb-[40px] h-[32px]"},nt=f(()=>i("div",{class:"w-[24px] h-[24px] text-[#fff] bg-[#778aa3] text-center leading-[24px] rounded-full"}," 2",-1)),it={class:"text-[14px] text-[#303133] font-[700]"},st={class:"text-[#999]"},rt=f(()=>i("div",{class:"mt-[20px] mb-[40px] h-[32px]"},null,-1)),dt=f(()=>i("div",{class:"w-[24px] h-[24px] text-[#fff] bg-[#778aa3] text-center leading-[24px] rounded-full"}," 3",-1)),pt={class:"text-[14px] text-[#303133] font-[700]"},ct={class:"text-[#999]"},mt=f(()=>i("div",{class:"mt-[20px] mb-[40px] h-[32px]"},null,-1)),_t=f(()=>i("div",{class:"w-[24px] h-[24px] text-[#fff] bg-[#778aa3] text-center leading-[24px] rounded-full"}," 4",-1)),ut={class:"text-[14px] text-[#303133] font-[700]"},ft={class:"text-[#999]"},vt=f(()=>i("div",{class:"mt-[20px] mb-[40px] h-[32px]"},null,-1)),ht=f(()=>i("div",{class:"w-[24px] h-[24px] text-[#fff] bg-[#778aa3] text-center leading-[24px] rounded-full"}," 5",-1)),xt={class:"text-[14px] text-[#303133] font-[700]"},gt={class:"text-[#999]"},bt=f(()=>i("div",{class:"mt-[20px] mb-[40px] h-[32px]"},null,-1)),yt={class:"mt-[16px] flex justify-end"},kt={class:"flex h-[50vh]"},wt={class:"flex items-center"},Et={class:"pl-[5px]"},Ct={class:"ml-[20px]",style:{width:"calc(100% - 285px)"}},Tt=_e({__name:"index",setup(C){const K=De().meta.title,Q=Ne(),P=m("codeGeneration");let s=ue({page:1,limit:10,total:0,loading:!0,data:[],searchParam:{table_name:"",table_content:"",addon_name:""}});const z=m(),J=r=>{r&&(r.resetFields(),g())};fe(()=>{window.codeActiveName&&(P.value=window.codeActiveName+"",window.codeActiveName=null),g()});const g=(r=1)=>{s.loading=!0,s.page=r,ye({page:s.page,limit:s.limit,...s.searchParam}).then(l=>{s.loading=!1,s.data=l.data.data,s.total=l.data.total}).catch(()=>{s.loading=!1})},I=m([]),W=r=>{ke({search:r}).then(l=>{I.value=l.data})},A=m(null),X=()=>{A.value.setFormData(),A.value.showDialog=!0},Y=r=>{H.confirm(a("codeDeleteTips"),a("warning"),{confirmButtonText:a("confirm"),cancelButtonText:a("cancel"),type:"warning"}).then(()=>{we(r).then(()=>{g()}).catch(()=>{})})},Z=r=>{Q.push("/tools/code/edit?id="+r.id)},j=r=>{Ee({id:r}).then(l=>{s.loading=!1,H.confirm(l.msg!="2"?a("saveAndSyncText"):a("saveAndSyncText1"),a("warning"),{confirmButtonText:a("confirm"),cancelButtonText:a("cancel")}).then(()=>{G(r,3)}).catch(()=>{})}).catch(()=>{s.loading=!1})},G=(r,l)=>{s.loading=!0,Ce({id:r,generate_type:l}).then(p=>{Se({type:"success",message:"操作成功"}),l!=3?(s.loading=!1,window.open(Fe(p.data.file),"_blank")):g()}).catch(()=>{s.loading=!1})},B=m([]),L=m(!1),T=m([]),F=m(!1),V=m(""),D=m(""),ee=r=>{L.value=!0,F.value=!0,V.value="",T.value=[],D.value="",Te(r).then(l=>{B.value=l.data,T.value=ae(l.data.map(p=>p.file_dir+p.name)),V.value=B.value[0].content,F.value=!1}).catch(()=>{F.value=!1})},te=r=>{B.value.forEach(l=>{r.path===l.file_dir+l.name&&(V.value=l.content)})},ae=r=>{var l=[];if(Array.isArray(r))for(var p=0;p<r.length;++p)for(var v=r[p].split("/"),w=l,b=0;b<v.length;++b){for(var h=v[b],c=null,x=0;x<w.length;++x){var N=w[x];if(N.name===h){c=N;break}}c||(c={name:h,path:h.indexOf(".")<0?"":r[p],key:"k"+p+b+x},h.indexOf(".")<0&&(c.children=[]),c.path===r[0]&&(D.value=c.key),w.push(c)),c.children&&(w=c.children)}return l};return(r,l)=>{const p=Pe,v=Ae,w=Be,b=Le,h=ze,c=Ie,x=Ge,N=Ue,oe=Re,R=Oe,E=Me,le=qe,ne=He,ie=$e,se=S("Folder"),re=S("FolderOpened"),U=Ke,de=S("Document"),pe=Qe,O=Je,ce=S("highlightjs"),me=We,M=Xe;return _(),$("div",Ze,[o(R,{class:"box-card !border-none",shadow:"never"},{default:t(()=>[i("div",je,[i("span",et,d(e(K)),1)]),o(ie,{modelValue:P.value,"onUpdate:modelValue":l[7]||(l[7]=n=>P.value=n),class:"demo-tabs"},{default:t(()=>[o(b,{label:e(a)("codeGeneration"),name:"codeGeneration"},{default:t(()=>[o(w,{direction:"vertical"},{default:t(()=>[o(v,null,{icon:t(()=>[tt]),title:t(()=>[i("p",at,d(e(a)("step1")),1)]),description:t(()=>[i("span",ot,d(e(a)("describe1")),1),i("div",lt,[o(p,{type:"primary",class:"w-[100px]",onClick:X},{default:t(()=>[u(d(e(a)("btn1")),1)]),_:1})])]),_:1}),o(v,null,{icon:t(()=>[nt]),title:t(()=>[i("p",it,d(e(a)("step2")),1)]),description:t(()=>[i("span",st,d(e(a)("describe2")),1),rt]),_:1}),o(v,null,{icon:t(()=>[dt]),title:t(()=>[i("p",pt,d(e(a)("step3")),1)]),description:t(()=>[i("span",ct,d(e(a)("describe3")),1),mt]),_:1}),o(v,null,{icon:t(()=>[_t]),title:t(()=>[i("p",ut,d(e(a)("step4")),1)]),description:t(()=>[i("span",ft,d(e(a)("describe4")),1),vt]),_:1}),o(v,null,{icon:t(()=>[ht]),title:t(()=>[i("p",xt,d(e(a)("step5")),1)]),description:t(()=>[i("span",gt,d(e(a)("describe5")),1),bt]),_:1})]),_:1})]),_:1},8,["label"]),o(b,{label:e(a)("codeList"),name:"codeList"},{default:t(()=>[o(R,{class:"box-card !border-none my-[10px] table-search-wrap",shadow:"never"},{default:t(()=>[o(oe,{inline:!0,model:e(s).searchParam,ref_key:"searchFormRef",ref:z},{default:t(()=>[o(x,{label:e(a)("addonName"),prop:"addon_name"},{default:t(()=>[o(c,{modelValue:e(s).searchParam.addon_name,"onUpdate:modelValue":l[0]||(l[0]=n=>e(s).searchParam.addon_name=n),placeholder:"Select",filterable:"",remote:"",clearable:"","remote-method":W},{default:t(()=>[o(h,{label:"全部",value:""}),o(h,{label:"系统",value:"2"}),(_(!0),$(ve,null,he(I.value,n=>(_(),k(h,{label:n.title,value:n.key,key:n.key},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),o(x,{label:e(a)("tableName"),prop:"table_name"},{default:t(()=>[o(N,{modelValue:e(s).searchParam.table_name,"onUpdate:modelValue":l[1]||(l[1]=n=>e(s).searchParam.table_name=n),placeholder:e(a)("tableNamePlaceholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),o(x,null,{default:t(()=>[o(p,{type:"primary",onClick:l[2]||(l[2]=n=>g())},{default:t(()=>[u(d(e(a)("search")),1)]),_:1}),o(p,{onClick:l[3]||(l[3]=n=>J(z.value))},{default:t(()=>[u(d(e(a)("reset")),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),i("div",null,[q((_(),k(le,{data:e(s).data,size:"large"},{empty:t(()=>[i("span",null,d(e(s).loading?"":e(a)("emptyData")),1)]),default:t(()=>[o(E,{prop:"table_name","show-overflow-tooltip":!0,label:e(a)("tableName"),"min-width":"120"},null,8,["label"]),o(E,{prop:"title","show-overflow-tooltip":!0,label:e(a)("addonName"),"min-width":"120"},null,8,["label"]),o(E,{prop:"table_content","show-overflow-tooltip":!0,label:e(a)("tableContent"),"min-width":"120"},null,8,["label"]),o(E,{prop:"edit_type",label:e(a)("editType"),"min-width":"150",align:"center"},{default:t(({row:n})=>[u(d(n.edit_type==1?e(a)("popup"):e(a)("page")),1)]),_:1},8,["label"]),o(E,{label:e(a)("createTime"),"min-width":"180",align:"center"},{default:t(({row:n})=>[u(d(n.create_time||""),1)]),_:1},8,["label"]),o(E,{label:e(a)("operation"),fixed:"right",align:"right",width:"330"},{default:t(({row:n})=>[o(p,{type:"primary",link:"",onClick:y=>Z(n)},{default:t(()=>[u(d(e(a)("edit")),1)]),_:2},1032,["onClick"]),o(p,{type:"primary",link:"",onClick:y=>ee(n.id)},{default:t(()=>[u(d(e(a)("preview")),1)]),_:2},1032,["onClick"]),o(p,{type:"primary",link:"",onClick:y=>j(n.id)},{default:t(()=>[u(d(e(a)("saveAndSync")),1)]),_:2},1032,["onClick"]),o(p,{type:"primary",link:"",onClick:y=>G(n.id,2)},{default:t(()=>[u(d(e(a)("download")),1)]),_:2},1032,["onClick"]),o(p,{type:"primary",link:"",onClick:y=>Y(n.id)},{default:t(()=>[u(d(e(a)("delete")),1)]),_:2},1032,["onClick"])]),_:1},8,["label"])]),_:1},8,["data"])),[[M,e(s).loading]]),i("div",yt,[o(ne,{"current-page":e(s).page,"onUpdate:current-page":l[4]||(l[4]=n=>e(s).page=n),"page-size":e(s).limit,"onUpdate:page-size":l[5]||(l[5]=n=>e(s).limit=n),layout:"total, sizes, prev, pager, next, jumper",total:e(s).total,onSizeChange:l[6]||(l[6]=n=>g()),onCurrentChange:g},null,8,["current-page","page-size","total"])])])]),_:1},8,["label"])]),_:1},8,["modelValue"]),o(Ve,{ref_key:"addCodeDialog",ref:A},null,512),o(me,{modelValue:L.value,"onUpdate:modelValue":l[8]||(l[8]=n=>L.value=n),class:"dialog-visible",width:"70%",title:"代码预览"},{default:t(()=>[q((_(),$("div",kt,[o(O,{class:"h-[100%] w-[270px]"},{default:t(()=>[T.value.length&&D.value!=""?(_(),k(pe,{key:0,data:T.value,props:{label:"name",value:"key"},"node-key":"key","current-node-key":D.value,"expand-on-click-node":!1,"highlight-current":"","default-expand-all":"",ref:"treeRef",onNodeClick:te},{default:t(({node:n,data:y})=>[i("div",wt,[y.children?(_(),k(U,{key:0},{default:t(()=>[n.expanded?(_(),k(re,{key:1})):(_(),k(se,{key:0}))]),_:2},1024)):(_(),k(U,{key:1},{default:t(()=>[o(de)]),_:1})),i("span",Et,d(y.name),1)])]),_:1},8,["data","current-node-key"])):xe("",!0)]),_:1}),i("div",Ct,[o(O,{class:"h-[100%] w-[100%]"},{default:t(()=>[o(ce,{autodetect:"",class:"h-[100%]",code:V.value},null,8,["code"])]),_:1})])])),[[M,F.value]])]),_:1},8,["modelValue"])]),_:1})])}}});const Wa=Ye(Tt,[["__scopeId","data-v-bd3522bc"]]);export{Wa as default};
