import{d as T,q,r as h,cy as V,a0 as D,h as c,c as m,a as p,b as z,e as t,w as n,a5 as W,u as r,I as U,N as i,i as A,t as x,F as C,G as B,A as P,a3 as S,a1 as X,W as H,ap as J,X as Q,E as Z,aa as ee}from"./index-4ce69858.js";/* empty css                   *//* empty css                  */import"./el-form-item-4ed993c7.js";/* empty css                     *//* empty css                 *//* empty css                */import{g as le}from"./diy-2247a3d0.js";const ae=["onClick"],te={class:"flex items-start"},oe=["onClick"],ne={class:"mb-[16px]"},se={class:"mb-[16px]"},re=p("div",{class:"text-sm text-gray-400 select-text"},"路径必须以“/”开头，例：/app/pages/index/index",-1),ie=p("div",{class:"text-sm text-gray-400 select-text"},"跳转外部链接“/”开头，例：https://baidu.com",-1),ue={key:1,class:"flex flex-wrap"},de=["onClick"],ce={class:"dialog-footer"},ye=T({__name:"index",props:{modelValue:{type:String,default:""},ignore:{type:Array,default:[]}},emits:["update:modelValue"],setup($,{expose:j,emit:L}){const _=$,u=q({get(){return _.modelValue},set(a){L("update:modelValue",a)}}),v=h(!1),d=h([]),s=h(""),y=h([]),e=h([]),F=()=>{if(u.value.name!=""){e.value=V(u.value),s.value=e.value.parent;for(let a in d.value)d.value[a].name==s.value&&w(d.value[a])}v.value=!0};le({}).then(a=>{if(d.value=a.data,_.ignore&&_.ignore.length){for(let o in d.value)for(let f=0;f<_.ignore.length;f++)if(o==_.ignore[f]){delete d.value[o];break}}y.value=Object.values(d.value)[0].child_list,u.value.name!=""?e.value=V(u.value):e.value={parent:Object.values(d.value)[0].name},s.value=e.value.parent});const w=a=>{y.value=a.child_list,s.value=a.name},O=a=>{delete a.is_share,Object.assign(e.value,a)},Y=()=>{u.value={name:"",parent:"",title:"",url:""}},G=()=>{if(s.value==="DIY_LINK"){if(!e.value.title){S({message:i("diyLinkNameNotEmpty"),type:"warning"});return}if(!e.value.url){S({message:i("diyLinkUrlNotEmpty"),type:"warning"});return}e.value.parent=s.value,e.value.name=s.value,e.value.action=""}else s.value=="DIY_PAGE"&&(e.value.parent=s.value,e.value.action="decorate");u.value=V(e.value),v.value=!1,L("success")};return j({showDialog:v}),(a,o)=>{const f=D("Close"),E=X,K=D("ArrowRight"),k=H,N=J,g=Q,I=Z,M=ee;return c(),m("div",null,[p("div",{onClick:F},[z(a.$slots,"default",{},()=>[t(k,{modelValue:r(u).title,"onUpdate:modelValue":o[0]||(o[0]=l=>r(u).title=l),placeholder:r(i)("linkPlaceholder"),readonly:""},{suffix:n(()=>[p("div",{onClick:W(Y,["stop"])},[r(u).name?(c(),U(E,{key:0},{default:n(()=>[t(f)]),_:1})):(c(),U(E,{key:1},{default:n(()=>[t(K)]),_:1}))],8,ae)]),_:1},8,["modelValue","placeholder"])])]),t(M,{modelValue:v.value,"onUpdate:modelValue":o[4]||(o[4]=l=>v.value=l),title:r(i)("selectLinkTips"),width:"40%","close-on-press-escape":!1,"destroy-on-close":!0,"close-on-click-modal":!1},{footer:n(()=>[p("span",ce,[t(I,{onClick:o[3]||(o[3]=l=>v.value=!1)},{default:n(()=>[A(x(r(i)("cancel")),1)]),_:1}),t(I,{type:"primary",onClick:G},{default:n(()=>[A(x(r(i)("confirm")),1)]),_:1})])]),default:n(()=>[p("div",te,[t(N,{class:"w-[140px] border-r h-[350px]"},{default:n(()=>[(c(!0),m(C,null,B(d.value,(l,b)=>(c(),m("div",{key:b,class:P(["h-[40px] leading-[40px] cursor-pointer hover:bg-primary-light-9 px-[10px] hover:text-primary",[l.name==s.value?"bg-primary-light-9 text-primary":""]]),onClick:R=>w(l)},x(l.title),11,oe))),128))]),_:1}),t(N,{class:"pl-4 h-[350px] flex-1"},{default:n(()=>[s.value=="DIY_LINK"?(c(),m(C,{key:0},[p("div",ne,[t(g,{label:r(i)("diyLinkName")},{default:n(()=>[t(k,{modelValue:e.value.title,"onUpdate:modelValue":o[1]||(o[1]=l=>e.value.title=l),placeholder:r(i)("diyLinkNamePlaceholder"),class:"w-6/12"},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),p("div",se,[t(g,{label:r(i)("diyLinkUrl")},{default:n(()=>[t(k,{modelValue:e.value.url,"onUpdate:modelValue":o[2]||(o[2]=l=>e.value.url=l),placeholder:r(i)("diyLinkUrlPlaceholder"),class:"w-6/12"},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),t(g,{label:" "},{default:n(()=>[re]),_:1}),t(g,{label:" "},{default:n(()=>[ie]),_:1})],64)):(c(),m("div",ue,[(c(!0),m(C,null,B(y.value,(l,b)=>(c(),m("div",{key:b,class:P(["border border-br rounded-[3px] mr-[10px] mb-[10px] px-4 h-[32px] leading-[32px] cursor-pointer hover:bg-primary-light-9 px-[10px] hover:text-primary",[l.name==e.value.name?"border-primary text-primary":""]]),onClick:R=>O(l)},x(l.title),11,de))),128))]))]),_:1})])]),_:1},8,["modelValue","title"])])}}});export{ye as _};
