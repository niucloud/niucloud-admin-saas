import{d as B,r as c,n as C,q as I,N as a,h as g,I as V,w as i,a as O,e as m,aH as w,i as y,t as h,u as o,y as P,W as R,X as U,Y as T,E as j,aa as k,a0 as q}from"./index-9d601459.js";/* empty css                   *//* empty css                   *//* empty css                  *//* empty css                */import"./el-form-item-4ed993c7.js";/* empty css                 */import{u as S,s as H,t as W}from"./member-aa9fcf40.js";const X={class:"dialog-footer"},le=B({__name:"edit-label",emits:["complete"],setup(Y,{expose:x,emit:D}){let s=c(!1);const n=c(!1);let p="";const b={label_id:"",label_name:"",memo:"",sort:0},t=C({...b}),_=c(),E=I(()=>({label_name:[{required:!0,message:a("labelNamePlaceholder"),trigger:"blur"}],sort:[{validator:N,trigger:"blur"}]})),N=(d,e,l)=>{e<0?l(new Error(a("sortVerifyOne"))):e.toString().indexOf(".")!=-1?l(new Error(a("sortVerifyTwo"))):l()},L=async d=>{if(n.value||!d)return;let e=t.label_id?S:H;await d.validate(async l=>{l&&(n.value=!0,e(t).then(f=>{n.value=!1,s.value=!1,D("complete")}).catch(f=>{n.value=!1}))})};return x({showDialog:s,setFormData:async(d=null)=>{if(n.value=!0,Object.assign(t,b),p=a("addMemberLabel"),d){p=a("updateMemberLabel");const e=await(await W(d.label_id)).data;e&&Object.keys(t).forEach(l=>{e[l]!=null&&(t[l]=e[l])})}n.value=!1}}),(d,e)=>{const l=R,u=U,f=T,v=j,F=k,M=q;return g(),V(F,{modelValue:o(s),"onUpdate:modelValue":e[5]||(e[5]=r=>w(s)?s.value=r:s=r),title:o(p),width:"500px","destroy-on-close":!0},{footer:i(()=>[O("span",X,[m(v,{onClick:e[3]||(e[3]=r=>w(s)?s.value=!1:s=!1)},{default:i(()=>[y(h(o(a)("cancel")),1)]),_:1}),m(v,{type:"primary",loading:n.value,onClick:e[4]||(e[4]=r=>L(_.value))},{default:i(()=>[y(h(o(a)("confirm")),1)]),_:1},8,["loading"])])]),default:i(()=>[P((g(),V(f,{model:t,"label-width":"90px",ref_key:"formRef",ref:_,rules:o(E),class:"page-form"},{default:i(()=>[m(u,{label:o(a)("labelName"),prop:"label_name"},{default:i(()=>[m(l,{modelValue:t.label_name,"onUpdate:modelValue":e[0]||(e[0]=r=>t.label_name=r),clearable:"",placeholder:o(a)("labelNamePlaceholder"),class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),m(u,{label:o(a)("memo")},{default:i(()=>[m(l,{modelValue:t.memo,"onUpdate:modelValue":e[1]||(e[1]=r=>t.memo=r),type:"textarea",rows:"4",clearable:"",placeholder:o(a)("memoPlaceholder"),class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),m(u,{label:o(a)("sort"),prop:"sort"},{default:i(()=>[m(l,{modelValue:t.sort,"onUpdate:modelValue":e[2]||(e[2]=r=>t.sort=r),clearable:"",placeholder:o(a)("sortPlaceholder"),class:"input-width",type:"number"},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model","rules"])),[[M,n.value]])]),_:1},8,["modelValue","title"])}}});export{le as _};
