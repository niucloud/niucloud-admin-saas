import{d as Q,r as k,R as J,e as p,f,y as a,x as s,g as d,B as n,u as l,A as u,F as E,z as C,v as h,Q as K,H as W}from"./base-9962c822.js";/* empty css                   *//* empty css                      *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                        *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                *//* empty css                *//* empty css                       *//* empty css                  */import"./el-form-item-4ed993c7.js";import{_ as X}from"./site_logo-f276251b.js";import{f as Z}from"./storage-0874d153.js";import{t as r}from"./index-5516aed6.js";import{i as ee,s as te,t as ae,v as le,w as oe}from"./site-a8df7d1b.js";import{u as re,b as se}from"./vue-router-d7e63612.js";import{_ as ie}from"./edit-site.vue_vue_type_script_setup_true_lang-a4f90508.js";import{g as pe}from"./addon-48b9aa5e.js";/* empty css                   */import{a as ne}from"./index-2cabf788.js";import{E as me}from"./index-7ab57426.js";import{E as de}from"./index-19251c17.js";import{a as ue,E as ce}from"./index-7c833df7.js";import{a as _e,E as fe}from"./index-22970d5d.js";import{E as he}from"./index-07248937.js";import{E as ge}from"./index-189f302e.js";import{a as ve,E as be}from"./index-4906bae6.js";import{E as ye}from"./index-fb8b7863.js";import{E as xe}from"./index-26709bbd.js";import{v as ke}from"./directive-f75d4a7d.js";import{_ as Pe}from"./_plugin-vue_export-helper-c27b6911.js";import"./index-57446bef.js";import"./index-5c4817f4.js";import"./pinia-a9fc3924.js";import"./index-e026a545.js";import"./system-1108e5c1.js";import"./index-c4e33d8d.js";/* empty css                   *//* empty css                  *//* empty css                */import"./member_head-a897263d.js";import"./user-160c2ff0.js";import"./index-886a23f9.js";import"./index-e2acd187.js";import"./index-91fda20f.js";import"./error-78e43d3e.js";import"./scroll-d85c8f38.js";import"./vnode-562dae50.js";import"./index-df16e899.js";import"./focus-trap-d0fc8554.js";import"./index-c98e204a.js";import"./event-9519ab40.js";import"./index-71b7d8f4.js";import"./index-1370ab44.js";import"./typescript-defaf979.js";import"./index-6b77b11a.js";import"./index-ec548bfb.js";import"./_Uint8Array-c92ffa25.js";import"./_initCloneObject-41dd9efb.js";import"./index-ab38878f.js";import"./index-2ee99ba1.js";import"./strings-66191554.js";import"./isEqual-240b5e0a.js";import"./debounce-9674000c.js";import"./index-6edd46fb.js";import"./validator-00f31ee7.js";import"./flatten-940b9f2c.js";import"./index-6d647c6f.js";import"./index-65bc84a3.js";import"./_isIterateeCall-909b9c9e.js";const we={class:"main-container"},Ee={class:"flex justify-between items-center"},Ce={class:"text-[20px]"},Ve={class:"mt-[20px]"},De={class:"flex items-center"},Se=["src"],Le={key:1,class:"w-[50px] h-[50px] mr-[10px]",src:X,alt:""},Fe={class:"flex flex flex-col"},Ie={class:"flex items-center"},Te={class:"flex flex flex-col"},$e={key:0},Ue={key:1},Ye={class:"mt-[16px] flex justify-end"},ze=Q({__name:"list",setup(Ne){const V=re(),T=V.meta.title,v=k({all:[]}),D=k([]),o=J({page:1,limit:10,total:0,loading:!0,data:[],searchParam:{keywords:"",group_id:"",app:"all",status:"",create_time:[],expire_time:[]}});o.searchParam.status=V.query.id||"",(async()=>{let i=await(await ee({})).data;v.value.all=i,i.forEach((t,m)=>{v.value[t.app]||(v.value[t.app]=[]),v.value[t.app].push(t)})})(),(async()=>{D.value=await(await te()).data})();const S=k(),$=i=>{i&&(i.resetFields(),_())},U=i=>{o.searchParam.group_id=""},L=k([]);pe().then(({data:i})=>{L.value=i}).catch();const _=(i=1)=>{o.loading=!0,o.page=i,o.searchParam.app=o.searchParam.app=="all"?"":o.searchParam.app,ae({page:o.page,limit:o.limit,...o.searchParam}).then(t=>{o.loading=!1,o.data=t.data.data,o.total=t.data.total}).catch(()=>{o.loading=!1})};_();const Y=se(),x=k(null),z=i=>{x.value.setFormData(),x.value.showDialog=!0},N=i=>{Y.push({path:"/admin/site/info",query:{id:i.site_id}})},B=i=>{ne({message:r("siteUrlDevelopMessage"),grouping:!0,type:"success"})},M=i=>{x.value.setFormData(i),x.value.showDialog=!0},j=i=>{window.open(`${location.origin}/site/`)},H=(i,t)=>{i==1&&le({site_id:t}).then(m=>{_()}),i==3&&oe({site_id:t}).then(m=>{_()})};return(i,t)=>{const m=me,R=de,g=ue,b=_e,P=fe,F=he,A=ce,I=ge,c=ve,w=ye,G=be,q=xe,O=ke;return p(),f("div",we,[a(I,{class:"box-card !border-none",shadow:"never"},{default:s(()=>[d("div",Ee,[d("span",Ce,n(l(T)),1),a(m,{type:"primary",class:"w-[100px]",onClick:z},{default:s(()=>[u(n(l(r)("addSite")),1)]),_:1})]),a(I,{class:"box-card !border-none my-[10px] table-search-wrap",shadow:"never"},{default:s(()=>[a(A,{inline:!0,model:o.searchParam,ref_key:"searchFormRef",ref:S},{default:s(()=>[a(g,{label:l(r)("siteName"),prop:"keywords"},{default:s(()=>[a(R,{modelValue:o.searchParam.keywords,"onUpdate:modelValue":t[0]||(t[0]=e=>o.searchParam.keywords=e),placeholder:l(r)("siteNamePlaceholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(g,{label:l(r)("app"),prop:"app_id"},{default:s(()=>[a(P,{modelValue:o.searchParam.app,"onUpdate:modelValue":t[1]||(t[1]=e=>o.searchParam.app=e),clearable:"",onChange:U,placeholder:l(r)("appIdPlaceholder"),class:"input-width"},{default:s(()=>[a(b,{label:l(r)("selectPlaceholder"),value:"all"},null,8,["label"]),(p(!0),f(E,null,C(Object.values(L.value),e=>(p(),h(b,{label:e.title,value:e.key},null,8,["label","value"]))),256))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),a(g,{label:l(r)("groupId"),prop:"group_id"},{default:s(()=>[a(P,{modelValue:o.searchParam.group_id,"onUpdate:modelValue":t[2]||(t[2]=e=>o.searchParam.group_id=e),clearable:"",placeholder:l(r)("groupIdPlaceholder"),class:"input-width"},{default:s(()=>[a(b,{label:l(r)("selectPlaceholder"),value:""},null,8,["label"]),(p(!0),f(E,null,C(v.value[o.searchParam.app],e=>(p(),h(b,{label:e.group_name,value:e.group_id},null,8,["label","value"]))),256))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),a(g,{label:l(r)("status"),prop:"status"},{default:s(()=>[a(P,{modelValue:o.searchParam.status,"onUpdate:modelValue":t[3]||(t[3]=e=>o.searchParam.status=e),clearable:"",placeholder:l(r)("groupIdPlaceholder"),class:"input-width"},{default:s(()=>[a(b,{label:l(r)("selectPlaceholder"),value:""},null,8,["label"]),(p(!0),f(E,null,C(D.value,(e,y)=>(p(),h(b,{label:e,value:y},null,8,["label","value"]))),256))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),a(g,{label:l(r)("createTime"),prop:"create_time"},{default:s(()=>[a(F,{modelValue:o.searchParam.create_time,"onUpdate:modelValue":t[4]||(t[4]=e=>o.searchParam.create_time=e),type:"datetimerange","value-format":"YYYY-MM-DD HH:mm:ss","start-placeholder":l(r)("startDate"),"end-placeholder":l(r)("endDate")},null,8,["modelValue","start-placeholder","end-placeholder"])]),_:1},8,["label"]),a(g,{label:l(r)("expireTime"),prop:"expire_time"},{default:s(()=>[a(F,{modelValue:o.searchParam.expire_time,"onUpdate:modelValue":t[5]||(t[5]=e=>o.searchParam.expire_time=e),type:"datetimerange","value-format":"YYYY-MM-DD HH:mm:ss","start-placeholder":l(r)("startDate"),"end-placeholder":l(r)("endDate")},null,8,["modelValue","start-placeholder","end-placeholder"])]),_:1},8,["label"]),a(g,null,{default:s(()=>[a(m,{type:"primary",onClick:t[6]||(t[6]=e=>_())},{default:s(()=>[u(n(l(r)("search")),1)]),_:1}),a(m,{onClick:t[7]||(t[7]=e=>$(S.value))},{default:s(()=>[u(n(l(r)("reset")),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),d("div",Ve,[K((p(),h(G,{data:o.data,size:"large"},{empty:s(()=>[d("span",null,n(o.loading?"":l(r)("emptyData")),1)]),default:s(()=>[a(c,{prop:"site_id",label:l(r)("siteId"),width:"100","show-overflow-tooltip":!0},null,8,["label"]),a(c,{label:l(r)("siteInfo"),width:"300",align:"left"},{default:s(({row:e})=>[d("div",De,[e.logo?(p(),f("img",{key:0,class:"w-[50px] h-[50px] mr-[10px]",src:l(Z)(e.logo),alt:""},null,8,Se)):(p(),f("img",Le)),d("div",Fe,[d("span",null,n(e.site_name||""),1)])])]),_:1},8,["label"]),a(c,{label:l(r)("manager"),width:"150",align:"left"},{default:s(({row:e})=>[d("div",Ie,[d("div",Te,[d("span",null,n(e.admin.username||""),1)])])]),_:1},8,["label"]),a(c,{prop:"app_name",label:l(r)("app"),width:"150","show-overflow-tooltip":!0},null,8,["label"]),a(c,{prop:"group_name",label:l(r)("groupId"),width:"150","show-overflow-tooltip":!0},null,8,["label"]),a(c,{prop:"create_time",label:l(r)("createTime"),width:"250","show-overflow-tooltip":!0},null,8,["label"]),a(c,{prop:"expire_time",label:l(r)("expireTime"),width:"250","show-overflow-tooltip":!0},{default:s(({row:e})=>[e.expire_time==0?(p(),f("div",$e,"永久")):(p(),f("div",Ue,n(e.expire_time),1))]),_:1},8,["label"]),a(c,{label:l(r)("status"),width:"100",align:"center"},{default:s(({row:e})=>[e.status==1?(p(),h(w,{key:0,class:"ml-2",type:"success"},{default:s(()=>[u(n(e.status_name),1)]),_:2},1024)):e.status==3?(p(),h(w,{key:1,class:"ml-2",type:"error"},{default:s(()=>[u(n(e.status_name),1)]),_:2},1024)):(p(),h(w,{key:2,class:"ml-2",type:"error"},{default:s(()=>[u(n(e.status_name),1)]),_:2},1024))]),_:1},8,["label"]),a(c,{label:l(r)("operation"),"min-width":"250",align:"right",fixed:"right"},{default:s(({row:e})=>[a(m,{type:"primary",link:"",onClick:y=>j(e)},{default:s(()=>[u(" 访问站点 ")]),_:2},1032,["onClick"]),e.status==1||e.status==3?(p(),h(m,{key:0,type:"primary",link:"",onClick:y=>H(e.status,e.site_id)},{default:s(()=>[u(n(e.status==1?l(r)("closeTxt"):l(r)("openTxt")),1)]),_:2},1032,["onClick"])):W("",!0),a(m,{type:"primary",link:"",onClick:y=>M(e)},{default:s(()=>[u(n(l(r)("edit")),1)]),_:2},1032,["onClick"]),a(m,{type:"primary",link:"",onClick:y=>B(e)},{default:s(()=>[u(n(l(r)("url")),1)]),_:2},1032,["onClick"]),a(m,{type:"primary",link:"",onClick:y=>N(e)},{default:s(()=>[u(n(l(r)("info")),1)]),_:2},1032,["onClick"])]),_:1},8,["label"])]),_:1},8,["data"])),[[O,o.loading]]),d("div",Ye,[a(q,{"current-page":o.page,"onUpdate:currentPage":t[8]||(t[8]=e=>o.page=e),"page-size":o.limit,"onUpdate:pageSize":t[9]||(t[9]=e=>o.limit=e),layout:"total, sizes, prev, pager, next, jumper",total:o.total,onSizeChange:t[10]||(t[10]=e=>_()),onCurrentChange:_},null,8,["current-page","page-size","total"])])])]),_:1}),a(ie,{ref_key:"addSiteDialog",ref:x,onComplete:t[11]||(t[11]=e=>_())},null,512)])}}});const na=Pe(ze,[["__scopeId","data-v-795f0309"]]);export{na as default};
